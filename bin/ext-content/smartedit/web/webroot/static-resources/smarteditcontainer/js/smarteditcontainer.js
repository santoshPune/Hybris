angular.module("authenticationInterfaceModule",[]).factory("DEFAULT_AUTH_MAP",["I18N_ROOT_RESOURCE_URI","DEFAULT_AUTHENTICATION_ENTRY_POINT",function(a,b){var c="^(?!"+a+"/.*$).*$",d={};return d[c]=b,d}]).factory("DEFAULT_CREDENTIALS_MAP",["DEFAULT_AUTHENTICATION_ENTRY_POINT","DEFAULT_AUTHENTICATION_CLIENT_ID",function(a,b){var c={};return c[a]={client_id:b},c}]).factory("AuthenticationServiceInterface",function(){var a=function(){};return a.prototype.authenticate=function(a){},a.prototype.logout=function(){},a.prototype.isReAuthInProgress=function(){},a.prototype.setReAuthInProgress=function(){},a.prototype.filterEntryPoints=function(){},a.prototype.isAuthEntryPoint=function(){},a.prototype.isAuthenticated=function(){},a}),angular.module("featureInterfaceModule",["functionsModule"]).factory("FeatureServiceInterface",["$q","$log","hitch","isBlank",function(a,b,c,d){function e(){}return e.prototype._validate=function(a){if(d(a.key))throw new Error("featureService.configuration.key.error.required");if(d(a.nameI18nKey))throw new Error("featureService.configuration.nameI18nKey.error.required");if(d(a.enablingCallback)||"function"!=typeof a.enablingCallback)throw new Error("featureService.configuration.enablingCallback.error.not.function");if(d(a.disablingCallback)||"function"!=typeof a.disablingCallback)throw new Error("featureService.configuration.disablingCallback.error.not.function")},e.prototype.register=function(a){this._validate(a),this.featuresToAlias=this.featuresToAlias||{},this.featuresToAlias[a.key]={enablingCallback:a.enablingCallback,disablingCallback:a.disablingCallback},delete a.enablingCallback,delete a.disablingCallback,this._registerAliases(a)},e.prototype.enable=function(a){return this.featuresToAlias&&this.featuresToAlias[a]?void this.featuresToAlias[a].enablingCallback():void this._remoteEnablingFromInner(a)},e.prototype.disable=function(a){return this.featuresToAlias&&this.featuresToAlias[a]?void this.featuresToAlias[a].disablingCallback():void this._remoteDisablingFromInner(a)},e.prototype._remoteEnablingFromInner=function(a){},e.prototype._remoteDisablingFromInner=function(a){},e.prototype._registerAliases=function(a){},e.prototype.addToolbarItem=function(a){},e.prototype.addDecorator=function(a){},e.prototype.addContextualMenuButton=function(a){},e}]),angular.module("httpAuthInterceptorModule",["functionsModule","interceptorHelperModule","translationServiceModule","authenticationModule","storageServiceModule"]).factory("httpAuthInterceptor",["$q","$location","$rootScope","$injector","$log","hitch","storageService","authenticationService","interceptorHelper",function(a,b,c,d,e,f,g,h,i){var j={},k={request:function(a){return i.handleRequest(a,function(){return h.filterEntryPoints(a.url).then(function(b){if(b&&b.length>0){var c=b[0];return g.getAuthToken(c).then(function(b){return b?(e.debug(["Intercepting request adding access token: ",a.url].join(" ")),a.headers.Authorization=b.token_type+" "+b.access_token):e.debug(["Intercepting request no access token found: ",a.url].join(" ")),a})}return a},function(){return a})})},responseError:function(b){return i.handleResponseError(b,function(){var c=a.defer();return h.isAuthEntryPoint(b.config.url).then(function(a){401!=b.status||a?c.reject(b):h.filterEntryPoints(b.config.url).then(function(a){var d=a[0];e.debug(["Intercepting and trying Authentication: ",b.config.url,d].join(" ")),j[d]=j[d]||[],j[d].push(c),h.isReAuthInProgress(d).then(function(a){a||h.setReAuthInProgress(d).then(function(){h.authenticate(b.config.url).then(f(d,function(){angular.forEach(j[this],function(a){a.resolve()}),j[this]=[]}),f(d,function(a){angular.forEach(j[this],function(a){a.reject()}),j[this]=[]}))})}.bind(this))})}),c.promise.then(function(){return d.get("$http")(b.config)})})}};return k}]).config(["$httpProvider",function(a){a.interceptors.push("httpAuthInterceptor")}]),angular.module("httpErrorInterceptorModule",["interceptorHelperModule","functionsModule","translationServiceModule","authenticationModule","alertServiceModule","resourceLocationsModule"]).factory("httpErrorInterceptor",["LANGUAGE_RESOURCE_URI","$q","$location","$rootScope","$injector","hitch","authenticationService","$log","alertService","interceptorHelper",function(a,b,c,d,e,f,g,h,i,j){var k={};return k.removeErrorsByType=function(a,b){return(b||[]).filter(function(b){return b.type!=a})},k.convertErrorToTimedAlertObject=function(a){var b={successful:!1,message:a.message,closeable:!0};return b},k._failingHTML=function(a){return"GET"===a.config.method&&404===a.status&&a.headers("Content-type").indexOf("text/html")>=0},k.responseError=function(c){return j.handleResponseError(c,function(){h.debug(["Intercepting response error: ",c.config.url," status: ",c.status].join(" "));var d=new RegExp(a.replace(/\:.*\//g,".*/"));if(400==c.status){var e=k.removeErrorsByType("ValidationError",c.data.errors);if(0!==e.length){var f=[];e.forEach(function(a){f.push(k.convertErrorToTimedAlertObject(a))}),i.pushAlerts(f)}}else if(401!=c.status&&!d.test(c.config.url)){var g=void 0===c.message?"unknown.request.error":c.message;k._failingHTML(c)||i.pushAlerts([{successful:!1,message:g,closeable:!0}])}return b.reject(c)})},k}]).config(["$httpProvider",function(a){a.interceptors.push("httpErrorInterceptor")}]),angular.module("perspectiveServiceInterfaceModule",["functionsModule"]).constant("ALL_PERSPECTIVE","se.all").constant("NONE_PERSPECTIVE","se.none").factory("Perspective",["copy",function(a){var b=function(b,c,d){this.name=b,this.system=void 0===d?!1:d,this.features=c,this.setFeatures=function(b){this.features=a(b)},this.getFeatures=function(){return this.features}};return b.prototype.clone=function(){var a=[],c=this.getFeatures();for(var d in c)a.push(c[d]);return new b(this.name,a,this.system)},b}]).factory("PerspectiveServiceInterface",function(){function a(){}return a.prototype.register=function(a){},a.prototype.switchTo=function(a){},a.prototype.hasActivePerspective=function(){},a.prototype.selectDefault=function(){},a.prototype.isEmptyPerspectiveActive=function(){},a}),function(){function a(){function a(){}return a.prototype.renderSlots=function(a){},a.prototype.renderComponent=function(a,b,c){},a.prototype.renderRemoval=function(a,b){},a.prototype.renderPage=function(){},a.prototype.toggleOverlay=function(a){},a.prototype.refreshOverlayDimensions=function(){},a}angular.module("renderServiceInterfaceModule",[]).factory("RenderServiceInterface",a)}(),angular.module("sharedDataServiceInterfaceModule",[]).factory("SharedDataServiceInterface",function(){function a(){}return a.prototype.get=function(a){},a.prototype.set=function(a,b){},a}),angular.module("toolbarInterfaceModule",["functionsModule"]).factory("ToolbarServiceInterface",["$q","$log","hitch",function(a,b,c){function d(){}return d.prototype.getItems=function(){return this.actions},d.prototype.getAliases=function(){return this.aliases},d.prototype.addItems=function(a){var d=a.filter(c(this,function(a){var c=!0;return a.key?a.key in this.actions&&(b.debug("addItems() - Action already exists in toolbar with key "+a.key),c=!1):(b.error("addItems() - Cannot add action without key."),c=!1),c})).map(function(a){var b=a.key;return this.actions[b]=a.callback,{key:b,name:a.i18nKey,icons:a.icons,type:a.type,include:a.include,className:a.className,priority:a.priority||500,section:a.section||"left"}},this);d.length>0&&this.addAliases(d)},d.prototype.addAliases=function(){},d.prototype.removeItemByKey=function(){},d.prototype._removeItemOnInner=function(){},d.prototype.removeAliasByKey=function(){},d.prototype.addItemsStyling=function(){},d.prototype.triggerActionOnInner=function(){},d}]),angular.module("urlServiceInterfaceModule",[]).factory("UrlServiceInterface",function(){function a(){}return a.prototype.openUrlInPopup=function(a){},a.prototype.path=function(a){},a}),angular.module("componentHandlerServiceModule",["functionsModule"]).constant("OVERLAY_ID","smarteditoverlay").constant("COMPONENT_CLASS","smartEditComponent").constant("OVERLAY_COMPONENT_CLASS","smartEditComponentX").constant("SMARTEDIT_ATTRIBUTE_PREFIX","data-smartedit-").constant("ID_ATTRIBUTE","data-smartedit-component-id").constant("TYPE_ATTRIBUTE","data-smartedit-component-type").constant("CONTAINER_ID_ATTRIBUTE","data-smartedit-container-id").constant("CONTAINER_TYPE_ATTRIBUTE","data-smartedit-container-type").constant("CONTENT_SLOT_TYPE","ContentSlot").factory("componentHandlerService",["$window","isBlank","OVERLAY_ID","COMPONENT_CLASS","OVERLAY_COMPONENT_CLASS","ID_ATTRIBUTE","TYPE_ATTRIBUTE","CONTAINER_ID_ATTRIBUTE","CONTAINER_TYPE_ATTRIBUTE","CONTENT_SLOT_TYPE",function(a,b,c,d,e,f,g,h,i,j){var k=function(a,b,c){var d="";return d+=c?"."+c:"",d+="["+f+"='"+a+"']",d+="["+g+"='"+b+"']"},l=function(a,b,c,d){var e=k(c,j),f=k(a,b,d);return e+" > "+f};return{_isIframe:function(){return a.frameElement},getPageUID:function(){var a=this._isIframe()?this.getFromSelector("body"):this.getFromSelector("iframe").contents().find("body");return/smartedit-page-uid\-(\S+)/.exec(a.attr("class"))[1]},buildOverlayQuery:function(){return"#"+c},getFromSelector:function(a){return $(a)},getOverlay:function(){return this.getFromSelector(this.buildOverlayQuery())},getComponentUnderSlot:function(a,b,c,d){return this.getFromSelector(l(a,b,c,d))},getComponent:function(a,b,c){return this.getFromSelector(k(a,b,c))},getOriginalComponent:function(a,b){return this.getComponent(a,b,d)},getOriginalComponentWithinSlot:function(a,b,c){return this.getComponentUnderSlot(a,b,c,d)},getComponentInOverlay:function(a,b){return this.getComponent(a,b,e)},getComponentUnderParentOverlay:function(a,b,c){return this.getFromSelector(c).find(k(a,b,e))},getParent:function(a){var c=a.hasClass(d)?d:a.hasClass(e)?e:null;if(b(c))throw"componentHandlerService.getparent.error.component.from.unknown.layer";return a.closest("."+c+"["+f+"!='"+a.attr(f)+"']")},setId:function(a,b){return this.getFromSelector(a).attr(f,b)},getId:function(a){return this.getFromSelector(a).attr(f)},getSlotOperationRelatedId:function(a){var b=this.getFromSelector(a).attr(h);return b&&this.getFromSelector(a).attr(i)?b:this.getFromSelector(a).attr(f)},setType:function(a,b){return this.getFromSelector(a).attr(g,b)},getType:function(a){return this.getFromSelector(a).attr(g)},getSlotOperationRelatedType:function(a){var b=this.getFromSelector(a).attr(i);return b&&this.getFromSelector(a).attr(h)?b:this.getFromSelector(a).attr(g)},getAllComponentsSelector:function(){return"."+d+"["+g+"!='ContentSlot']"},getAllSlotsSelector:function(){return"."+d+"["+g+"='ContentSlot']"},getParentSlotForComponent:function(a){var b=a.closest("["+g+"="+j+"]");return b.attr(f)}}}]),angular.module("alertsBoxModule",[]).directive("alertsBox",function(){return{templateUrl:"web/common/services/alerts/alertsTemplate.html",restrict:"E",transclude:!0,replace:!1,scope:{alerts:"="},link:function(a,b,c){a.dismissAlert=function(b){a.alerts.splice(b,1)}}}}),angular.module("hasOperationPermissionModule",["authorizationModule","eventServiceModule"]).controller("hasOperationPermissionController",["$scope","$log","authorizationService","systemEventService","EVENTS",function(a,b,c,d,e){this.isPermissionGranted=!1,this.refreshIsPermissionGranted=function(){c.canPerformOperation(this.hasOperationPermission).then(function(a){this.isPermissionGranted=a}.bind(this),function(){b.error("Failed to retrieve authorization"),this.isPermissionGranted=!1}.bind(this))};var f=this.refreshIsPermissionGranted.bind(this);d.registerEventHandler(e.AUTHORIZATION_SUCCESS,f),a.$on("$destroy",function(){d.unRegisterEventHandler(e.AUTHORIZATION_SUCCESS,f)}),a.$watch(function(){return this.hasOperationPermission}.bind(this),function(a,b){a!==b&&this.refreshIsPermissionGranted()}.bind(this)),this.refreshIsPermissionGranted()}]).directive("hasOperationPermission",function(){return{transclude:!0,restrict:"A",templateUrl:"web/common/services/authorization/hasOperationPermissionTemplate.html",controller:"hasOperationPermissionController",controllerAs:"ctrl",scope:{},bindToController:{hasOperationPermission:"="}}}),angular.module("authorizationModule",["restServiceFactoryModule","loadConfigModule","storageServiceModule","resourceLocationsModule"]).provider("permissionKeysFactory",function(){var a=[];return{addKeysToCheck:function(b){b.forEach(function(b){-1==a.indexOf(b)&&a.push(b)})},$get:function(){return{getPermissionKeys:function(){return angular.copy(a)}}}}}).service("authorizationService",["restServiceFactory","storageService","permissionKeysFactory","USER_GLOBAL_PERMISSIONS_RESOURCE_URI","$log",function(a,b,c,d,e){var f={},g=a.get(d),h=function(){return b.getPrincipalIdentifier().then(function(a){return a?(f[a]=f[a]||g.get({user:a,permissionNames:c.getPermissionKeys().join(",")}).then(function(a){return a.permissions}),f[a]):[]}.bind(this))},i=function(a,b){return!!(a||[]).find(function(a){return a.key.toLowerCase()===b.toLowerCase()&&"true"===a.value})};this.canPerformOperation=function(a){return h.call(this,a).then(function(b){return i.call(this,b,a)}.bind(this),function(){return e.error("AuthorizationService - Failed to determine authorization for type "+a),!1})}}]),function(){angular.module("compileHtmlModule",[]).directive("compileHtml",["$compile",function(a){return{restrict:"A",link:function(b,c,d){b.$watch(function(a){return a.$eval(d.compileHtml)},function(d){c.html(d),a(c.contents())(b)})}}}])}(),angular.module("dragAndDropServiceInterfaceModule",[]).factory("DragAndDropServiceInterface",function(){function a(){}return a.prototype.register=function(a){},a}),angular.module("eventServiceModule",["functionsModule"]).constant("EVENT_SERVICE_MODE_ASYNCH","EVENT_SERVICE_MODE_ASYNCH").constant("EVENT_SERVICE_MODE_SYNCH","EVENT_SERVICE_MODE_SYNCH").constant("EVENTS",{AUTHORIZATION_SUCCESS:"AUTHORIZATION_SUCCESS",LOGOUT:"SE_LOGOUT_EVENT",CLEAR_PERSPECTIVE_FEATURES:"CLEAR_PERSPECTIVE_FEATURES"}).factory("EventService",["customTimeout","$q","$log","hitch","toPromise","EVENT_SERVICE_MODE_ASYNCH","EVENT_SERVICE_MODE_SYNCH",function(a,b,c,d,e,f,g){var h=function(h){this.eventHandlers={},this.mode=f,(h===f||h===g)&&(this.mode=h),this._recursiveCallToEventHandlers=function(a,b,c){c=c||0;var f=e(this.eventHandlers[a][c]);return f(a,b).then(d(this,function(d){return c<this.eventHandlers[a].length-1?this._recursiveCallToEventHandlers(a,b,c+1):d}))},this.sendEvent=function(a,b){if(this.mode===f)this.sendAsynchEvent(a,b);else{if(this.mode!==g)throw"Unknown event service mode: "+this.mode;this.sendSynchEvent(a,b)}},this.sendSynchEvent=function(a,d){var e=b.defer();return a?(this.eventHandlers[a]&&this.eventHandlers[a].length>0?this._recursiveCallToEventHandlers(a,d).then(function(a){e.resolve(a)},function(){e.reject()}):e.resolve(),e.promise):(c.error("Failed to send event. No event ID provided for data: "+d),void e.reject())},this.sendAsynchEvent=function(c,e){var f=b.defer();return a(d(this,function(){this.sendSynchEvent(c,e).then(function(a){f.resolve(a)},function(){f.reject()})}),0),f.promise},this.registerEventHandler=function(a,b){return a&&b?(void 0===this.eventHandlers[a]&&(this.eventHandlers[a]=[]),void this.eventHandlers[a].push(b)):void c.error("Failed to register event handler for event: "+a)},this.unRegisterEventHandler=function(a,b){var d=this.eventHandlers[a].indexOf(b);d>=0?this.eventHandlers[a].splice(d,1):c.warn("Attempting to remove event handler for "+a+" but handler not found.")}};return h}]).factory("systemEventService",["EventService",function(a){var b=new a;return b}]),angular.module("experienceInterceptorModule",["interceptorHelperModule","functionsModule","sharedDataServiceModule","restServiceFactoryModule","resourceLocationsModule"]).factory("experienceInterceptor",["hitch","sharedDataService","interceptorHelper","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","CMSWEBSERVICES_PATH","MEDIA_PATH","CONTEXT_SITE_ID",function(a,b,c,d,e,f,g,h){var i=function(a){return c.handleRequest(a,function(){return a.url.indexOf(g)>-1?b.get("experience").then(function(b){return b&&(a.params.params.indexOf(d)>-1&&(a.params.params=a.params.params.replace(d,b.catalogDescriptor.catalogId)),a.params.params.indexOf(e)>-1&&(a.params.params=a.params.params.replace(e,b.catalogDescriptor.catalogVersion))),a}):a.url.indexOf(f)>-1?b.get("experience").then(function(b){return b&&(a.url.indexOf(d)>-1&&(a.url=a.url.replace(d,b.catalogDescriptor.catalogId)),a.url.indexOf(e)>-1&&(a.url=a.url.replace(e,b.catalogDescriptor.catalogVersion)),a.url.indexOf(h)>-1&&(a.url=a.url.replace(h,b.siteDescriptor.uid))),a}):a})},j={};return j.request=a(j,i),j}]).config(["$httpProvider",function(a){a.interceptors.push("experienceInterceptor")}]),angular.module("functionsModule",[]).factory("ParseError",function(){var a=function(a){this.value=a};return a}).factory("getOrigin",function(){return function(){return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}}).factory("isBlank",function(){return function(a){return"undefined"==typeof a||null===a||"null"===a||0===a.toString().trim().length}}).factory("extend",function(){return function(a,b){return b||(b=function(){}),b.prototype=Object.create(a.prototype),b}}).factory("hitch",function(){return function(a,b){var c=Array.prototype.slice.call(arguments),d=c.slice(2);return function(){var c=Array.prototype.slice.call(arguments);return b.apply(a,d.concat(c))}}}).factory("customTimeout",["$rootScope",function(a){return function(b,c){setTimeout(function(){b(),a.$digest()},c)}}]).factory("copy",function(){return function(a){return JSON.parse(JSON.stringify(a))}}).factory("merge",function(){return function(a,b){return jQuery.extend(a,b),a}}).factory("getQueryString",function(){return function(a){var b="";if(a)for(var c in a)b+="&"+c+"="+a[c];return"?"+b}}).factory("getURI",function(){return function(a){return a&&a.indexOf("?")>-1?a.split("?")[0]:a}}).factory("parseQuery",function(){return function(a){var b={};return a.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(a,c,d,e){b[c]=e}),b}}).factory("trim",function(){return function(a){var b=/^\s+/,c=/\s+$/;return a.replace(b,"").replace(c,"")}}).factory("convertToArray",function(){return function(a){var b=[];for(var c in a)0!==c.indexOf("$")&&0!==c.indexOf("toJSON")&&b.push({key:c,value:a[c]});return b}}).factory("injectJS",["customTimeout","$log","hitch",function(a,b,c){function d(){return $script}return{getInjector:d,execute:function(a){var b=a.srcs,d=a.index,e=a.callback;void 0===d&&(d=0),void 0!==b[d]&&this.getInjector()(b[d],c(this,function(){d+1<b.length?this.execute({srcs:b,index:d+1,callback:e}):"function"==typeof e&&e()}))}}}]).factory("uniqueArray",function(){return function(a,b){return b.forEach(function(b){-1==a.indexOf(b)&&a.push(b)}),a}}).factory("regExpFactory",function(){return function(a){var b=new RegExp(/^[a-zA-Z\d]+$/i),c=new RegExp(/^[a-zA-Z\d\*]+$/i);return b.test(a)?regexpKey=["^","$"].join(a):c.test(a)?regexpKey=["^","$"].join(a.replace(/\*/,".*")):regexpKey=a,new RegExp(regexpKey,"g")}}).factory("generateIdentifier",function(){return function(){var a=(new Date).getTime();window.performance&&"function"==typeof window.performance.now&&(a+=performance.now());var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)});return b}}).factory("escapeHtml",function(){return function(a){return"string"==typeof a?a.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):a}}).factory("sanitizeHTML",function(){return function(a,b){var c=angular.copy(a);return b?angular.forEach(c.value,function(a,b){null!==a&&(c.value[b]=a.replace(/(\r\n|\n|\r)/gm,"").replace(/>\s+</g,"><").replace(/<\/br\>/g,""))}):null!==c&&(c=c.replace(/(\r\n|\n|\r)/gm,"").replace(/>\s+</g,"><").replace(/<\/br\>/g,"")),c}}).factory("toPromise",["$q",function(a){return function(b,c){return function(){return a.when(b.apply(c,arguments))}}}]).factory("isFunction",function(){return function(a){return"function"==typeof a}}).factory("isObject",function(){var a={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};return function(b){return!(!b||!a[typeof b])}}).factory("debounce",["isFunction","isObject",function(a,b){function c(){}return function(d,e,f){var g,h,i,j,k,l,m,n,o,p=0,q=!1,r=!0;if(!a(d))throw new c;e=Math.max(0,e)||0,f===!0?(n=!0,r=!1):b(f)&&(n=f.leading,q="maxWait"in f&&(Math.max(e,f.maxWait)||0),r="trailing"in f?f.trailing:r);var s=function(){var a=e-(Date.now()-j);0>=a?(h&&clearTimeout(h),o=m,h=l=m=void 0,o&&(p=Date.now(),i=d.apply(k,g),l||h||(g=k=null))):l=setTimeout(s,a)},t=function(){l&&clearTimeout(l),h=l=m=void 0,(r||q!==e)&&(p=Date.now(),i=d.apply(k,g),l||h||(g=k=null))};return function(){g=arguments,j=Date.now(),k=this,m=r&&(l||!n);var a,b;if(q===!1)a=n&&!l;else{h||n||(p=j);var c=q-(j-p);b=0>=c,b?(h&&(h=clearTimeout(h)),p=j,i=d.apply(k,g)):h||(h=setTimeout(t,c))}return b&&l?l=clearTimeout(l):l||e===q||(l=setTimeout(s,e)),a&&(b=!0,i=d.apply(k,g)),!b||l||h||(g=k=null),i}}}]).factory("throttle",["debounce","isFunction","isObject",function(a,b,c){return function(d,e,f){var g=!0,h=!0;if(!b(d))throw new TypeError;return f===!1?g=!1:c(f)&&(g="leading"in f?f.leading:g,h="trailing"in f?f.trailing:h),f={},f.leading=g,f.maxWait=e,f.trailing=h,a(d,e,f)}}]).factory("parseHTML",function(){return function(a){return $.parseHTML(a)}}).factory("unsafeParseHTML",function(){return function(a){return $.parseHTML(a,null,!0)}}).factory("extractFromElement",function(){return function(a,b){return a=$(a),a.filter(b).add(a.find(b))}}),angular.module("gatewayFactoryModule",["eventServiceModule"]).constant("WHITE_LISTED_STOREFRONTS_CONFIGURATION_KEY","whiteListedStorefronts").constant("TIMEOUT_TO_RETRY_PUBLISHING",500).service("gatewayFactory",["$rootScope","$q","hitch","getOrigin","systemEventService","customTimeout","$log","$window","$injector","WHITE_LISTED_STOREFRONTS_CONFIGURATION_KEY","TIMEOUT_TO_RETRY_PUBLISHING",function(a,b,c,d,e,f,g,h,i,j,k){function l(){var a=h.addEventListener?"addEventListener":"attachEvent",b="attachEvent"==a?"onmessage":"message",d=[];h[a](b,c(this,function(a){if(this._isAllowed(a.origin)){var b=a.data;if(d.indexOf(b.pk)>-1)return;d.push(b.pk),g.debug("message event handler called",b.eventId);var c=b.gatewayId,e=s[c];if(!e)return void g.debug("Incoming message on gateway "+c+", but no destination exists.");e._processEvent(b)}else g.error("disallowed storefront is trying to communicate with smarteditcontainer")}),!1)}function m(a){return s[a]?(g.error("Message Gateway for "+a+" already reserved"),null):(s[a]=new t(a),s[a])}var n="promiseAcknowledgement",o="promiseReturn",p="success",q="failure",r=[],s={},t=function(a){this.gatewayId=a,this._getTargetFrame=function(){if(h.frameElement)return h.parent;if(h.document.getElementsByTagName("iframe").length>0)return h.document.getElementsByTagName("iframe")[0].contentWindow;throw new Error("It is standalone. There is no iframe")},this._generateIdentifier=function(){return(new Date).getTime()+Math.random().toString()},this._getSystemEventId=function(a){return this.gatewayId+":"+a},this.publish=function(a,d,e,h){e||(e=0);var i,j=b.defer();try{i=this._getTargetFrame()}catch(l){return j.reject(),j.promise}return h=h||this._generateIdentifier(),i.postMessage({pk:h,gatewayId:this.gatewayId,eventId:a,data:d},"*"),r[h]=j,f(c(this,function(b,c){b.acknowledged||a===o||a===n||(5>c?(c++,g.debug(document.location.href,"is retrying to publish event",a),i.postMessage({pk:h,gatewayId:this.gatewayId,eventId:a,data:d},"*")):(g.error(document.location.href,"failed to publish event",a),b.reject()))},j,e),k),j.promise},this.subscribe=function(a,b){var c=this._getSystemEventId(a);e.registerEventHandler(c,b)},this._processEvent=function(a){if(a.eventId!==o&&a.eventId!==n){g.debug(document.location.href,"sending acknowledgement for",a),this.publish(n,{pk:a.pk});var b=this._getSystemEventId(a.eventId);e.sendAsynchEvent(b,a.data).then(c(this,function(b){g.debug(document.location.href,"sending promise resolve",a),this.publish(o,{pk:a.pk,type:p,resolvedDataOfLastSubscriber:b})}),c(this,function(){g.debug(document.location.href,"sending promise reject",a),this.publish(o,{pk:a.pk,type:q})}))}else a.eventId===o?r[a.data.pk]&&(a.data.type===p?(g.debug(document.location.href,"received promise resolve",a),r[a.data.pk].resolve(a.data.resolvedDataOfLastSubscriber)):a.data.type===q&&(g.debug(document.location.href,"received promise reject",a),r[a.data.pk].reject())):a.eventId===n&&r[a.data.pk]&&(g.debug(document.location.href,"received acknowledgement",a),r[a.data.pk].acknowledged=!0)}};return{initListener:l,createGateway:m,_isIframe:function(a){return h.frameElement},_isAllowed:function(a){var b=i.has(j)?i.get(j):[];return this._isIframe()||d()===a||b.some(function(b){return a.indexOf(b)>-1})}}}]),angular.module("gatewayProxyModule",["gatewayFactoryModule"]).factory("gatewayProxy",["$log","$q","hitch","toPromise","gatewayFactory",function(a,b,c,d,e){var f=function(a){return""===a.toString().match(/\{([\s\S]*)\}/m)[1].trim()},g=function(a,b,c){delete b[a],b[a]=function(){return c.publish(a,{arguments:Array.prototype.slice.call(arguments)}).then(function(a){return a})}},h=function(a,b,c,d){return b[a].apply(b,d.arguments)},i=function(b,i){if(!b.gatewayId)return a.error("initForService() - service expected to have an associated gatewayId"),null;var j=e.createGateway(b.gatewayId),k=i;if(!k){k=[];for(var l in b)"function"==typeof b[l]&&k.push(l)}k.forEach(function(a){"function"==typeof b[a]&&(f(b[a])?g(a,b,j):(b[a]=d(b[a],b),j.subscribe(a,c(null,h,a,b))))})};return{initForService:i}}]),angular.module("FetchDataHandlerInterfaceModule",[]).factory("FetchDataHandlerInterface",function(){var a=function(){};return a.prototype.getById=function(a,b){throw"getById is not implemented"},a.prototype.findBymask=function(a,b){throw"findBymask is not implemented"},a}),angular.module("fetchEnumDataHandlerModule",["FetchDataHandlerInterfaceModule","restServiceFactoryModule","resourceLocationsModule"]).factory("fetchEnumDataHandler",["$q","FetchDataHandlerInterface","restServiceFactory","isBlank","extend","ENUM_RESOURCE_URI",function(a,b,c,d,e,f){var g={},h=function(){this.restServiceForEnum=c.get(f)};return h=e(b,h),h.prototype.findByMask=function(b,c){return(g[b.cmsStructureEnumType]?a.when(g[b.cmsStructureEnumType]):this.restServiceForEnum.get({enumClass:b.cmsStructureEnumType})).then(function(a){return g[b.cmsStructureEnumType]=a,g[b.cmsStructureEnumType].enums.filter(function(a){return d(c)||a.label.toUpperCase().indexOf(c.toUpperCase())>-1})})},new h}]),angular.module("fetchMediaDataHandlerModule",["FetchDataHandlerInterfaceModule","experienceInterceptorModule","restServiceFactoryModule","resourceLocationsModule"]).factory("fetchMediaDataHandler",["FetchDataHandlerInterface","restServiceFactory","hitch","copy","extend","$q","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","MEDIA_PATH","MEDIA_RESOURCE_URI",function(a,b,c,d,e,f,g,h,i,j){var k=function(){this.restServiceForMediaSearch=b.get(i),this.restServiceForMediaFetch=b.get(j)};return k=e(a,k),k.prototype.findByMask=function(a,b){var c=f.defer(),d={};return d.namedQuery="namedQueryMediaSearchByCodeCatalogVersion",d.params="code:"+b+",catalogId:"+g+",catalogVersion:"+h,this.restServiceForMediaSearch.get(d).then(function(a){c.resolve(a.media)},function(){c.reject()}),c.promise},k.prototype.getById=function(a,c){var d=f.defer();return this.restServiceForMediaFetch=b.get(j+"/"+c),this.restServiceForMediaFetch.get().then(function(a){d.resolve(a)},function(){d.reject()}),d.promise},new k}]),angular.module("previewDataGenericEditorResponseHandlerModule",[]).factory("previewDataGenericEditorResponseHandler",function(){var a=function(a,b){a.pristine.ticketId=b.ticketId};return a}),angular.module("dateTimePickerModule",["languageServiceModule","translationServiceModule"]).directive("dateTimePicker",["$rootScope","dateTimePickerLocalizationService",function(a,b){return{templateUrl:"web/common/services/genericEditor/dateTimePicker/dateTimePickerTemplate.html",restrict:"E",transclude:!0,replace:!1,scope:{name:"=",model:"=",isEditable:"="},link:function(c,d){c.placeholderText="componentform.select.date",c.isEditable&&$(d.children()[0]).datetimepicker({format:"L LT",showClear:!0,showClose:!0,useCurrent:!1,minDate:0,keepOpen:!0}).on("dp.change",function(){c.model=d.find("input")[0].value,a.$digest()}).on("dp.show",function(){var a=$(d.children()[0]).datetimepicker().data("DateTimePicker");b.localizeDateTimePicker(a)})}}}]).constant("resolvedLocaleToMomentLocaleMap",{"in":"id",zh:"zh-cn"}).constant("tooltipsMap",{today:"datetimepicker.today",clear:"datetimepicker.clear",close:"datetimepicker.close",selectMonth:"datetimepicker.selectmonth",prevMonth:"datetimepicker.previousmonth",nextMonth:"datetimepicker.nextmonth",selectYear:"datetimepicker.selectyear",prevYear:"datetimepicker.prevyear",nextYear:"datetimepicker.nextyear",selectDecade:"datetimepicker.selectdecade",prevDecade:"datetimepicker.prevdecade",nextDecade:"datetimepicker.nextdecade",prevCentury:"datetimepicker.prevcentury",nextCentury:"datetimepicker.nextcentury",pickHour:"datetimepicker.pickhour",incrementHour:"datetimepicker.incrementhour",decrementHour:"datetimepicker.decrementhour",pickMinute:"datetimepicker.pickminute",incrementMinute:"datetimepicker.incrementminute",decrementMinute:"datetimepicker.decrementminute",pickSecond:"datetimepicker.picksecond",incrementSecond:"datetimepicker.incrementsecond",decrementSecond:"datetimepicker.decrementsecond",togglePeriod:"datetimepicker.toggleperiod",selectTime:"datetimepicker.selecttime"}).service("dateTimePickerLocalizationService",["$translate","resolvedLocaleToMomentLocaleMap","tooltipsMap","languageService",function(a,b,c,d){var e=function(a){var c=b[a];return c?c:a},f=function(){var b={};for(var d in c)b[d]=a.instant(c[d]);return b},g=function(a,b){for(var d in c)if(a[d]!==b[d])return!1;return!0},h=function(a){d.getResolveLocale().then(function(b){var c=e(b);a.locale()!==c&&a.locale(c)})},i=function(a){var b=a.tooltips(),c=f();g(b,c)||a.tooltips(c)};this.localizeDateTimePicker=function(a){h(a),i(a)}}]),angular.module("seGenericEditorFieldErrorsModule",[]).controller("seGenericEditorFieldErrorsController",function(){this.getFilteredErrors=function(){return(this.field.errors||[]).filter(function(a){return a.language===this.qualifier&&!a.format}.bind(this)).map(function(a){return a.message})}}).directive("seGenericEditorFieldErrors",function(){return{templateUrl:"web/common/services/genericEditor/errors/seGenericEditorFieldErrorsTemplate.html",restrict:"E",scope:{},controller:"seGenericEditorFieldErrorsController",controllerAs:"ctrl",bindToController:{field:"=",qualifier:"="}}}),angular.module("genericEditorModule",["genericEditorFieldModule","restServiceFactoryModule","functionsModule","eventServiceModule","coretemplates","translationServiceModule","localizedElementModule","languageServiceModule","experienceInterceptorModule","dateTimePickerModule","seMediaFieldModule","fetchEnumDataHandlerModule","seRichTextFieldModule","seMediaContainerFieldModule","seValidationErrorParserModule"]).factory("GenericEditor",["restServiceFactory","languageService","sharedDataService","systemEventService","hitch","escapeHtml","sanitizeHTML","copy","isBlank","$q","$log","$translate","$injector","RESPONSE_HANDLER_SUFFIX","seValidationErrorParser",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=["Boolean","ShortString","LongString","RichText","Date","Dropdown"],q="linkToggle",r="UnrelatedValidationErrors",s=function(a){if(i(a.structure)&&i(a.structureApi))throw"genericEditor.configuration.error.no.structure";if(!i(a.structure)&&!i(a.structureApi))throw"genericEditor.configuration.error.2.structures";if(i(a.contentApi)&&i(a.onSubmit))throw"genericEditor.configuration.error.no.contentapi"},t=function(b){s(b),this.id=b.id,this.smarteditComponentType=b.smarteditComponentType,
this.smarteditComponentId=b.smarteditComponentId,this.updateCallback=b.updateCallback,this.onStructureResolved=b.onStructureResolved,this.structure=b.structure,b.structureApi&&(this.editorStructureService=a.get(b.structureApi)),b.contentApi&&(this.editorCRUDService=a.get(b.contentApi)),this.initialContent=b.content,this.component=null,this.fields=[],this.languages=[],this.linkToStatus=null,b.onSubmit&&(this.onSubmit=b.onSubmit),d.registerEventHandler(r,e(this,this._handleUnrelatedValidationErrors))};return t.prototype._handleUnrelatedValidationErrors=function(a,b){if(!this.isDirty()){var c=this._displayValidationErrors(b);c&&d.sendAsynchEvent("EDITOR_IN_ERROR_EVENT",this.id)}return j.when()},t.prototype._isPrimitive=function(a){return p.indexOf(a)>-1},t.prototype._getSelector=function(a){return $(a)},t.prototype.reset=function(a){return this._getSelector(".ui-select-search").val(""),this._getSelector(".ui-select-search").trigger("input"),this.removeValidationErrors(),this.component=h(this.pristine),this.fields.forEach(function(a){delete a.initiated}),this.holders||(this.holders=this.fields.map(e(this,function(a){return{editor:this,field:a}}))),a&&a.$setPristine(),j.when()},t.prototype.removeValidationErrors=function(){for(var a=0;a<this.fields.length;a++){var b=this.fields[a];b.errors=void 0}},t.prototype.fetch=function(){return this.initialContent?j.when(this.initialContent):this.smarteditComponentId?this.editorCRUDService.get({identifier:this.smarteditComponentId}):j.when({})},t.prototype.sanitizeLoad=function(a){return this.fields.forEach(function(b){b.localized===!0&&i(a[b.qualifier])&&(a[b.qualifier]={})}),a},t.prototype.load=function(){var a=j.defer();return this.fetch().then(e(this,function(b){this.pristine=this.sanitizeLoad(b),this.reset(),a.resolve()}),function(b){k.error("GenericEditor.load failed"),a.reject()}),a.promise},t.prototype._merge=function(a,b){var c=a;return b=h(b),this.fields.forEach(function(a){a.editable===!0&&(c[a.qualifier]=b[a.qualifier])}),this.linkToStatus.hasBoth()&&(c.external=b.external,c.urlLink=b.urlLink),c},t.prototype.getComponent=function(a){return this.component},t.prototype.sanitizePayload=function(a,b){var c={SHORT_STRING:"ShortString",LONG_STRING:"LongString",LINK_TOGGLE:"LinkToggle"},d="linkToggle",e=[];return b.forEach(function(a){(a.cmsStructureType===c.LONG_STRING||a.cmsStructureType===c.SHORT_STRING||a.cmsStructureType===c.LINK_TOGGLE)&&e.push({name:a.qualifier===d?"urlLink":a.qualifier,localized:a.localized?!0:!1})}),e.forEach(function(b){if("undefined"!=typeof a[b.name]&&b.name in a)if(b.localized){var c=a[b.name].value;Object.keys(c).forEach(function(a){c[a]=f(c[a])})}else a[b.name]=f(a[b.name])}),a},t.prototype._fieldsAreUserChecked=function(){return this.fields.every(function(a){var b=!1;for(var c in a.requiresUserCheck)b=b||a.requiresUserCheck[c];return!b||a.isUserChecked})},t.prototype.onSubmit=function(){return this.fetch().then(e(this,function(a){var b=this._merge(a,this.component);b=this.sanitizePayload(b,this.fields),this.smarteditComponentId&&(b.identifier=this.smarteditComponentId);var c=this.smarteditComponentId?this.editorCRUDService.update(b):this.editorCRUDService.save(b);return c.then(function(a){return{payload:b,response:a}})}))},t.prototype.submit=function(a){var b=j.defer(),c=this.getComponent(a);return this.removeValidationErrors(),this.hasFrontEndValidationErrors=!1,this._fieldsAreUserChecked()?this.isDirty()&&a.$valid?this.onSubmit().then(e(this,function(c){this.pristine=h(c.payload),delete this.pristine.identifier;var d=this.smarteditComponentType+n;if(!this.smarteditComponentId&&m.has(d)){var e=m.get(d);e(this,c.response)}this.removeValidationErrors(),this.reset(a),b.resolve(this.pristine),this.updateCallback&&this.updateCallback(this.pristine,c.response)}),e(this,function(a){this.removeValidationErrors(),this._displayValidationErrors(a.data.errors);var c=this._collectUnrelatedValidationErrors(a.data.errors);c.length>0&&c.length===a.data.errors.length?(d.sendAsynchEvent(r,c),b.reject(!1)):b.reject(!0)})):b.resolve(c):(b.reject(!0),this.hasFrontEndValidationErrors=!0),b.promise},t.prototype._displayValidationErrors=function(a){var b=!1;return a.filter(function(a){return"ValidationError"===a.type}).forEach(e(this,function(a){var c=this.fields.filter(function(b){return b.qualifier===a.subject||"urlLink"===a.subject&&b.qualifier===q})[0];if(c){void 0===c.errors&&(c.errors=[]),b=!0;var d=o.parse(a.message);d.language=c.localized?d.language:c.qualifier,c.errors.push(d)}})),b},t.prototype._collectUnrelatedValidationErrors=function(a){return a.filter(e(this,function(a){return"ValidationError"===a.type&&0===this.fields.filter(function(b){return b.qualifier===a.subject}).length}))},t.prototype.fieldAdaptor=function(a){return a.forEach(e(this,function(a){if(void 0===a.editable&&(a.editable=!0),!a.postfixText){var b=this.smarteditComponentType.toLowerCase()+"."+a.qualifier.toLowerCase()+".postfix.text",c=l.instant(b);a.postfixText=c!=b?c:""}})),this.linkToStatus=a.reduce(function(a,b){return"external"===b.qualifier&&(a.hasExternal=!0,a.externalI18nKey=b.i18nKey),"urlLink"===b.qualifier&&(a.hasUrlLink=!0,a.urlLinkI18nKey=b.i18nKey),a},{hasExternal:!1,hasUrlLink:!1,hasBoth:function(){return this.hasExternal&&this.hasUrlLink}}),this.linkToStatus.hasBoth()&&(a=a.filter(function(a){return"external"!==a.qualifier&&"urlLink"!==a.qualifier}),a.push({cmsStructureType:"LinkToggle",qualifier:q,i18nKey:"editor.linkto.label",externalI18nKey:"editor.linkto.external.label",internalI18nKey:"editor.linkto.internal.label"})),a},t.prototype.emptyUrlLink=function(){this.component.urlLink=""},t.prototype.refreshOptions=function(a,b,c){var d,f,g="fetch"+a.cmsStructureType+"DataHandler";a.localized?(d=this.component[a.qualifier][b],f=b):(d=this.component[a.qualifier],f=a.qualifier);var h=m.get(g);a.initiated=a.initiated||[],a.options=a.options||{},"Enum"===a.cmsStructureType&&a.initiated.push(f),a.initiated.indexOf(f)>-1?(c.length>2||"Enum"===a.cmsStructureType)&&h.findByMask(a,c).then(function(b){a.options[f]=b}):d?h.getById(a,d).then(e(a,function(b){a.options[f]=[b],a.initiated.push(f)})):a.initiated.push(f)},t.prototype._buildComparable=function(a){if(!a)return a;var b={},c=this.fields;return angular.forEach(a,function(a,d){var e=c.filter(function(a){return a.qualifier===d&&"RichText"===a.cmsStructureType});1==e.length?b[d]=g(a,e[0].localized):b[d]=a}),b},t.prototype.isDirty=function(){return!angular.equals(this._buildComparable(this.pristine),this._buildComparable(this.component))},t.prototype.init=function(){var a=j.defer(),d=this.editorStructureService?this.editorStructureService.get({smarteditComponentType:this.smarteditComponentType}):j.when({attributes:this.structure});return d.then(function(d){this.onStructureResolved&&this.onStructureResolved(this.id,d),c.get("experience").then(e(this,function(c){b.getLanguagesForSite(c.siteDescriptor.uid).then(e(this,function(b){this.languages=b,this.fields=this.fieldAdaptor(d.attributes),this.load().then(function(){a.resolve()},function(b){a.reject()})}),function(){k.error("GenericEditor failed to fetch storefront languages"),a.reject()})}))}.bind(this),function(){k.error("GenericEditor.init failed"),a.reject()}),a.promise},t}]).directive("genericEditor",["GenericEditor","isBlank","$log","$q",function(a,b,c,d){return{templateUrl:"web/common/services/genericEditor/genericEditorTemplate.html",restrict:"E",transclude:!0,replace:!1,scope:{id:"=",smarteditComponentId:"=",smarteditComponentType:"=",structureApi:"=",structure:"=",contentApi:"=",content:"=",submit:"=",getComponent:"=",reset:"=",isDirty:"=",updateCallback:"=",onStructureResolved:"="},link:function(c,d,e){c.editor=new a({id:c.id,smarteditComponentType:c.smarteditComponentType,smarteditComponentId:c.smarteditComponentId,structureApi:c.structureApi,structure:c.structure,contentApi:c.contentApi,updateCallback:c.updateCallback,onStructureResolved:c.onStructureResolved,content:c.content}),c.editor.init(),c.editor.showReset=b(e.reset),c.editor.showSubmit=b(e.submit),c.submitButtonText="componentform.actions.submit",c.cancelButtonText="componentform.actions.cancel",c.reset=function(){return c.editor.reset(c.componentForm)},c.submit=function(){return c.editor.submit(c.componentForm)},c.getComponent=function(){return c.editor.getComponent(c.componentForm)},c.isDirty=function(){return c.editor.isDirty()},$(d.find(".no-enter-submit")[0]).bind("keypress",function(a){return 13===a.keyCode?!1:void 0}),c.editor.disabled=function(a,b){return"day"===b&&(0===a.getDay()||6===a.getDay())},c.editor.dateOptions={formatYear:"yy",startingDay:1},c.editor.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate","MMM dd, yyyy hh:mm"],c.editor.format=c.editor.formats[4]}}}]).constant("RESPONSE_HANDLER_SUFFIX","GenericEditorResponseHandler"),angular.module("genericEditorFieldModule",["translationServiceModule","ui.bootstrap","ui.select","ngSanitize","seGenericEditorFieldErrorsModule"]).directive("genericEditorField",function(){return{templateUrl:"web/common/services/genericEditor/genericEditorFieldTemplate.html",restrict:"E",transclude:!1,replace:!1,scope:{editor:"=",field:"=",model:"=",qualifier:"="}}}),angular.module("seErrorsListModule",[]).controller("seErrorsListController",function(){this.getSubjectErrors=function(){return this.subject?this.errors.filter(function(a){return a.subject===this.subject}.bind(this)):this.errors}}).directive("seErrorsList",function(){return{templateUrl:"web/common/services/genericEditor/media/components/errorsList/seErrorsListTemplate.html",restrict:"E",scope:{},controller:"seErrorsListController",controllerAs:"ctrl",bindToController:{errors:"=",subject:"="}}}),angular.module("seFileSelectorModule",[]).controller("seFileSelectorController",function(){this.imageRoot=this.imageRoot||"",this.disabled=this.disabled||!1,this.customClass=this.customClass||"",this.buildAcceptedFileTypesList=function(){return this.acceptedFileTypes.map(function(a){return"."+a}).join(",")}}).directive("seFileSelector",function(){return{templateUrl:"web/common/services/genericEditor/media/components/fileSelector/seFileSelectorTemplate.html",restrict:"E",scope:{},controller:"seFileSelectorController",controllerAs:"ctrl",bindToController:{imageRoot:"=",uploadIcon:"=",labelI18nKey:"=",acceptedFileTypes:"=",customClass:"=",disabled:"=",onFileSelect:"&"},link:function(a,b){b.find("input").on("change",function(c){a.$apply(function(){a.ctrl.onFileSelect({files:c.target.files});var d=b.find("input");d.replaceWith(d.clone(!0))})})}}}),angular.module("seMediaAdvancedPropertiesModule",["ui.bootstrap"]).constant("seMediaAdvancedPropertiesConstants",{CONTENT_URL:"web/common/services/genericEditor/media/components/mediaAdvancedProperties/seMediaAdvancedPropertiesContentTemplate.html",I18N_KEYS:{DESCRIPTION:"media.advanced.information.description",CODE:"media.advanced.information.code",ALT_TEXT:"media.advanced.information.alt.text",ADVANCED_INFORMATION:"media.advanced.information",INFORMATION:"media.information"}}).controller("seMediaAdvancedPropertiesController",["seMediaAdvancedPropertiesConstants",function(a){this.i18nKeys=a.I18N_KEYS,this.contentUrl=a.CONTENT_URL}]).directive("seMediaAdvancedProperties",function(){return{restrict:"E",scope:{},bindToController:{code:"=",advInfoIcon:"=",description:"=",altText:"="},controller:"seMediaAdvancedPropertiesController",controllerAs:"ctrl",templateUrl:"web/common/services/genericEditor/media/components/mediaAdvancedProperties/seMediaAdvancedPropertiesTemplate.html"}}).directive("seMediaAdvancedPropertiesCondensed",function(){return{restrict:"E",scope:{},bindToController:{code:"=",advInfoIcon:"=",description:"=",altText:"="},controller:"seMediaAdvancedPropertiesController",controllerAs:"ctrl",templateUrl:"web/common/services/genericEditor/media/components/mediaAdvancedProperties/seMediaAdvancedPropertiesCondensedTemplate.html"}}),angular.module("seMediaContainerFieldModule",["seMediaUploadFormModule","seMediaFormatModule","seErrorsListModule","seFileValidationServiceModule"]).controller("seMediaContainerFieldController",["seFileValidationService",function(a){this.image={},this.fileErrors=[],this.fileSelected=function(b,c){var d=this.image.format;this.resetImage(),1===b.length&&a.validate(b[0],this.fileErrors).then(function(){this.image={file:b[0],format:c||d}}.bind(this))},this.resetImage=function(){this.fileErrors=[],this.image={}},this.imageUploaded=function(a){this.model[this.qualifier][this.image.format]=a,this.resetImage()},this.imageDeleted=function(a){this.model[this.qualifier][a]={}},this.isFormatUnderEdit=function(a){return a===this.image.format}}]).directive("seMediaContainerField",function(){return{templateUrl:"web/common/services/genericEditor/media/components/mediaContainerField/seMediaContainerFieldTemplate.html",restrict:"E",controller:"seMediaContainerFieldController",controllerAs:"ctrl",scope:{},bindToController:{field:"=",model:"=",editor:"=",qualifier:"="}}}),angular.module("seMediaFieldModule",["seMediaSelectorModule","seMediaUploadFormModule","seFileValidationServiceModule","seErrorsListModule"]).factory("seMediaFieldConstants",["SMARTEDIT_ROOT",function(a){return{I18N_KEYS:{UPLOAD_IMAGE_TO_LIBRARY:"upload.image.to.library"},UPLOAD_ICON_URL:"static-resources/images/upload_image.png",DELETE_ICON_URL:"static-resources/images/remove_image_small.png",REPLACE_ICON_URL:"static-resources/images/replace_image_small.png",ADV_INFO_ICON_URL:"static-resources/images/info_image_small.png"}}]).controller("seMediaFieldController",["seMediaFieldConstants","seFileValidationServiceConstants","seFileValidationService",function(a,b,c){this.i18nKeys=a.I18N_KEYS,this.acceptedFileTypes=b.ACCEPTED_FILE_TYPES,this.uploadIconUrl=a.UPLOAD_ICON_URL,this.deleteIconUrl=a.DELETE_ICON_URL,this.replaceIconUrl=a.REPLACE_ICON_URL,this.advInfoIconUrl=a.ADV_INFO_ICON_URL,this.image={},this.fileErrors=[],this.fileSelected=function(a,b){this.resetImage(),1===a.length&&c.validate(a[0],this.fileErrors).then(function(){this.image={file:a[0],format:b||this.image.format}}.bind(this))},this.resetImage=function(){this.fileErrors=[],this.image={}},this.imageUploaded=function(a){this.resetImage(),this.model[this.qualifier]=a,this.field.initiated&&(this.field.initiated.length=0),this.editor.refreshOptions(this.field,this.qualifier,"")}}]).directive("seMediaField",function(){return{templateUrl:"web/common/services/genericEditor/media/components/mediaField/seMediaFieldTemplate.html",restrict:"E",controller:"seMediaFieldController",controllerAs:"ctrl",scope:{},bindToController:{field:"=",model:"=",editor:"=",qualifier:"="}}}),angular.module("seMediaFormatModule",["seMediaServiceModule","seFileSelectorModule","seFileValidationServiceModule"]).constant("seMediaFormatConstants",{I18N_KEYS:{UPLOAD:"media.format.upload",REPLACE:"media.format.replace",UNDER_EDIT:"media.format.under.edit",REMOVE:"media.format.remove"},UPLOAD_ICON_URL:"static-resources/images/upload_image.png",UPLOAD_ICON_DIS_URL:"static-resources/images/upload_image_disabled.png",DELETE_ICON_URL:"static-resources/images/remove_image_small.png",REPLACE_ICON_URL:"static-resources/images/replace_image_small.png",ADV_INFO_ICON_URL:"static-resources/images/info_image_small.png"}).controller("seMediaFormatController",["seMediaService","seMediaFormatConstants","seFileValidationServiceConstants","$scope",function(a,b,c,d){this.i18nKeys=b.I18N_KEYS,this.acceptedFileTypes=c.ACCEPTED_FILE_TYPES,this.uploadIconUrl=b.UPLOAD_ICON_URL,this.uploadIconDisabledUrl=b.UPLOAD_ICON_DIS_URL,this.deleteIconUrl=b.DELETE_ICON_URL,this.replaceIconUrl=b.REPLACE_ICON_URL,this.advInfoIconUrl=b.ADV_INFO_ICON_URL,this.fetchMediaForCode=function(){a.getMediaByCode(this.mediaCode).then(function(a){this.media=a}.bind(this))},this.isMediaCodeValid=function(){return this.mediaCode&&"string"==typeof this.mediaCode},this.getErrors=function(){return(this.errors||[]).filter(function(a){return a.format===this.mediaFormat}.bind(this)).map(function(a){return a.message})},this.isMediaCodeValid()&&this.fetchMediaForCode(),d.$watch(function(){return this.mediaCode}.bind(this),function(a,b){a&&"string"==typeof a?a!==b&&this.fetchMediaForCode():this.media={}}.bind(this))}]).directive("seMediaFormat",function(){return{templateUrl:"web/common/services/genericEditor/media/components/mediaFormat/seMediaFormatTemplate.html",restrict:"E",controller:"seMediaFormatController",controllerAs:"ctrl",scope:{},bindToController:{mediaCode:"=",mediaFormat:"=",isUnderEdit:"=",errors:"=",onFileSelect:"&",onDelete:"&"}}}),angular.module("seMediaPreviewModule",[]).constant("seMediaPreviewConstants",{CONTENT_URL:"web/common/services/genericEditor/media/components/mediaPreview/seMediaPreviewContentTemplate.html",I18N_KEYS:{PREVIEW:"media.preview"}}).controller("seMediaPreviewController",["seMediaPreviewConstants",function(a){this.i18nKeys=a.I18N_KEYS,this.contentUrl=a.CONTENT_URL}]).directive("seMediaPreview",function(){return{restrict:"E",scope:{},bindToController:{imageUrl:"="},controller:"seMediaPreviewController",controllerAs:"ctrl",templateUrl:"web/common/services/genericEditor/media/components/mediaPreview/seMediaPreviewTemplate.html"}}),angular.module("seMediaSelectorModule",["seMediaAdvancedPropertiesModule","seMediaPreviewModule"]).controller("seMediaSelectorController",function(){this.onDelete=function(a,b){b.preventDefault(),b.stopPropagation(),a.selected=void 0}}).directive("seMediaSelector",function(){return{templateUrl:"web/common/services/genericEditor/media/components/mediaSelector/seMediaSelectorTemplate.html",restrict:"E",scope:{},bindToController:{field:"=",model:"=",editor:"=",qualifier:"=",deleteIcon:"=",replaceIcon:"=",advInfoIcon:"="},controller:"seMediaSelectorController",controllerAs:"ctrl"}}),angular.module("seMediaUploadFieldModule",[]).controller("seMediaUploadFieldController",function(){this.displayImage=!1}).directive("seMediaUploadField",function(){return{templateUrl:"web/common/services/genericEditor/media/components/mediaUploadForm/seMediaUploadFieldTemplate.html",restrict:"E",scope:{},bindToController:{field:"=",model:"=",error:"="},controller:"seMediaUploadFieldController",controllerAs:"ctrl",link:function(a,b,c,d){b.bind("mouseover",function(b){d.displayImage=!0,a.$digest()}),b.bind("mouseout",function(b){d.displayImage=!1,a.$digest()})}}}),angular.module("seMediaUploadFormModule",["seFileValidationServiceModule","seMediaServiceModule","seObjectValidatorFactoryModule","seBackendValidationHandlerModule","seMediaUploadFieldModule","functionsModule"]).constant("seMediaUploadFormConstants",{MAX_FILENAME_CHARACTERS_DISPLAYED:15,I18N_KEYS:{UPLOAD_IMAGE_CANCEL:"upload.image.cancel",UPLOAD_IMAGE_SUBMIT:"upload.image.submit",UPLOAD_IMAGE_REPLACE:"upload.image.replace",UPLOAD_IMAGE_TO_LIBRARY:"upload.image.to.library",DESCRIPTION:"uploaded.image.description",CODE:"uploaded.image.code",ALT_TEXT:"uploaded.image.alt.text",UPLOADING:"uploaded.is.uploading",CODE_IS_REQUIRED:"uploaded.image.code.is.required"}}).factory("seMediaUploadFormValidators",["seMediaUploadFormConstants",function(a){return[{subject:"code",message:a.I18N_KEYS.CODE_IS_REQUIRED,validate:function(a){return!!a}}]}]).controller("seMediaUploadFormController",["seFileValidationServiceConstants","seMediaService","seMediaUploadFormConstants","seObjectValidatorFactory","seMediaUploadFormValidators","seBackendValidationHandler","escapeHtml","$scope",function(a,b,c,d,e,f,g,h){this.i18nKeys=c.I18N_KEYS,this.acceptedFileTypes=a.ACCEPTED_FILE_TYPES,this.imageParameters={},this.isUploading=!1,this.fieldErrors=[],this.showEditIcon=!1,h.$watch(function(){return this.image}.bind(this),function(){this.image&&this.image.file&&(this.imageParameters={code:this.image.file.name,description:this.image.file.name,altText:this.image.file.name})}.bind(this)),this.onCancel=function(){this.imageParameters={},this.fieldErrors=[],this.isUploading=!1,this.onCancelCallback()},this.onImageUploadSuccess=function(a){this.imageParameters={},this.fieldErrors=[],this.isUploading=!1,this.onUploadCallback({code:a.code})},this.onImageUploadFail=function(a){this.isUploading=!1,f.handleResponse(a,this.fieldErrors)},this.onMediaUploadSubmit=function(){this.fieldErrors=[];var a=d.build(e);a.validate(this.imageParameters,this.fieldErrors)&&(this.isUploading=!0,b.uploadMedia({file:this.image.file,code:g(this.imageParameters.code),description:g(this.imageParameters.description),altText:g(this.imageParameters.altText)}).then(this.onImageUploadSuccess.bind(this),this.onImageUploadFail.bind(this)))},this.getErrorsForField=function(a){return this.fieldErrors.filter(function(b){return b.subject===a}).map(function(a){return a.message})},this.hasError=function(a){return this.fieldErrors.some(function(b){return b.subject===a})},this.getTruncatedName=function(){var a=this.image&&this.image.file&&this.image.file.name||"";return a.length>c.MAX_FILENAME_CHARACTERS_DISPLAYED&&(a=a.substring(0,c.MAX_FILENAME_CHARACTERS_DISPLAYED),a+="..."),a}}]).directive("seMediaUploadForm",function(){return{templateUrl:"web/common/services/genericEditor/media/components/mediaUploadForm/seMediaUploadFormTemplate.html",restrict:"E",scope:{},controller:"seMediaUploadFormController",controllerAs:"ctrl",bindToController:{field:"=",image:"=",onUploadCallback:"&",onCancelCallback:"&",onSelectCallback:"&"}}}),angular.module("seBackendValidationHandlerModule",[]).factory("seBackendValidationHandler",function(){var a=function(a,b){return b=b||[],a&&a.data&&a.data.errors&&a.data.errors.filter(function(a){return"ValidationError"===a.type}).forEach(function(a){var c=a.subject;c&&b.push({subject:c,message:a.message})}),b};return{handleResponse:a}}),angular.module("seFileMimeTypeServiceModule",[]).constant("seFileMimeTypeServiceConstants",{VALID_IMAGE_MIME_TYPE_CODES:["FFD8FFDB","FFD8FFE0","FFD8FFE1","474946383761","424D","49492A00","4D4D002A","89504E470D0A1A0A"]}).factory("seFileReader",function(){var a=function(a,b){var c=new FileReader;return b=b||{},c.onloadend=b.onLoadEnd,c.onerror=b.onError,c.readAsArrayBuffer(a),c};return{read:a}}).factory("seFileMimeTypeService",["seFileMimeTypeServiceConstants","seFileReader","$q",function(a,b,c){var d=function(b){var c=new Uint8Array(b).subarray(0,8),d=c.reduce(function(a,b){var c=b.toString(16);return 1===c.length&&(c="0"+c),a+=c},"");return a.VALID_IMAGE_MIME_TYPE_CODES.some(function(a){return 0===d.toLowerCase().indexOf(a.toLowerCase())})},e=function(a){var e=c.defer();return b.read(a,{onLoadEnd:function(a){d(a.target.result)?e.resolve():e.reject()},onError:function(){e.reject()}}),e.promise};return{isFileMimeTypeValid:e}}]),angular.module("seFileValidationServiceModule",["seObjectValidatorFactoryModule","seFileMimeTypeServiceModule"]).constant("seFileValidationServiceConstants",{ACCEPTED_FILE_TYPES:["jpeg","jpg","gif","bmp","tiff","tif","png"],MAX_FILE_SIZE_IN_BYTES:20971520,I18N_KEYS:{FILE_TYPE_INVALID:"upload.file.type.invalid",FILE_SIZE_INVALID:"upload.file.size.invalid"}}).factory("seFileObjectValidators",["seFileValidationServiceConstants",function(a){return[{subject:"size",message:a.I18N_KEYS.FILE_SIZE_INVALID,validate:function(b){return b<=a.MAX_FILE_SIZE_IN_BYTES}}]}]).factory("seFileValidationService",["seObjectValidatorFactory","seFileObjectValidators","seFileValidationServiceConstants","seFileMimeTypeService","$q",function(a,b,c,d,e){var f=function(){return c.ACCEPTED_FILE_TYPES.map(function(a){return"."+a}).join(",")},g=function(f,g){return a.build(b).validate(f,g),d.isFileMimeTypeValid(f).then(function(){return 0===g.length?e.when():e.reject(g)},function(){return g.push({subject:"type",message:c.I18N_KEYS.FILE_TYPE_INVALID}),e.reject(g)})};return{buildAcceptedFileTypesList:f,validate:g}}]),angular.module("seMediaServiceModule",["resourceLocationsModule","experienceInterceptorModule","ngResource"]).factory("seMediaResource",["$resource","MEDIA_RESOURCE_URI",function(a,b){return a(b,{},{get:{method:"GET",cache:!0,headers:{}},save:{method:"POST",headers:{"Content-Type":void 0,enctype:"multipart/form-data","x-requested-with":"Angular"},transformRequest:function(a){var b=new FormData;return angular.forEach(a,function(a,c){b.append(c,a)}),b}}})}]).factory("seMediaResourceService",["$resource","MEDIA_RESOURCE_URI",function(a,b){var c=function(c){return a(b+"/"+c,{},{get:{method:"GET",cache:!0,headers:{}}})};return{getMediaByCode:c}}]).factory("seMediaService",["seMediaResource","seMediaResourceService",function(a,b){var c=function(b){return a.save(b).$promise},d=function(a){return b.getMediaByCode(a).get().$promise};return{uploadMedia:c,getMediaByCode:d}}]),angular.module("seObjectValidatorFactoryModule",[]).factory("seObjectValidatorFactory",function(){function a(a,b,c){return c=c||[],a.forEach(function(a){var d=b[a.subject];a.validate(d,b)||c.push({subject:a.subject,message:a.message})}),0===c.length}var b=function(b){return{validate:a.bind(null,b)}};return{build:b}}),angular.module("seRichTextFieldModule",["ngSanitize","languageServiceModule"]).constant("seRichTextConfiguration",{toolbar:"full",toolbar_full:[{name:"basicstyles",items:["Bold","Italic","Strike","Underline"]},{name:"paragraph",items:["BulletedList","NumberedList","Blockquote"]},{name:"editing",items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"tools",items:["SpellChecker","Maximize"]},"/",{name:"styles",items:["Format","FontSize","TextColor","PasteText","PasteFromWord","RemoveFormat"]},{name:"insert",items:["Image","Table","SpecialChar"]},{name:"forms",items:["Outdent","Indent"]},{name:"clipboard",items:["Undo","Redo"]},{name:"document",items:["PageBreak","Source"]}],disableNativeSpellChecker:!1,height:"100px",width:"100%",autoParagraph:!1,enterMode:CKEDITOR.ENTER_BR,shiftEnterMode:CKEDITOR.ENTER_BR,basicEntities:!1,allowedContent:!0,fillEmptyBlocks:!1,contentsCss:"static-resources/dist/smartedit/css/outer-styling.css"}).service("seRichTextLoaderService",["$q","$interval",function(a,b){var c=a.defer(),d=b(function(){"loaded"===CKEDITOR.status&&(c.resolve(),b.cancel(d))},100);return{load:function(){var b=a.defer();return c.promise.then(function(){b.resolve()}),b.promise}}}]).service("genericEditorSanitizationService",["$sanitize",function(a){return{isSanitized:function(b){var c=a(b);c=c.replace(/&#10;/g,"\n").replace(/&#160;/g,"").replace(/<br>/g,"<br />"),b=b.replace(/&#10;/g,"\n").replace(/&#160;/g,"").replace(/<br>/g,"<br />");var d=c===b;return d}}}]).controller("seRichTextFieldController",function(){}).directive("seRichTextField",["seRichTextLoaderService","seRichTextConfiguration","genericEditorSanitizationService","seRichTextFieldLocalizationService",function(a,b,c,d){return{restrict:"E",templateUrl:"web/common/services/genericEditor/richText/seRichTextFieldTemplate.html",scope:{},controller:"seRichTextFieldController",controllerAs:"ctrl",bindToController:{field:"=",qualifier:"=",model:"=",editor:"="},link:function(e,f){a.load().then(function(){var a=f.find("textarea")[0],g=CKEDITOR.replace(a,b);d.localizeCKEditor(),f.bind("$destroy",function(){g&&CKEDITOR.instances[g.name]&&CKEDITOR.instances[g.name].destroy()}),e.ctrl.onChange=function(){e.$apply(function(){e.ctrl.model[e.ctrl.qualifier]=g.getData(),e.ctrl.reassignUserCheck()})},e.ctrl.onMode=function(){if("source"==this.mode){var a=g.editable();a.attachListener(a,"input",function(){g.fire("change")})}},e.ctrl.onInstanceReady=function(a){a.editor.dataProcessor.writer.setRules("br",{indent:!1,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1})},e.ctrl.requiresUserCheck=function(){var a=!1;for(var b in this.field.requiresUserCheck)a=a||this.field.requiresUserCheck[b];return a},e.ctrl.reassignUserCheck=function(){if(e.ctrl.model&&e.ctrl.qualifier&&e.ctrl.model[e.ctrl.qualifier]){var a=c.isSanitized(e.ctrl.model[e.ctrl.qualifier]);e.ctrl.field.requiresUserCheck=e.ctrl.field.requiresUserCheck||{},e.ctrl.field.requiresUserCheck[e.ctrl.qualifier]=!a}else e.ctrl.field.requiresUserCheck=e.ctrl.field.requiresUserCheck||{},e.ctrl.field.requiresUserCheck[e.ctrl.qualifier]=!1},g.on("change",e.ctrl.onChange),g.on("mode",e.ctrl.onMode),CKEDITOR.on("instanceReady",e.ctrl.onInstanceReady)})}}}]).constant("resolvedLocaleToCKEDITORLocaleMap",{"in":"id",es_CO:"es"}).service("seRichTextFieldLocalizationService",["languageService","resolvedLocaleToCKEDITORLocaleMap",function(a,b){var c=function(a){var c=b[a];return c?c:a};this.localizeCKEditor=function(){a.getResolveLocale().then(function(a){CKEDITOR.config.language=c(a)})}}]),angular.module("seValidationErrorParserModule",[]).service("seValidationErrorParser",function(){this.parse=function(a){var b=new RegExp("[a-zA-Z]+: ([|{)([a-zA-Z]+)(]|}).?","g"),c=a.match(b)||[];return c.reduce(function(a,b){a.message=a.message.replace(b,"").trim();var c=b.split(":")[0].trim().toLowerCase(),d=b.split(":")[1].match(/[a-zA-Z]+/g)[0];return a[c]=d,a},{message:a})}}),angular.module("i18nInterceptorModule",["interceptorHelperModule","resourceLocationsModule","languageServiceModule"]).constant("temporaryKeys",{}).constant("I18NAPIROOT","i18nAPIRoot").constant("UNDEFINED_LOCALE","UNDEFINED").factory("i18nInterceptor",["$injector","interceptorHelper","I18N_RESOURCE_URI","I18NAPIROOT","UNDEFINED_LOCALE","temporaryKeys",function(a,b,c,d,e,f){return{request:function(e){return b.handleRequest(e,function(){var b=new RegExp(d+"/([a-zA-Z_]+)$");if(b.test(e.url)){b.exec(e.url)[1];return a.get("languageService").getResolveLocale().then(function(a){return e.url=[c,a].join("/"),e})}return e})},response:function(d){return b.handleResponse(d,function(){var b=new RegExp(c+"/([a-zA-Z_]+)$");if(d.config.url){var e=d.config.url;if(b.test(e)&&d.data.value&&(d.data=d.data.value),b.test(e))for(var g in f)d.data[g]||(d.data[g]=f[g])}return a.get("languageService").setInitialized(!0),d})}}}]).config(["$httpProvider",function(a){a.interceptors.push("i18nInterceptor")}]),angular.module("yInfiniteScrollingModule",["infinite-scroll","functionsModule"]).value("THROTTLE_MILLISECONDS",250).controller("yInfiniteScrollingController",["$scope","throttle","THROTTLE_MILLISECONDS","generateIdentifier","$timeout",function(a,b,c,d,e){this.initiated=!1,this.containerId=d(),this.containerIdSelector="#"+this.containerId,this.context=this.context||this,this.reset=function(){this.distance=this.distance||0,this.context.items=[],this.currentPage=-1,this.pagingDisabled=!1,this.container||e(function(){this.container=$(this.containerIdSelector).get(0),this.initiated=!0}.bind(this),0)},this.nextPage=function(){this.pagingDisabled||(this.pagingDisabled=!0,this.currentPage++,this.mask=this.mask||"",this.fetchPage(this.mask,this.pageSize,this.currentPage).then(function(a){Array.prototype.push.apply(this.context.items,a.results),this.pagingDisabled=0===a.results.length||this.context.items.length==a.pagination.totalCount}.bind(this)))}.bind(this),this.$onChanges=b(function(){var a=this.initiated;this.reset(),a&&this.nextPage()}.bind(this),c),a.$watch(function(){return this.mask}.bind(this),this.$onChanges)}]).directive("yInfiniteScrolling",function(){return{templateUrl:"web/common/services/infiniteScrolling/yInfiniteScrollingTemplate.html",transclude:!0,replace:!0,controller:"yInfiniteScrollingController",controllerAs:"scroll",scope:{},bindToController:{pageSize:"=",mask:"=?",fetchPage:"=",distance:"=?",context:"=?",dropDownContainerClass:"@?",dropDownClass:"@?"}}}),angular.module("interceptorHelperModule",[]).service("interceptorHelper",["$q","$log",function(a,b){return{_isEligibleForInterceptors:function(a){return a&&a.url&&!/.+\.html$/.test(a.url)},_handle:function(c,d,e,f){try{return this._isEligibleForInterceptors(d)?a.when(e()):f?a.reject(c):c}catch(g){return b.error("caught error in one of the interceptors",g),f?a.reject(c):c}},handleRequest:function(a,b){return this._handle(a,a,b,!1)},handleResponse:function(a,b){return this._handle(a,a.config,b,!1)},handleResponseError:function(a,b){return this._handle(a,a.config,b,!0)}}}]),angular.module("languageSelectorModule",["languageServiceModule","ui.select","ngSanitize","eventServiceModule"]).controller("languageSelectorController",["systemEventService","$scope","languageService","SWITCH_LANGUAGE_EVENT",function(a,b,c,d){
this.setSelectedLanguage=function(a){c.setSelectedToolingLanguage(a)},c.getToolingLanguages().then(function(a){this.languages=a,c.getResolveLocale().then(function(a){this.selectedLanguage=this.languages.find(function(b){return b.isoCode===a})}.bind(this))}.bind(this)),this.eventHandler=function(){return c.getResolveLocale().then(function(a){this.selectedLanguage=this.languages.find(function(b){return b.isoCode===a})}.bind(this))};var e=this.eventHandler.bind(this);a.registerEventHandler(d,e),b.$on("$destroy",function(){a.unRegisterEventHandler(d,e)})}]).directive("languageSelector",["languageService","$q",function(a,b){return{templateUrl:"web/common/services/languageSelector/languageSelectorTemplate.html",restrict:"E",transclude:!0,scope:{},bindToController:{},controller:"languageSelectorController",controllerAs:"ctrl"}}]),angular.module("languageServiceModule",["restServiceFactoryModule","resourceLocationsModule","storageServiceModule","translationServiceModule","gatewayFactoryModule","eventServiceModule"]).constant("SELECTED_LANGUAGE","SELECTED_LANGUAGE").constant("SWITCH_LANGUAGE_EVENT","SWITCH_LANGUAGE_EVENT").factory("languageServiceGateway",["gatewayFactory",function(a){return a.createGateway("languageSwitch")}]).factory("languageService",["restServiceFactory","LANGUAGE_RESOURCE_URI","$q","I18N_LANGUAGES_RESOURCE_URI","SELECTED_LANGUAGE","storageService","languageServiceGateway","$translate","SWITCH_LANGUAGE_EVENT","systemEventService",function(a,b,c,d,e,f,g,h,i,j){var k={},l=a.get(b),m=a.get(d),n=function(){var a=(navigator.language||navigator.userLanguage).split("-");return a=1===a.length?a[0]:a[0]+"_"+a[1].toUpperCase()},o=function(){var a=n();return f.getValueFromCookie(e,!1).then(function(b){return b?b.isoCode:a},function(){return a})},p=c.defer();return{getBrowserLanguageIsoCode:function(){return(navigator.language||navigator.userLanguage).split("-")[0]},setInitialized:function(a){a===!0?p.resolve():p.reject()},isInitialized:function(){return p.promise},getBrowserLocale:function(){return n()},getResolveLocale:function(){return c.when(o())},getLanguagesForSite:function(a){return k[a]?c.when(k[a]):l.get({siteUID:a}).then(function(b){return k[a]=b.languages,k[a]})},getToolingLanguages:function(){var a=c.defer();return m.get().then(function(b){a.resolve(b.languages)},function(){a.reject()}),a.promise},setSelectedToolingLanguage:function(a){f.putValueInCookie(e,a,!1),h.use(a.isoCode),g.publish(i,{isoCode:a.isoCode}),j.sendEvent(i)},registerSwitchLanguage:function(){g.subscribe(i,function(a,b){return h.use(b.isoCode)})}}}]),angular.module("loadConfigModule",["functionsModule","ngResource","sharedDataServiceModule","resourceLocationsModule"]).factory("LoadConfigManager",["$resource","hitch","copy","$q","convertToArray","sharedDataService","$log","SMARTEDIT_ROOT","SMARTEDIT_RESOURCE_URI_REGEXP","CONFIGURATION_URI",function(a,b,c,d,e,f,g,h,i,j){var k=function(){this.editorViewService=a(j),this.configuration=[],this._convertToObject=function(a){var b=a.reduce(function(a,b,c,d){try{a[b.key]=JSON.parse(b.value)}catch(e){g.error("item _key_ from configuration contains unparsable JSON data _value_ and was ignored".replace("_key_",b.key).replace("_value_",b.value))}return a},{});return b.domain=i.exec(this._getLocation())[1],b.smarteditroot=b.domain+"/"+h,b},this._getLocation=function(){return document.location.href}};return k.prototype._parse=function(a){var b=c(a);return Object.keys(b).forEach(function(a){try{b[a]=JSON.parse(b[a])}catch(c){}}),b},k.prototype.loadAsArray=function(){var a=d.defer();return this.editorViewService.query().$promise.then(b(this,function(b){a.resolve(this._parse(b))}),function(b){g.log("Fail to load the configurations."),a.reject()}),a.promise},k.prototype.loadAsObject=function(){var a=d.defer();return this.loadAsArray().then(b(this,function(b){var c=this._convertToObject(b);f.set("configuration",c),a.resolve(c)}),function(b){a.reject()}),a.promise},k}]).factory("loadConfigManagerService",["LoadConfigManager",function(a){return new a}]),angular.module("localizedElementModule",["tabsetModule"]).directive("localizedElement",function(){return{templateUrl:"web/common/services/localizedElement/localizedElementTemplate.html",restrict:"E",transclude:!1,replace:!1,scope:{model:"=",languages:"=",inputTemplate:"="},link:function(a,b,c){a.tabs=[],a.$watch("model",function(b){if(b){var d=a.inputTemplate?a.inputTemplate:c.inputTemplate;a.tabs.length=0,Array.prototype.push.apply(a.tabs,a.languages.map(function(a){return{id:a.isocode,title:a.isocode.toUpperCase()+(a.required?"*":""),templateUrl:d}}))}}),a.$watch("model.field.errors",function(b){if(a.model){var c=b?b.reduce(function(a,b){return a[b.language]=!0,a},{}):{};a.tabs.forEach(function(a){var b=c[a.id];a.hasErrors=void 0!==b?b:!1})}},!0)}}}),angular.module("modalServiceModule",["ui.bootstrap","translationServiceModule","functionsModule","coretemplates"]).constant("MODAL_BUTTON_ACTIONS",{NONE:"none",CLOSE:"close",DISMISS:"dismiss"}).constant("MODAL_BUTTON_STYLES",{DEFAULT:"default",PRIMARY:"primary",SECONDARY:"default"}).factory("modalService",["$modal","$controller","$rootScope","$templateCache","$translate","$log","MODAL_BUTTON_ACTIONS","MODAL_BUTTON_STYLES","merge","copy","hitch","generateIdentifier",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){var b,c=!0,d=null,f=[];if(!a.modalInstance)throw"no.modalInstance.injected";if(this.closeFunction=a.modalInstance.close,this.dismissFunction=a.modalInstance.dismiss,this._defaultButtonOptions={id:"button.id",label:"button.label",action:g.NONE,style:h.PRIMARY,disabled:!1,callback:null},this._createButton=function(a){var b=j(this._defaultButtonOptions);i(b,a||{}),e(b.label).then(function(a){b.label=a});var c=!1;for(var d in h)if(h[d]===b.style){c=!0;break}if(!c)throw"modalService.ModalManager._createButton.illegal.button.style";var f=!1;for(var k in g)if(g[k]===b.action){f=!0;break}if(!f)throw"modalService.ModalManager._createButton.illegal.button.action";return b},this.title="","string"==typeof a.title&&(this.title=a.title),"string"==typeof a.titleSuffix&&(this.titleSuffix=a.titleSuffix),a.buttons)for(var l=0;l<a.buttons.length;l++)f.push(this._createButton(a.buttons[l]));this._buttonPressed=function(a){var c=null;if(a.callback?c=a.callback():b&&(c=b(a.id)),a.action==g.NONE);else{var d=a.action==g.CLOSE?this.close:this.dismiss;c?c.then(k(this,function(a){d.call(this,a)})):d.call(this)}},this._handleDismissButton=function(){if(d){var a=d();a.then(k(this,function(a){this.dismiss(a)}))}else this.dismiss()},this._showDismissButton=function(){return c},this._hasButtons=function(){return f.length>0},this.addButton=function(a){var b=this._createButton(a);return f.push(b),b},this.getButtons=function(){return f},this.removeAllButtons=function(){f.splice(0,f.length)},this.removeButton=function(a){for(var b=f.length-1;b>=0;b--)f[b].id==a&&f.splice(b,1)},this.enableButton=function(a){for(var b=0;b<f.length;b++)f[b].id==a&&(f[b].disabled=!1)},this.disableButton=function(a){for(var b=0;b<f.length;b++)f[b].id==a&&(f[b].disabled=!0)},this.getButton=function(a){for(var b=0;b<f.length;b++)if(f[b].id==a)return f[b];return null},this.setShowHeaderDismiss=function(a){if("boolean"!=typeof a)throw"modalService.ModalManager.showDismissX.illegal.param";c=a},this.setDismissCallback=function(a){d=a},this.setButtonHandler=function(a){b=a}}function n(a){var c=this;return["$scope","$modalInstance",function(e,f){a.modalInstance=f,this._modalManager=new m(a),c._modalManager=this._modalManager,e.modalController=this,a.controller&&(angular.extend(this,b(a.controller,{$scope:e,modalManager:this._modalManager})),this.init&&this.init()),a.controllerAs&&(e[a.controllerAs]=this),a.templateInline?(this.templateUrl="modalTemplateKey"+btoa(l()),d.put(this.templateUrl,a.templateInline)):this.templateUrl=a.templateUrl,this.close=k(this,function(a){this._modalManager.close(a),d.remove(this.templateUrl)}),this.dismiss=k(this,function(a){this._modalManager.dismiss(a),d.remove(this.templateUrl)})}]}function o(){}return m.prototype.close=function(a){this.closeFunction&&this.closeFunction(a)},m.prototype.dismiss=function(a){this.dismissFunction&&this.dismissFunction(a)},o.prototype.open=function(b){var c=b||{};if(!c.templateUrl&&!c.templateInline)throw"modalService.configuration.errors.no.template.provided";if(c.templateUrl&&c.templateInline)throw"modalService.configuration.errors.2.templates.provided";return a.open({templateUrl:"web/common/services/modalTemplate.html",size:c.size||"lg",backdrop:"static",keyboard:!1,controller:n.call(this,c),controllerAs:"modalController",windowClass:c.cssClasses||null}).result},new o}]),angular.module("previewTicketInterceptorModule",["interceptorHelperModule","functionsModule"]).factory("previewTicketInterceptor",["parseQuery","interceptorHelper",function(a,b){var c=function(){var a;return a=window.frameElement?document.location.href:$("iframe").attr("src")},d=function(c){return b.handleRequest(c,function(){var b=this._getLocation();if(b){var d=a(b).cmsTicketId;d&&(c.headers=c.headers||{},c.headers["X-Preview-Ticket"]=d)}return c}.bind(this))},e={};return e.request=d.bind(e),e._getLocation=c.bind(e),e}]).config(["$httpProvider",function(a){a.interceptors.push("previewTicketInterceptor")}]),function(){var a="/storefront",b="CURRENT_CONTEXT_CATALOG",c="CURRENT_CONTEXT_CATALOG_VERSION",d="CURRENT_CONTEXT_SITE_ID";angular.module("resourceLocationsModule",[]).constant("CONTEXT_CATALOG",b).constant("CONTEXT_CATALOG_VERSION",c).constant("CONTEXT_SITE_ID",d).constant("SMARTEDIT_ROOT","smartedit").constant("SMARTEDIT_RESOURCE_URI_REGEXP",/^(.*)\/smartedit/).constant("CONFIGURATION_URI","/smartedit/configuration/:key").constant("CONFIGURATION_COLLECTION_URI","/smartedit/configuration").constant("CMSWEBSERVICES_RESOURCE_URI","/cmswebservices").constant("DEFAULT_AUTHENTICATION_ENTRY_POINT","/authorizationserver/oauth/token").constant("DEFAULT_AUTHENTICATION_CLIENT_ID","smartedit").constant("I18N_ROOT_RESOURCE_URI","/smarteditwebservices/v1/i18n").constant("I18N_RESOURCE_URI","/smarteditwebservices/v1/i18n/translations").constant("I18N_LANGUAGES_RESOURCE_URI","/smarteditwebservices/v1/i18n/languages").constant("LANGUAGE_RESOURCE_URI","/cmswebservices/v1/sites/:siteUID/languages").constant("CATALOG_VERSION_DETAILS_RESOURCE_URI","/cmswebservices/v1/sites/:siteUID/catalogversiondetails").constant("SITES_RESOURCE_URI","/cmswebservices/v1/sites").constant("LANDING_PAGE_PATH","/").constant("STOREFRONT_PATH",a+"/:siteId/:catalogId/:catalogVersion/").constant("STOREFRONT_PATH_WITH_PAGE_ID",a+"/:siteId/:catalogId/:catalogVersion/:pageId").constant("STORE_FRONT_CONTEXT",a).constant("CATALOGS_PATH","/cmswebservices/v1/catalogs/").constant("MEDIA_PATH","/cmswebservices/v1/media").constant("CMSWEBSERVICES_PATH","/cmswebservices").constant("PREVIEW_RESOURCE_URI","/previewwebservices/v1/preview").constant("ENUM_RESOURCE_URI","/cmswebservices/v1/enums").constant("USER_GLOBAL_PERMISSIONS_RESOURCE_URI","/permissionswebservices/v1/permissions/principals/:user/global").constant("SYNC_PATH","/cmswebservices/v1/catalogs/:catalog/versions/Staged/synchronizations/versions/Online").constant("MEDIA_RESOURCE_URI","/cmswebservices/v1/catalogs/"+b+"/versions/"+c+"/media").factory("resourceLocationToRegex",function(){return function(a){return new RegExp(a.replace(/\/:[^\/]*/g,"/.*"))}})}(),angular.module("restServiceFactoryModule",["ngResource","functionsModule"]).factory("restServiceFactory",["$resource","$q","hitch","copy","isBlank",function(a,b,c,d,e){var f={"x-requested-with":"Angular"},g=d(f);g.Pragma="no-cache";var h={getById:{method:"GET",params:{},isArray:!1,cache:!1,headers:g},get:{method:"GET",params:{},isArray:!1,cache:!1,headers:g},query:{method:"GET",params:{},isArray:!0,cache:!1,headers:g},page:{method:"GET",params:{},isArray:!1,cache:!1,headers:g,transformResponse:function(a,b){var c=e(a)?{}:angular.fromJson(a);return c.headers=b(),c}},update:{method:"PUT",cache:!1,headers:f},save:{method:"POST",cache:!1,headers:f},remove:{method:"DELETE",cache:!1,headers:f}},i={},j="identifier",k=null,l=function(a,e,f){void 0===f&&(f={});var g=b.defer(),h="object"==typeof f?Object.keys(f).reduce(c(this,function(a,b,c,d){return(new RegExp(":"+b+"/").test(this.uri)||new RegExp(":"+b+"$").test(this.uri)||new RegExp(":"+b+"&").test(this.uri))&&(a[b]=f[b]),a}),{}):{};if("getById"==a){var i=f;f={},f[this.IDENTIFIER]=i}if("update"==a||"remove"==a){if(!f[this.IDENTIFIER])return g.reject("no data was found under the "+this.IDENTIFIER+" field of object "+JSON.stringify(f)+", it is necessary for update and remove operations"),g.promise;h[this.IDENTIFIER]=f[this.IDENTIFIER],"remove"==a&&(f={})}return("get"==a||"getById"==a||"query"==a||"page"==a)&&(h=d(f),f={}),this[a](h,f).$promise.then(function(a){g.resolve(a)},function(a){g.reject(a)}),g.promise};return{IDENTIFIER:function(){return j},setDomain:function(a){k=a},getDomain:function(){return k},get:function(b,d){d||(d=j);var f=i[b];if("undefined"!=typeof f)return f;var g="";g=/^https?\:\/\//.test(b)||/^\//.test(b)?b:e(k)?b:k+"/"+b;var m=g;-1==m.indexOf(":"+d)&&(m+="/:"+d),f=a(m,{},h);var n={};return["save","remove"].concat(Object.keys(h)).forEach(function(a){n[a]=c(f,l,a,g)}),i[b]=n,f.uri=m,f.IDENTIFIER=d,n}}}]),function(){angular.module("tabsetModule",["ui.bootstrap","coretemplates","functionsModule","eventServiceModule","translationServiceModule"]).directive("yTabset",["$log","$q","systemEventService",function(a,b,c){return{restrict:"E",transclude:!1,templateUrl:"web/common/services/tabset/yTabsetTemplate.html",scope:{model:"=",tabsList:"=",tabControl:"=",numTabsDisplayed:"@"},link:function(a,b,c){var d=0;a.$watch(function(){return d!==a.tabsList.length},function(){a.initializeTabs(),d=a.tabsList.length}),a.initializeTabs=function(){if(a.tabsList&&a.tabsList.length>0){a.selectedTab=a.tabsList[0];for(var b in a.tabsList){var c=a.tabsList[b];c.active="0"===b,c.hasErrors=!1}}},a.selectTab=function(b){b&&(a.selectedTab.active=!1,a.selectedTab=b,a.selectedTab.active=!0)},a.dropDownHasErrors=function(){var b=a.tabsList.slice(a.numTabsDisplayed-1);return b.some(function(a){return a.hasErrors})},a.markTabsInError=function(b){a.resetTabErrors();var c,d=function(a){return a.id===c};for(var e in b){c=b[e];var f=a.tabsList.filter(d);f[0]&&(f[0].hasErrors=!0)}},a.resetTabErrors=function(){for(var b in a.tabsList)a.tabsList[b].hasErrors=!1},a.initializeTabs()}}}]).directive("yTab",["$log","$templateCache","$compile","$q","hitch","systemEventService",function(a,b,c,d,e,f){return{restrict:"E",transclude:!0,scope:{content:"=",model:"=",tabControl:"=",tabId:"@"},link:function(a,d,f){var g=b.get(a.content),h=c(g),i=h(a);d.append(i),a.tabControl&&e(this,a.tabControl(a))}}}])}(),angular.module("translationServiceModule",["pascalprecht.translate","i18nInterceptorModule"]).config(["$translateProvider","I18NAPIROOT","UNDEFINED_LOCALE",function(a,b,c){a.useStaticFilesLoader({prefix:"/"+b+"/",suffix:""}),a.preferredLanguage(c)}]),angular.module("wizardServiceModule",["ui.bootstrap","translationServiceModule","functionsModule","coretemplates","modalServiceModule"]).factory("wizardActions",["$log",function(a){function b(a){var b=angular.copy(c);return angular.merge(b,a)}var c={id:"wizard_action_id",i18n:"wizard_action_label",isMainAction:!0,enableIfCondition:function(){return!0},executeIfCondition:function(){return!0},execute:function(a){}};return{customAction:function(a){return b(a)},done:function(a){var c={id:"ACTION_DONE",i18n:"action.done",execute:function(a){a.close()}};return angular.merge(c,a),b(c)},next:function(a){var c={id:"ACTION_NEXT",i18n:"action.next",execute:function(a){this.nextStepId?a.goToStepWithId(this.nextStepId):a.goToStepWithIndex(this.nextStepIndex?this.nextStepIndex:a.getCurrentStepIndex()+1)}};return angular.merge(c,a),b(c)},navBarAction:function(a){if(!a.wizardService||null===a.destinationIndex)throw"Error initializating navBarAction, must provide the wizardService and destinationIndex fields";var c={id:"ACTION_GOTO",i18n:"action.goto",enableIfCondition:function(){return a.wizardService.getCurrentStepIndex()>=a.destinationIndex},execute:function(b){b.goToStepWithIndex(a.destinationIndex)}};return angular.merge(c,a),b(c)},back:function(a){var c={id:"ACTION_BACK",i18n:"action.back",isMainAction:!1,execute:function(a){if(this.backStepId)a.goToStepWithId(this.backStepId);else if(this.backStepIndex)a.goToStepWithIndex(this.backStepIndex);else{var b=a.getCurrentStepIndex();if(0>=b)throw"Failure to execute BACK action, no previous index exists!";a.goToStepWithIndex(b-1)}}};return angular.merge(c,a),b(c)},cancel:function(){return b({id:"ACTION_CANCEL",i18n:"action.cancel",isMainAction:!1,execute:function(a){a.cancel()}})}}}]).service("modalWizard",["modalService","modalWizardControllerFactory",function(a,b){this.validateConfig=function(a){if(!a.controller)throw"WizardService - initialization exception. No controller provided"},this.open=function(c){return this.validateConfig(c),a.open({templateUrl:"web/common/services/wizard/modalWizardTemplate.html",controller:b.fromConfig(c),controllerAs:"wizardController"})}}]).service("modalWizardControllerFactory",["$controller","wizardServiceFactory","wizardActions","MODAL_BUTTON_STYLES","$q",function(a,b,c,d,e){this.fromConfig=function(f){return["$scope","$rootScope","modalManager",function(g,h,i){function j(a){o._wizardContext.navActions=a.map(function(a,b){return c.navBarAction({stepIndex:b,wizardService:m,destinationIndex:b,i18n:a.name,isCurrentStep:function(){return this.stepIndex===m.getCurrentStepIndex()}})})}function k(a){o._wizardContext.templateOverride=a.templateOverride,a.cancelAction&&i.setDismissCallback(function(){return m.getActionExecutor().executeAction(a.cancelAction),e.reject()}),a.cancelAction&&i.setDismissCallback(function(){return m.getActionExecutor().executeAction(a.cancelAction),e.reject()}),j(a.steps)}function l(a){return{id:a.id,style:a.isMainAction?d.PRIMARY:d.SECONDARY,label:a.i18n,callback:function(){m.getActionExecutor().executeAction(a)}}}var m=b.newWizardService();if(angular.extend(this,a(f.controller,{$scope:g,wizardManager:m})),f.controllerAs&&(g[f.controllerAs]=this),this._wizardContext={},"function"!=typeof this.getWizardConfig)throw"The provided controller must provide a getWizardConfig() function.";var n=this.getWizardConfig(),o=this;this.executeAction=function(a){m.getActionExecutor().executeAction(a)},m.onLoadStep=function(a,b){i.title=b.title,o._wizardContext.templateUrl=b.templateUrl,i.removeAllButtons(),(b.actions||[]).forEach(function(a){"function"==typeof a.enableIfCondition&&h.$watch(a.enableIfCondition,function(b,c,d){b?i.enableButton(a.id):i.disableButton(a.id)}),i.addButton(l(a))}.bind(this))},m.onClose=function(a){i.close(a)},m.onCancel=function(){i.dismiss()},m.onStepsUpdated=function(a){j(a)},m.initialize(n),k(n)}]}}]).service("defaultWizardActionStrategy",["wizardActions",function(a){function b(a,b,c,d,e){return c&&(b.i18n=c),d&&(b.executeIfCondition=function(){return d(a.getCurrentStepId())}),e&&(b.enableIfCondition=function(){return e(a.getCurrentStepId())}),b}this.applyStrategy=function(c,d){var e=b(c,a.next(),d.nextLabel,d.onNext,d.isFormValid),f=b(c,a.done(),d.doneLabel,d.onDone,d.isFormValid),g=d.backLabel?{i18n:d.backLabel}:null,h=a.back(g);d.steps.forEach(function(a,b){a.actions=[],b>0&&a.actions.push(h),a.actions.push(b===d.steps.length-1?f:e)}),d.cancelAction=b(c,a.cancel(),d.cancelLabel,d.onCancel,null),d.templateOverride="web/common/services/wizard/modalWizardNavBarTemplate.html"}}]).service("wizardServiceFactory",["WizardService",function(a){this.newWizardService=function(){return new a}}]).factory("WizardService",["$q","defaultWizardActionStrategy","generateIdentifier",function(a,b,c){function d(a){if(!a.steps||a.steps.length<=0)throw"Invalid WizardService configuration - no steps provided";a.steps.forEach(function(a){if(!a.templateUrl)throw"Invalid WizardService configuration - Step missing a url: "+a})}function e(a){var b={};a.forEach(function(a){if(void 0===a.id&&null===a.id)a.id=c();else{if(b[a.id])throw"Invalid (Duplicate) step id: "+a.id;b[a.id]=a.id}})}function f(){this.onLoadStep=function(a){},this.onClose=function(){},this.onCancel=function(){},this.onStepsUpdated=function(){}}return f.prototype.initialize=function(a){d(a),this._actionStrategy=a.actionStrategy||b,this._actionStrategy.applyStrategy(this,a),this._currentIndex=0,this._conf=angular.copy(a),this._steps=this._conf.steps,this._getResult=a.resultFn,e(this._steps),this.goToStepWithIndex(0)},f.prototype.goToStepWithIndex=function(a){var b=this.getStepWithIndex(a);b&&(this.onLoadStep(a,b),this._currentIndex=a)},f.prototype.getActionExecutor=function(){return this},f.prototype.goToStepWithId=function(a){this.goToStepWithIndex(this.getStepIndexFromId(a))},f.prototype.addStep=function(a,b){0===a.id||a.id||(a.id=c()),b||(b=0),this._currentIndex>=b&&this._currentIndex++,this._steps.splice(b,0,a),e(this._steps),this._actionStrategy.applyStrategy(this,this._conf),this.onStepsUpdated(this._steps)},f.prototype.removeStepById=function(a){this.removeStepByIndex(this.getStepIndexFromId(a))},f.prototype.removeStepByIndex=function(a){a>=0&&a<this.getStepsCount()&&(this._steps.splice(a,1),a===this._currentIndex&&this.goToStepWithIndex(0),this._actionStrategy.applyStrategy(this,this._conf),this.onStepsUpdated(this._steps))},f.prototype.close=function(){var a;"function"==typeof this._getResult&&(a=this._getResult()),this.onClose(a)},f.prototype.cancel=function(){this.onCancel()},f.prototype.executeAction=function(b){return b.executeIfCondition?void a.when(b.executeIfCondition()).then(function(c){return a.when(b.execute(this))}.bind(this)):a.when(b.execute(this))},f.prototype.getSteps=function(){return this._steps},f.prototype.getStepIndexFromId=function(a){var b=this._steps.findIndex(function(b){return b.id===a});return b},f.prototype.containsStep=function(a){return this.getStepIndexFromId(a)>=0},f.prototype.getCurrentStepId=function(){return this.getCurrentStep().id},f.prototype.getCurrentStepIndex=function(){return this._currentIndex},f.prototype.getCurrentStep=function(){return this.getStepWithIndex(this._currentIndex)},f.prototype.getStepsCount=function(){return this._steps.length},f.prototype.getStepWithId=function(a){var b=this.getStepIndexFromId(a);return b>=0?this.getStepWithIndex(b):void 0},f.prototype.getStepWithIndex=function(a){if(a>=0&&a<this.getStepsCount())return this._steps[a];throw"wizardService.getStepForIndex - Index out of bounds: "+a},f}]),angular.module("coretemplates",[]).run(["$templateCache",function(a){"use strict";a.put("web/common/core/services/loginDialog.html",'<div data-ng-cloak data-ng-class="{\'smartEditLogin\':modalController.initialized!==true, \'smartEditLoginModal\':modalController.initialized!==false, \'vertical-center\':true}">\n    <div class="ySELoginContent">\n        <div class="row text-center ySELogo">\n            <img src="static-resources/images/SmartEditLogo.png">\n        </div>\n        <form data-ng-submit="modalController.submit(loginDialogForm)" class="signinForm" name=\'loginDialogForm\' novalidate>\n            <div class="row ySELoginAuthMessage" data-ng-show="modalController.initialized!==false">\n                <div data-ng-class="{\'col-xs-8 col-xs-push-2 text-center\':true}" data-translate="logindialogform.reauth.message1"></div>\n                <div data-ng-class="{\'col-xs-8 col-xs-push-2 text-center\':true}" data-translate="logindialogform.reauth.message2"></div>\n            </div>\n\n            <div class="row form-group hyLoginError" data-ng-if="loginDialogForm.errorMessage && loginDialogForm.posted && (loginDialogForm.$invalid || loginDialogForm.failed)">\n                <div data-ng-class="{\'col-xs-12 col-sm-8 col-md-6 col-sm-push-2 col-md-push-3 \':modalController.initialized!==true, \'col-xs-8 col-xs-push-2\':modalController.initialized!==false, \'alert alert-error-bluebg errorDiv\':true}" id="invalidError"> {{loginDialogForm.errorMessage | translate}}</div>\n            </div>\n\n            <div class="row form-group ">\n                <input data-ng-class="{\'col-xs-12 col-sm-8 col-md-6 col-sm-push-2 col-md-push-3 \':modalController.initialized!==true, \'col-xs-8 col-xs-push-2\':modalController.initialized!==false}" type="text" id="username_{{modalController.authURIKey}}" name="username" placeholder="{{ \'authentication.form.input.username\' | translate}}" autofocus data-ng-model="modalController.auth.username" required/>\n            </div>\n            <div class="row form-group">\n                <input data-ng-class="{\'col-xs-12 col-sm-8 col-md-6 col-sm-push-2 col-md-push-3 \':modalController.initialized!==true, \'col-xs-8 col-xs-push-2\':modalController.initialized!==false}" type="password" id=\'password_{{modalController.authURIKey}}\' name=\'password\' placeholder="{{ \'authentication.form.input.password\' | translate}}" data-ng-model="modalController.auth.password" required/>\n            </div>\n\n            <div class="row form-group">\n                <language-selector data-ng-class="{\'col-xs-12 col-sm-8 col-md-6 col-sm-push-2 col-md-push-3 \':modalController.initialized!==true, \'col-xs-8 col-xs-push-2\':modalController.initialized!==false}"></language-selector>\n            </div>\n\n            <div class="row form-group top-buffer2">\n                <button data-ng-class="{\'btn btn-lg btn-primary\':true, \'col-xs-12 col-sm-8 col-md-6 col-sm-push-2 col-md-push-3 \':modalController.initialized!==true, \'col-xs-8 col-xs-push-2\':modalController.initialized!==false, \'text-uppercase\':true}" id="submit_{{modalController.authURIKey}}" name="submit" type="submit" data-translate="authentication.form.button.submit"></button>\n            </div>\n\n        </form>\n    </div>\n</div>'),a.put("web/common/core/services/waitDialog.html",'<div class="row">\n    <div class="col-xs-8">\n        <span data-translate="wait.dialog.message"></span>\n    </div>\n    <div class="col-xs-4">\n        <div class="spinner pull-right">\n            <div class="spinner-container spinner-container1">\n                <div class="spinner-circle1"></div>\n                <div class="spinner-circle2"></div>\n                <div class="spinner-circle3"></div>\n                <div class="circle4"></div>\n            </div>\n            <div class="spinner-container spinner-container2">\n                <div class="spinner-circle1"></div>\n                <div class="spinner-circle2"></div>\n                <div class="spinner-circle3"></div>\n                <div class="circle4"></div>\n            </div>\n            <div class="spinner-container spinner-container3">\n                <div class="spinner-circle1"></div>\n                <div class="spinner-circle2"></div>\n                <div class="spinner-circle3"></div>\n                <div class="circle4"></div>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("web/common/services/alerts/alertsTemplate.html",'<div class="row-fluid" data-ng-if="alerts!=null &amp;&amp; alerts.length>0">\n    <div data-ng-repeat="alert in alerts" class="ng-class: {\'col-xs-12\':true, \'alert\':true, \'alert-danger\':(alert.successful==false),\'alert-success\':(alert.successful==true)};">\n        <button type="button" class="close" data-ng-hide="alert.closeable==false" data-ng-click="dismissAlert($index);">&times;</button>\n        <span id="alertMsg">{{alert.message | translate}}</span>\n    </div>\n</div>'),a.put("web/common/services/authorization/hasOperationPermissionTemplate.html",'<div>\n    <div ng-if="ctrl.isPermissionGranted">\n        <div ng-transclude></div>\n    </div>\n</div>'),a.put("web/common/services/genericEditor/dateTimePicker/dateTimePickerTemplate.html",'<div class="input-group date ySEDateField" data-ng-class="{\'ySEDataDisabled\':!isEditable}" id="date-time-picker-{{name}}">\n    <input type=\'text\' class="form-control" placeholder="{{ placeholderText | translate}}" ng-disabled="!isEditable" name="{{name}}" data-ng-model="model" />\n    <span class="input-group-addon" data-ng-show="isEditable">\n        <span class="glyphicon glyphicon-calendar"></span>\n    </span>\n</div>'),a.put("web/common/services/genericEditor/errors/seGenericEditorFieldErrorsTemplate.html",'<div data-ng-if="ctrl.getFilteredErrors().length > 0">\n    <span data-ng-repeat="error in ctrl.getFilteredErrors()" class="error-input help-block">\n        {{error | translate}}\n    </span>\n</div>'),a.put("web/common/services/genericEditor/genericEditorFieldTemplate.html",'<div data-ng-switch="field.cmsStructureType" validation-id="{{field.qualifier}}" data-ng-cloack class="ySEField">\n\n    <div data-ng-if="field.prefixText" class="ySEText ySEFieldPrefix">{{field.prefixText | translate}}</div>\n    <div data-ng-switch-when="Boolean">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/booleanTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="ShortString">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/shortStringTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="LongString">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/longStringTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="RichText">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/richTextTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="LinkToggle">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/linkToggleTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="Media">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/mediaTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="MediaContainer">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/mediaContainerTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="Dropdown">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/dropdownTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="Date">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/dateTimePickerWrapperTemplate.html\'"></div>\n    </div>\n    <div data-ng-switch-when="Enum">\n        <div data-ng-include="\'web/common/services/genericEditor/templates/enumTemplate.html\'"></div>\n    </div>\n    <se-generic-editor-field-errors data-field="field" data-qualifier="qualifier"></se-generic-editor-field-errors>\n    <div data-ng-if="field.postfixText" class="ySEText ySEFieldPostfix">{{field.postfixText | translate}}</div>\n</div>'),a.put("web/common/services/genericEditor/genericEditorFieldWrapperTemplate.html",'<generic-editor-field data-editor="model.editor" data-field="model.field" data-model="model.editor.component[model.field.qualifier]" data-qualifier="tabId" />'),a.put("web/common/services/genericEditor/genericEditorTemplate.html",'<div data-ng-cloak class="ySEGenericEditor">\n    <div>\n        <alerts-box alerts="editor.alerts" />\n    </div>\n    <form name="componentForm" novalidate data-ng-submit="editor.submit(componentForm)" class="col-xs-12 no-enter-submit">\n        <div class="modal-header" data-ng-show="modalHeaderTitle">\n            <h4 class="modal-title">{{modalHeaderTitle| translate}}</h4>\n        </div>\n        <div class="ySErow" data-ng-repeat="holder in editor.holders;" data-ng-switch="field.cmsStructureType">\n            <div class="">\n                <label id="{{holder.field.qualifier}}-label">{{holder.field.i18nKey | lowercase | translate}}\n                    <span data-ng-if="holder.field.required">*</span>\n                </label>\n\n            </div>\n            <div class="" id="{{holder.field.qualifier}}">\n                <localized-element data-ng-if="holder.field.localized" data-model="holder" data-languages="editor.languages" data-input-template="web/common/services/genericEditor/genericEditorFieldWrapperTemplate.html"></localized-element>\n                <generic-editor-field data-ng-if="!holder.field.localized" data-editor="holder.editor" data-field="holder.field" data-model="editor.component" data-qualifier="holder.field.qualifier" />\n            </div>\n        </div>\n        <div class="ySEBtnRow modal-footer" data-ng-show="(editor.alwaysShowReset || (editor.showReset===true && editor.isDirty())) || (editor.alwaysShowSubmit || (editor.showSubmit===true && editor.isDirty() && componentForm.$valid))">\n            <button type="button" id="cancel" class="btn btn-subordinate" data-ng-if="editor.alwaysShowReset || (editor.showReset===true && editor.isDirty())" data-ng-click="reset()">{{cancelButtonText| translate}}</button>\n            <button type="submit" id="submit" class="btn btn-primary" data-ng-if="editor.alwaysShowSubmit || (editor.showSubmit===true && editor.isDirty() && componentForm.$valid)" data-ng-disabled="!(editor.isDirty() && componentForm.$valid)">{{submitButtonText| translate}}</button>\n        </div>\n    </form>\n</div>'),
a.put("web/common/services/genericEditor/media/components/errorsList/seErrorsListTemplate.html",'<div class="field-errors">\n    <div data-ng-repeat="error in ctrl.getSubjectErrors()">{{error.message}}</div>\n</div>'),a.put("web/common/services/genericEditor/media/components/fileSelector/seFileSelectorTemplate.html",'<div class="seFileSelector {{::ctrl.customClass}}">\n    <label class=" btn__fileSelector" data-ng-show="!ctrl.disabled">\n        <img class="img-upload" data-ng-src="{{::ctrl.uploadIcon}}" />\n        <p class="label label__fileUpload label__fileUpload-link">{{::ctrl.labelI18nKey | translate}}</p>\n        <input type="file" class="hide" accept="{{ctrl.buildAcceptedFileTypesList()}}">\n    </label>\n    <label class=" btn__fileSelector" data-ng-show="ctrl.disabled">\n        <img class="img-upload" data-ng-src="{{::ctrl.uploadIcon}}" />\n        <p class="label label__fileUpload">{{::ctrl.labelI18nKey | translate}}</p>\n    </label>\n</div>'),a.put("web/common/services/genericEditor/media/components/mediaAdvancedProperties/seMediaAdvancedPropertiesCondensedTemplate.html",'<a popover-template="ctrl.contentUrl" popover-trigger="focus" tabindex="0" class="media-container-advanced-information">\n    <img class="media-advanced-information--image" data-ng-src="{{ctrl.advInfoIcon}}" alt="{{ctrl.i18nKeys.INFORMATION | translate}}" title="{{ctrl.i18nKeys.INFORMATION | translate}}">\n    <p class="media-advanced-information--p">{{ctrl.i18nKeys.INFORMATION | translate}}</p>\n</a>'),a.put("web/common/services/genericEditor/media/components/mediaAdvancedProperties/seMediaAdvancedPropertiesContentTemplate.html",'<div class="se-adv-media-info">\n    <span class="se-adv-media-info--data advanced-information-description">\n        {{ctrl.i18nKeys.DESCRIPTION | translate}}: {{ctrl.description}}\n    </span>\n    <span class="se-adv-media-info--data advanced-information-code">\n        {{ctrl.i18nKeys.CODE | translate}}: {{ctrl.code}}\n    </span>\n    <span class="se-adv-media-info--data advanced-information-alt-text">\n        {{ctrl.i18nKeys.ALT_TEXT | translate}}: {{ctrl.altText}}\n    </span>\n</div>'),a.put("web/common/services/genericEditor/media/components/mediaAdvancedProperties/seMediaAdvancedPropertiesTemplate.html",'<a popover-template="ctrl.contentUrl" data-ng-click="$event.stopPropagation()" popover-append-to-body="true" popover-placement="left" popover-trigger="click" tabindex="0" class="media-advanced-information btn btn-subordinate">\n    {{ctrl.i18nKeys.INFORMATION | translate}}\n    <img class="media-selector--preview--icon" data-ng-src="{{ctrl.advInfoIcon}}">\n</a>'),a.put("web/common/services/genericEditor/media/components/mediaContainerField/seMediaContainerFieldTemplate.html",'<div class="se-media-container-field">\n    <div class="row">\n        <se-media-format class="col-xs-3 se-media-container-cell" ng-repeat="option in ctrl.field.options" data-media-code="ctrl.model[ctrl.qualifier][option.value]" data-is-under-edit="ctrl.isFormatUnderEdit(option.value)" data-media-format="option.value" data-errors="ctrl.field.errors" data-on-file-select="ctrl.fileSelected(files, option.value)" data-on-delete="ctrl.imageDeleted(option.value)">\n        </se-media-format>\n\n    </div>\n    <se-media-upload-form data-ng-if="ctrl.image.file" data-image="ctrl.image" data-field="ctrl.field" data-on-upload-callback="ctrl.imageUploaded(code)" data-on-cancel-callback="ctrl.resetImage()" data-on-select-callback="ctrl.fileSelected(files)">\n    </se-media-upload-form>\n    <se-errors-list data-errors="ctrl.fileErrors"></se-errors-list>\n</div>'),a.put("web/common/services/genericEditor/media/components/mediaField/seMediaFieldTemplate.html",'<div class="media-field">\n    <se-media-selector ng-if="!ctrl.image.file" data-field="ctrl.field" data-model="ctrl.model" data-editor="ctrl.editor" data-qualifier="ctrl.qualifier" data-replace-icon="ctrl.replaceIconUrl" data-delete-icon="ctrl.deleteIconUrl" data-adv-info-icon="ctrl.advInfoIconUrl" data-image-root="ctrl.imageRoot">\n    </se-media-selector>\n    <se-file-selector ng-if="!ctrl.image.file" data-label-i18n-key="ctrl.i18nKeys.UPLOAD_IMAGE_TO_LIBRARY" data-accepted-file-types="ctrl.acceptedFileTypes" data-on-file-select="ctrl.fileSelected(files)" data-upload-icon="ctrl.uploadIconUrl" data-image-root="ctrl.imageRoot"></se-file-selector>\n    <se-media-upload-form ng-if="ctrl.image.file" data-image="ctrl.image" data-field="ctrl.field" data-on-upload-callback="ctrl.imageUploaded(code)" data-on-cancel-callback="ctrl.resetImage()" data-on-select-callback="ctrl.fileSelected(files)"></se-media-upload-form>\n    <se-errors-list ng-if="ctrl.fileErrors.length > 0" data-errors="ctrl.fileErrors"></se-errors-list>\n</div>'),a.put("web/common/services/genericEditor/media/components/mediaFormat/seMediaFormatTemplate.html",'<div class="{{ctrl.mediaFormat}} se-media-format">\n    <div class="se-media-format-screentype">\n        {{ctrl.mediaFormat}}\n    </div>\n    <!-- when the image is already uploaded -->\n    <div class="media-present" data-ng-if="ctrl.isMediaCodeValid() && !ctrl.isUnderEdit">\n        <div class="media-present-preview">\n            <se-media-preview data-image-url="ctrl.media.url"></se-media-preview>\n            <div class="se-media-preview-image-wrapper  se-media-format-image-wrapper">\n                <img class="thumbnail thumbnail--image-preview" data-ng-src="{{ctrl.media.url}}">\n            </div>\n            <span class="media-preview-code se-media-format--code">{{ctrl.media.code}}</span>\n\n        </div>\n\n        <se-media-advanced-properties-condensed data-adv-info-icon="ctrl.advInfoIconUrl" data-code="ctrl.media.code" data-description="ctrl.media.description" data-alt-text="ctrl.media.altText"></se-media-advanced-properties-condensed>\n\n        <se-file-selector data-custom-class=" \'media-format-present-replace\' " data-label-i18n-key="ctrl.i18nKeys.REPLACE " data-accepted-file-types="ctrl.acceptedFileTypes " data-on-file-select="ctrl.onFileSelect({files: files, format: ctrl.mediaFormat}) " data-upload-icon="ctrl.replaceIconUrl " data-image-root="ctrl.imageRoot "></se-file-selector>\n\n        <button class="media-selector--preview__left remove-image btn btn-subordinate " data-ng-click="ctrl.onDelete({format: ctrl.mediaFormat}) ">\n            <img class="media-selector--preview--icon " data-ng-src="{{ctrl.deleteIconUrl}} " alt="{{ctrl.i18nKeys.REMOVE | translate}} " />\n            <p class="media-selector--preview__left--p media-selector--preview__left--p__error ">{{ctrl.i18nKeys.REMOVE | translate}}</p>\n        </button>\n    </div>\n\n    <!-- when the image is not yet uploaded -->\n    <div class="media-absent " data-ng-if="!ctrl.isMediaCodeValid() && !ctrl.isUnderEdit ">\n        <se-file-selector data-label-i18n-key="ctrl.i18nKeys.UPLOAD " data-accepted-file-types="ctrl.acceptedFileTypes " data-on-file-select="ctrl.onFileSelect({files: files, format: ctrl.mediaFormat}) " data-upload-icon="ctrl.uploadIconUrl " data-image-root="ctrl.imageRoot "></se-file-selector>\n    </div>\n\n    <!-- when the image is under edit -->\n    <div data-ng-if="ctrl.isUnderEdit " class="media-under-edit-parent">\n        <div class="media-is-under-edit ">\n            <se-file-selector data-label-i18n-key="ctrl.i18nKeys.UPLOAD " data-disabled="true" data-custom-class=" \'file-selector-disabled\' " data-accepted-file-types="ctrl.acceptedFileTypes " data-on-file-select="ctrl.onFileSelect({files: files, format: ctrl.mediaFormat}) " data-upload-icon="ctrl.uploadIconDisabledUrl " data-image-root="ctrl.imageRoot "></se-file-selector>\n        </div>\n        <span class="media-preview-under-edit ">{{ctrl.i18nKeys.UNDER_EDIT | translate}}</span>\n    </div>\n\n    <div class="error-input help-block " data-ng-repeat="error in ctrl.getErrors() ">\n        {{error}}\n    </div>\n</div>'),a.put("web/common/services/genericEditor/media/components/mediaPreview/seMediaPreviewContentTemplate.html",'<img class="preview-image" data-ng-src="{{ctrl.imageUrl}}" />'),a.put("web/common/services/genericEditor/media/components/mediaPreview/seMediaPreviewTemplate.html",'<a popover-template="ctrl.contentUrl" data-ng-click="$event.stopPropagation()" popover-append-to-body="true" popover-placement="right" popover-trigger="click" tabindex="1" class="media-preview">\n    <span class="hyicon hyicon-search media-preview-icon"></span>\n</a>'),a.put("web/common/services/genericEditor/media/components/mediaSelector/seMediaSelectorTemplate.html",'<div class="media-selector">\n    <ui-select id="{{ctrl.field.qualifier}}-selector" ng-model="ctrl.model[ctrl.qualifier]" theme="select2" data-ng-disabled="!ctrl.field.editable" reset-search-input="false" title="" style="width:100%">\n        <ui-select-match placeholder="{{\'genericeditor.dropdown.placeholder\' | translate}}" allow-clear="true">\n            <div class="media-selector--preview">\n                <div class="row">\n                    <span class="col-xs-6">\n                        <se-media-preview data-image-url="ctrl.field.options[ctrl.qualifier][0].url"></se-media-preview>{{ctrl.imagePreviewUrl}}\n                        <div class="se-media-preview-image-wrapper">\n                            <img class="thumbnail thumbnail--image-preview" data-ng-src={{$select.selected.url}}>\n                        </div>\n                        <span class="media-preview-code">{{$select.selected.code}}</span>\n                    </span>\n                    <span class="col-xs-6 media-selector--preview--2">\n                        <se-media-advanced-properties class="media-selector--preview__right" data-code="ctrl.field.options[ctrl.qualifier][0].code" data-description="ctrl.field.options[ctrl.qualifier][0].description" data-alt-text="ctrl.field.options[ctrl.qualifier][0].altText" data-adv-info-icon="ctrl.advInfoIcon"></se-media-advanced-properties>\n\n                        <button class="media-selector--preview__right replace-image btn btn-subordinate" data-ng-click="ctrl.onDelete($select, $event)">\n                            <p class="media-selector--preview__right--p">{{\'upload.image.replace\' | translate}}</p>\n                            <img class="media-selector--preview--icon" data-ng-src="{{ctrl.replaceIcon}}" />\n                        </button>\n                        <button class="media-selector--preview__right remove-image btn btn-subordinate" data-ng-click="ctrl.onDelete($select, $event)">\n                            <p class="media-selector--preview__right--p">{{\'media.format.remove\' | translate}}</p>\n                            <img class="media-selector--preview--icon" data-ng-src="{{ctrl.deleteIcon}}" />\n                        </button>\n                    </span>\n                </div>\n            </div>\n        </ui-select-match>\n        <ui-select-choices id="{{ctrl.field.qualifier}}-list" repeat="option.code as option in ctrl.field.options[ctrl.qualifier]" refresh="ctrl.editor.refreshOptions(ctrl.field, ctrl.qualifier, $select.search)" value="{{$select.selected.code}}" refresh-delay="0" position="down">\n            <small>\n                <img class="thumbnail" data-ng-src={{option.url}}>\n                <span>{{option.code}}</span>\n            </small>\n        </ui-select-choices>\n    </ui-select>\n</div>'),a.put("web/common/services/genericEditor/media/components/mediaUploadForm/seMediaUploadFieldTemplate.html",'<div class="form-control se-mu--fileinfo--wrapper">\n    <div class="row">\n        <div class="se-mu--fileinfo--wrapper-col1 col-xs-10">\n            <input type="text" data-ng-class="{\'se-mu--fileinfo--field--input\': true, \'se-mu--fileinfo--field__error\': ctrl.error}" class="se-mu--fileinfo--field--input" name="{{ctrl.field}}" data-ng-model="ctrl.model[ctrl.field]">\n        </div>\n\n        <div class="se-mu--fileinfo--wrapper-col2 col-xs-2">\n            <img src="static-resources/images/edit_icon.png" class="se-mu--fileinfo--field--icon " data-ng-if="ctrl.displayImage && !ctrl.error" />\n            <img src="static-resources/images/edit_icon_error.png" class="se-mu--fileinfo--field--icon__error " data-ng-if="ctrl.error" />\n        </div>\n    </div>\n</div>'),a.put("web/common/services/genericEditor/media/components/mediaUploadForm/seMediaUploadFormTemplate.html",'<div class="se-media-upload-form">\n\n    <div class="container-fluid se-media-upload-form--toolbar">\n        <div class="navbar-left se-media-upload-form--toolbar--title">\n            <h4 class="se-media-upload-form--toolbar--title--h4">{{ctrl.i18nKeys.UPLOAD_IMAGE_TO_LIBRARY | translate}}</h4>\n        </div>\n        <div class="navbar-right se-media-upload-form--toolbar--buttons">\n            <div class="y-toolbar">\n                <div class="y-toolbar-cell">\n                    <button class="btn btn-subordinate btn-lg navbar-btn se-media-upload-btn__cancel" type="button" data-ng-click="ctrl.onCancel()">{{ctrl.i18nKeys.UPLOAD_IMAGE_CANCEL | translate}}</button>\n                </div>\n                <div class="y-toolbar-cell">\n                    <button class="btn btn-default btn-lg navbar-btn se-media-upload-btn__submit" type="button" data-ng-click="ctrl.onMediaUploadSubmit()">{{ctrl.i18nKeys.UPLOAD_IMAGE_SUBMIT | translate}}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="container-fluid se-media-upload--filename">\n        <div class="row">\n            <div class="se-media-upload--filename-col1 col-xs-10">\n                <img src="static-resources/images/image_placeholder.png">\n                <div class="se-media-upload--fn--name">{{ctrl.getTruncatedName()}}</div>\n            </div>\n            <div class="se-media-upload--filename-col2 col-xs-2">\n                <se-file-selector data-label-i18n-key="ctrl.i18nKeys.UPLOAD_IMAGE_REPLACE" data-accepted-file-types="ctrl.acceptedFileTypes" data-on-file-select="ctrl.onSelectCallback({files: files})"></se-file-selector>\n\n            </div>\n        </div>\n    </div>\n    <form>\n        <div class="se-media-upload--fileinfo">\n            <div class="se-media-upload--fileinfo--field form-group">\n                <label name="label-description" data-ng-class="{ \'se-media-upload-has-error\': ctrl.hasError(\'description\'), \'se-media-upload--fileinfo--label\': true }">{{ctrl.i18nKeys.DESCRIPTION | translate}}</label>\n                <se-media-upload-field data-field="\'description\'" data-model="ctrl.imageParameters"></se-media-upload-field>\n                <span class="upload-field-error upload-field-error-description" data-ng-repeat="error in ctrl.getErrorsForField(\'description\')">{{error}}</span>\n            </div>\n\n            <div class="se-media-upload--fileinfo--field form-group">\n                <label name="label-code" data-ng-class="{ \'se-media-upload-has-error\': ctrl.hasError(\'code\')}">{{ctrl.i18nKeys.CODE | translate}}*</label>\n                <se-media-upload-field data-error="ctrl.hasError(\'code\')" data-field="\'code\'" data-model="ctrl.imageParameters"></se-media-upload-field>\n                <span class="upload-field-error upload-field-error-code" data-ng-repeat="error in ctrl.getErrorsForField(\'code\')">{{error}}</span>\n            </div>\n\n            <div class="se-media-upload--fileinfo--field form-group">\n                <label name="label-alt-text" data-ng-class="{ \'se-media-upload-has-error\': ctrl.hasError(\'altText\') }">{{ctrl.i18nKeys.ALT_TEXT | translate}}</label>\n                <se-media-upload-field data-field="\'altText\'" data-model="ctrl.imageParameters"></se-media-upload-field>\n                <span class="upload-field-error upload-field-error-alt-text " data-ng-repeat="error in ctrl.getErrorsForField(\'altText\')">{{error}}</span>\n            </div>\n        </div>\n\n    </form>\n    <span data-ng-if="ctrl.isUploading" class="upload-image-in-progress">\n        <!--<img src="static-resources/images/spinner.png"> {{ctrl.i18nKeys.UPLOADING | translate}}-->\n    </span>\n</div>'),a.put("web/common/services/genericEditor/richText/seRichTextFieldTemplate.html",'<textarea class="ng-class:{\'col-xs-12\':true, \'has-error\':ctrl.field.errors.length>0}" name="{{ctrl.field.qualifier}}-{{ctrl.qualifier}}" data-ng-disabled="!ctrl.field.editable" data-ng-model="ctrl.model[ctrl.qualifier]" data-ng-change="ctrl.reassignUserCheck()"></textarea>\n<div data-ng-if="ctrl.requiresUserCheck()">\n    <input type="checkbox" data-ng-model="ctrl.field.isUserChecked" />\n    <span class="ng-class:{\'warning-check-msg\':true, \'not-checked\':ctrl.editor.hasFrontEndValidationErrors && !ctrl.field.isCheckedByUser}" data-translate="editor.richtext.check">{{\'editor.richtext.check\' | translate}}</span>\n</div>'),a.put("web/common/services/genericEditor/templates/booleanTemplate.html",'<div class="ySEBooleanField">\n    <span class="y-toggle y-toggle-lg">\n        <input type="checkbox" id="{{field.qualifier}}-checkbox" class="ySEBooleanField__input" placeholder="{{field.tooltip| translate}}" name="{{field.qualifier}}" data-ng-disabled="!field.editable" data-ng-model="model[qualifier]" />\n        <label class="ySEBooleanField__label" for="{{field.qualifier}}-checkbox"></label>\n        <p data-ng-if="field.labelText && !model[qualifier]" class="ySEBooleanField__text">{{field.labelText| translate}}</p>\n    </span>\n</div>'),a.put("web/common/services/genericEditor/templates/dateTimePickerWrapperTemplate.html",'<date-time-picker data-name="field.qualifier" data-model="model[qualifier]" data-is-editable="field.editable"></date-time-picker>'),a.put("web/common/services/genericEditor/templates/dropdownTemplate.html",'<ui-select id="{{field.qualifier}}-selector" ng-model="model[qualifier]" theme="select2" title="" style="width:100%" search-enabled="false" data-dropdown-auto-width="false">\n    <ui-select-match placeholder="Select an option">\n        <span ng-bind="$select.selected.label"></span>\n    </ui-select-match>\n    <ui-select-choices id="{{field.qualifier}}-list" repeat="option in field.options" position="down" value="{{$selected.selected}}">\n        <span ng-bind="option.label"></span>\n    </ui-select-choices>\n</ui-select>'),a.put("web/common/services/genericEditor/templates/enumTemplate.html",'<ui-select id="{{field.qualifier}}-selector" ng-model="model[qualifier]" theme="select2" data-ng-disabled="!field.editable" reset-search-input="false" title="" style="width:100%">\n    <ui-select-match placeholder="{{\'genericeditor.dropdown.placeholder\' | translate}}" allow-clear="true">\n        <span id="enum-{{field.qualifier}}">{{$select.selected.label}}</span>\n        <br/>\n    </ui-select-match>\n    <ui-select-choices id="{{field.qualifier}}-list" repeat="option.code as option in field.options[qualifier]" refresh="editor.refreshOptions(field, qualifier, $select.search)" value="{{$select.selected.code}}" refresh-delay="0" position="down">\n        <small>\n            <span>{{option.label}}</span>\n        </small>\n    </ui-select-choices>\n</ui-select>'),a.put("web/common/services/genericEditor/templates/errorMessageTemplate.html",'<span data-ng-if="field.errors" data-ng-repeat="error in field.errors | filter:{language:qualifier}" id=\'validation-error-{{field.qualifier}}-{{qualifier}}-{{$index}}\' class="error-input help-block">\n    {{error.message|translate}}\n</span>'),a.put("web/common/services/genericEditor/templates/linkToggleTemplate.html",'<div>\n    <input type="radio" name="external" id="external" data-ng-model="model.external" data-ng-value="true" data-ng-change="editor.emptyUrlLink()" />\n    <label>{{field.externalI18nKey| translate}}</label>\n    <input type="radio" name="external" id="internal" data-ng-model="model.external" data-ng-value="false" data-ng-change="editor.emptyUrlLink()" />\n    <label>{{field.internalI18nKey| translate}}</label>\n    <br/>\n    <input type="text" id="urlLink" name="urlLink" data-ng-model="model.urlLink" class="ng-class:{\'col-xs-12\':true, \'form-control\':true, \'has-error\':field.errors.length>0} " />\n</div>'),a.put("web/common/services/genericEditor/templates/longStringTemplate.html",'<textarea class="ng-class:{\'col-xs-12\':true, \'has-error\':field.errors.length>0}" placeholder="{{field.tooltip| translate}}" name="{{field.qualifier}}" data-ng-disabled="!field.editable" data-ng-model="model[qualifier]" data-ng-maxlength="1000"></textarea>'),a.put("web/common/services/genericEditor/templates/mediaContainerTemplate.html",'<se-media-container-field data-field="field" data-model="model" data-editor="editor" data-qualifier="qualifier"></se-media-container-field>'),a.put("web/common/services/genericEditor/templates/mediaTemplate.html",'<se-media-field data-field="field" data-model="model" data-editor="editor" data-qualifier="qualifier"></se-media-field>'),a.put("web/common/services/genericEditor/templates/richTextTemplate.html",'<se-rich-text-field data-field="field" data-qualifier="qualifier" data-model="model" data-editor="editor"></se-rich-text-field>'),a.put("web/common/services/genericEditor/templates/shortStringTemplate.html",'<input type="text" id="{{field.qualifier}}-shortstring" class="ng-class:{\'col-xs-12\':true, \'form-control\':true, \'has-error\':field.errors.length>0} " placeholder="{{field.tooltip| translate}}" name="{{field.qualifier}}" data-ng-disabled="!field.editable" data-ng-model="model[qualifier]" />'),a.put("web/common/services/infiniteScrolling/yInfiniteScrollingTemplate.html",'<div data-ng-attr-id="{{scroll.containerId}}" class="ySEInfiniteScrolling-container {{scroll.dropDownContainerClass}}">\n    <div class="ySEInfiniteScrolling {{scroll.dropDownClass}}" data-infinite-scroll="scroll.nextPage()" data-infinite-scroll-disabled="scroll.pagingDisabled" data-infinite-scroll-distance="scroll.distance" data-infinite-scroll-immediate-check="true" data-infinite-scroll-container=\'scroll.container\'>\n        <div data-ng-transclude></div>\n    </div>\n    <div data-ng-if="!scroll.pagingDisabled" class="panel panel-default panel__ySEInfiniteScrolling">\n        <div class="panel-body panel-body__ySEInfiniteScrolling">\n            <div class="spinner">\n                <div class="spinner-container spinner-container1">\n                    <div class="spinner-circle1"></div>\n                    <div class="spinner-circle2"></div>\n                    <div class="spinner-circle3"></div>\n                    <div class="circle4"></div>\n                </div>\n                <div class="spinner-container spinner-container2">\n                    <div class="spinner-circle1"></div>\n                    <div class="spinner-circle2"></div>\n                    <div class="spinner-circle3"></div>\n                    <div class="circle4"></div>\n                </div>\n                <div class="spinner-container spinner-container3">\n                    <div class="spinner-circle1"></div>\n                    <div class="spinner-circle2"></div>\n                    <div class="spinner-circle3"></div>\n                    <div class="circle4"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("web/common/services/languageSelector/languageSelectorTemplate.html",'<ui-select id="uiSelectToolingLanguage" ng-model="ctrl.selectedLanguage" on-select="ctrl.setSelectedLanguage($item)" theme="select2" title="" style="width:100%" search-enabled="false" data-dropdown-auto-width="false">\n    <ui-select-match placeholder="{{\'languageselector.dropdown.placeholder\' | translate}}">\n        <span ng-bind="ctrl.selectedLanguage.name "></span>\n    </ui-select-match>\n\n    <ui-select-choices repeat="language in ctrl.languages track by language.isoCode" position="down ">\n        <span ng-bind="language.name"></span>\n    </ui-select-choices>\n</ui-select>'),a.put("web/common/services/localizedElement/localizedElementTemplate.html",'<y-tabset data-model="model" tabs-list="tabs" data-num-tabs-displayed="6">\n</y-tabset>'),a.put("web/common/services/modalTemplate.html",'<div class="modal-header" data-ng-if="modalController._modalManager.title">\n    <button type="button" class="close" data-ng-if="modalController._modalManager._showDismissButton()" data-ng-click="modalController._modalManager._handleDismissButton()">\n        <span class="hyicon hyicon-close"></span>\n    </button>\n    <h4 id="smartedit-modal-title-{{ modalController._modalManager.title }}">{{ modalController._modalManager.title | translate }}&nbsp;{{ modalController._modalManager.titleSuffix | translate }}</h4>\n</div>\n<div class="modal-body" id="modalBody">\n    <div data-ng-include="modalController.templateUrl" />\n</div>\n<div class="modal-footer" data-ng-if="modalController._modalManager._hasButtons()">\n    <span data-ng-repeat="button in modalController._modalManager.getButtons()">\n'+"        <button id='{{ button.id }}' type=\"button\" data-ng-disabled=\"button.disabled\" data-ng-class=\"{ 'btn':true, 'btn-subordinate':button.style=='default', 'btn-primary':button.style=='primary' }\" data-ng-click=\"modalController._modalManager._buttonPressed(button)\">{{ button.label | translate }}</button>\n    </span>\n</div>"),a.put("web/common/services/tabset/yTabsetTemplate.html",'<div>\n    <ul class="nav nav-tabs">\n        <li ng-if="tabsList.length!=numTabsDisplayed" data-ng-repeat="tab in tabsList.slice( 0, numTabsDisplayed-1 ) track by $index" data-ng-class="{\'active\': tab.active }" data-tab-id="{{tab.id}}">\n            <a data-ng-class="{\'sm-tab-error\': tab.hasErrors}" data-ng-click="selectTab(tab)" data-ng-if="!tab.message">{{tab.title | translate}}</a>\n            <a data-ng-class="{\'sm-tab-error\': tab.hasErrors}" data-ng-click="selectTab(tab)" data-ng-if="tab.message" data-popover="{{tab.message}}" data-popover-trigger="mouseenter">{{tab.title | translate}}</a>\n        </li>\n        <li ng-if="tabsList.length==numTabsDisplayed" data-ng-repeat="tab in tabsList.slice( 0, numTabsDisplayed ) track by $index" data-ng-class="{\'active\': tab.active }" data-tab-id="{{tab.id}}">\n            <a data-ng-class="{\'sm-tab-error\': tab.hasErrors}" data-ng-click="selectTab(tab)" data-ng-if="!tab.message">{{tab.title | translate}}</a>\n            <a data-ng-class="{\'sm-tab-error\': tab.hasErrors}" data-ng-click="selectTab(tab)" data-ng-if="tab.message" data-popover="{{tab.message}}" data-popover-trigger="mouseenter">{{tab.title | translate}}</a>\n        </li>\n        <li data-ng-if="tabsList.length > numTabsDisplayed" class="dropdown" data-ng-class="{\'active\': tabsList.indexOf(selectedTab) >= numTabsDisplayed}">\n            <a data-ng-class="{\'sm-tab-error\': dropDownHasErrors()}" class="dropdown-toggle" data-toggle="dropdown" data-translate="ytabset.tabs.more">\n                <span class="caret"></span>\n            </a>\n            <ul class="dropdown-menu">\n                <li ng-if="tabsList.length!=numTabsDisplayed" data-ng-repeat="tab in tabsList.slice( numTabsDisplayed-1)" data-tab-id="{{tab.id}}">\n                    <a data-ng-class="{\'sm-tab-error\': tab.hasErrors}" data-ng-click="selectTab(tab)">{{tab.title | translate}}</a>\n                </li>\n            </ul>\n        </li>\n    </ul>\n\n    <div>\n        <y-tab data-ng-repeat="tab in tabsList" ng-show="tab.active" data-tab-id="{{tab.id}}" content="tab.templateUrl" data-model="model" tab-control="tabControl">\n        </y-tab>\n    </div>\n</div>'),a.put("web/common/services/wizard/modalWizardNavBarTemplate.html",'<div class="modal-wizard-template">\n    <div class="modal-wizard-template__steps">\n        <div data-ng-repeat="action in wizardController._wizardContext.navActions" class="modal-wizard-template-step">\n            <button id="action.id" data-ng-class="{ \'btn modal-wizard-template-step__action\': true, \'modal-wizard-template-step__action__enabled\': action.enableIfCondition(), \'modal-wizard-template-step__action__disabled\': !action.enableIfCondition(), \'modal-wizard-template-step__action__current\': action.isCurrentStep() }" data-ng-click="wizardController.executeAction(action)" data-ng-disabled="!action.enableIfCondition()">{{ action.i18n | translate }}\n            </button>\n            <span data-ng-if="!$last" class="" data-ng-class="{ \'modal-wizard-template-step__glyph-enabled\':  action.enableIfCondition(), \'modal-wizard-template-step__glyph-disabled\': !action.enableIfCondition()}"></span>\n\n        </div>\n    </div>\n\n    <div class="modal-wizard-template-content" data-ng-include="wizardController._wizardContext.templateUrl"></div>\n</div>'),a.put("web/common/services/wizard/modalWizardTemplate.html",'<div>\n    <div data-ng-include="wizardController._wizardContext.templateOverride || wizardController._wizardContext.templateUrl"></div>\n</div>'),a.put("web/smarteditcontainer/core/services/experienceSelectorWidget/experienceSelectorWidgetTemplate.html",'<div dropdown is-open="status.isopen" class="ySEpreview" auto-close="disabled">\n    <button type="button" dropdown-toggle id="experience-selector-btn" class="btn yWebsiteSelectBtn" aria-pressed="false" title="{{action.name}}" alt="{{action.name}}" data-ng-click="resetExperienceSelector()">\n        <span class="yWebsiteSelectBtn--label" data-translate="experience.selector.previewing"></span>\n        <span class="yWebsiteSelectBtn--text">{{buildExperienceText()}}</span>\n        <span class="hyicon hyicon-arrow "></span>\n    </button>\n    <div class="dropdown-menu bottom btn-block yDdResolution " role="menu">\n        <experience-selector data-experience="experience" data-dropdown-status="status" data-reset-experience-selector="resetExperienceSelector"></experience-selector>\n    </div>\n</div>'),a.put("web/smarteditcontainer/core/services/inflectionPointSelectorWidget/inflectionPointSelectorWidgetTemplate.html",'<div dropdown is-open="status.isopen" auto-close="disabled" id="inflectionPtDropdown">\n    <button type="button" class="btn btn-default yHybridAction yDddlbResolution" dropdown-toggle ng-disabled="disabled " aria-pressed="false">\n        <img data-ng-src="{{imageRoot}}{{currentPointSelected.icon}}" data-ng-typeSelected="{{currentPointSelected.type}}" />\n    </button>\n    <ul class="dropdown-menu bottom btn-block yDdResolution " role="menu">\n        <li ng-repeat="choice in points" class="item text-center">\n            <a href data-ng-click="selectPoint(choice);">\n                <img data-ng-show="currentPointSelected.type !== choice.type" data-ng-src="{{imageRoot}}{{choice.icon}}" class="file" />\n                <img data-ng-show="currentPointSelected.type === choice.type" data-ng-src="{{imageRoot}}{{choice.selectedIcon}}" class="file" />\n            </a>\n        </li>\n    </ul>\n</div>'),a.put("web/smarteditcontainer/core/services/pageToolMenu/clonePage/clonePageTemplate.html",'<div id="clone-page-template">\n    {{ "template.clone.page.title" | translate }}\n</div>'),a.put("web/smarteditcontainer/core/services/pageToolMenu/clonePage/clonePageWrapperTemplate.html",'<clone-page selected-item-callbacks="selectedItemCallbacks"></clone-page>'),a.put("web/smarteditcontainer/core/services/pageToolMenu/pageInformation/pageInformationTemplate.html",'<div id="page-info-template">\n    {{ "template.page.information.title" | translate }}\n</div>'),a.put("web/smarteditcontainer/core/services/pageToolMenu/pageInformation/pageInformationWrapperTemplate.html",'<page-information selected-item-callbacks="selectedItemCallbacks"></page-information>'),a.put("web/smarteditcontainer/core/services/pageToolMenu/pageToolMenuTemplate.html",'<div>\n    <nav class="pageToolMenu">\n        <ul class="list-unstyled">\n            <li class="text-right yCloseToolbar">\n                <a id="page-tool-menu-close" href="#" class="nav-close" data-ng-click="closePageToolMenu($event)">\n                    <span class="hyicon hyicon-close"></span>\n                </a>\n            </li>\n        </ul>\n        <ul id="page-tool-menu-home" class="list-unstyled page-tool-menu">\n            <li class="text-left" data-ng-repeat="item in actions" data-ng-switch="item.type">\n                <div data-ng-switch-when="TEMPLATE" class="yTemplateToolbar">\n                    <div data-ng-include="item.include" data-ng-if="item.include"></div>\n                </div>\n\n                <div data-ng-switch-when="ACTION">\n                    <a href data-ng-click="triggerAction(item, $event)">\n                        <span id="{{toolbarName}}_option_{{$index}}" class="{{ item.className || \'yStatusDefault\' }}">\n                            <img data-ng-src="{{imageRoot}}{{item.icons.default}} " title="{{item.name | translate}}" alt="{{item.name | translate}}" />{{item.name | translate}}\n                        </span>\n                    </a>\n                </div>\n\n                <div data-ng-switch-when="HYBRID_ACTION" dropdown is-open="status.isopen ">\n                    <a href data-ng-click="triggerAction(item, $event)">\n                        <span id="{{toolbarName}}_option_{{$index}}" class="{{ item.className || \'yStatusDefault\' }}" dropdown-toggle>\n                            <img data-ng-src="{{imageRoot}}{{item.icons.default}} " title="{{item.name | translate}}" alt="{{item.name | translate}}" />{{item.name | translate}}\n                        </span>\n                    </a>\n                </div>\n\n                <div data-ng-switch-default></div>\n            </li>\n        </ul>\n        <ul class="list-unstyled page-tool-menu hideLevel2" id="page-tool-menu-selected-item">\n            <li class="text-left">\n                <a id="page-tool-menu-back-anchor" data-ng-click="showPageToolMenuHome()">\n                    <span id="page-tool-menu-back" class=" icon-back " />{{backButtonI18nKey | translate}}</a>\n            </li>\n            <li>\n                <div data-ng-include="selected.include" data-ng-if="selected.include"></div>\n            </li>\n        </ul>\n    </nav>\n</div>'),
a.put("web/smarteditcontainer/core/services/pageToolMenu/pageToolMenuWrapperTemplate.html",'<page-tool-menu data-image-root="imageRoot" data-toolbar-name="pageToolMenu"></page-tool-menu>'),a.put("web/smarteditcontainer/core/services/pageToolMenu/syncStatus/syncStatusTemplate.html",'<a href>\n    <span class="yStatusInfo">\n        <img data-ng-src="{{imageRoot}}static-resources/images/icon_small_sync.png" />{{syncStatus | translate}}\n    </span>\n    <div class="yStatusSubtitle">{{syncDate | date : \'dd/MM/yy - h:mm:ss a\'}}</div>\n</a>'),a.put("web/smarteditcontainer/core/services/pageToolMenu/syncStatus/syncStatusWrapperTemplate.html","<sync-status></sync-status>"),a.put("web/smarteditcontainer/core/services/perspectiveSelectorWidget/perspectiveSelectorWidgetTemplate.html",'<div dropdown is-open="status.isopen" auto-close="disabled" class="ySEPerspectiveSelector">\n    <button type="button" class="btn btn-default yHybridAction" dropdown-toggle ng-disabled="disabled " aria-pressed="false">\n        <span class="btn-text">{{perspectiveData.activePerspective.name | translate}}</span>\n        <span class="hyicon hyicon-arrow "></span>\n    </button>\n    <ul class="dropdown-menu bottom btn-block ySEPerspectiveList" role="menu">\n        <li ng-repeat="choice in getPerspectives()" class="item ySEPerspectiveList--item" data-ng-click="selectPerspective(choice.key)">\n            <a href data-ng-click="selectPerspective(choice.key);">{{choice.name | translate}}</a>\n        </li>\n    </ul>\n</div>'),a.put("web/smarteditcontainer/core/services/topToolbars/deviceSupportTemplate.html",'<inflection-point-selector data-ng-if="isOnStorefront()"></inflection-point-selector>'),a.put("web/smarteditcontainer/core/services/topToolbars/experienceSelectorWrapperTemplate.html",'<experience-selector-button data-ng-if="isOnStorefront()"></experience-selector-button>'),a.put("web/smarteditcontainer/core/services/topToolbars/leftToolbarTemplate.html",'<div>\n    <nav class="leftNav">\n\n        <ul class="list-unstyled leftNav--user">\n            <li class="leftNav--user__close">\n                <a href="#" class="nav-close" data-ng-click="closeLeftToolbar($event)">\n                    <span class="hyicon hyicon-close"></span>\n                </a>\n            </li>\n            <li class="leftNav--user__info">\n                <p>{{username | uppercase}}</p>\n            </li>\n            <li class="leftNav--user__info">\n                <a href="#" id="" data-ng-click="signOut($event)">{{\'left.toolbar.sign.out\' | translate}}</a>\n            </li>\n\n            <li class="leftNav--user__info">\n                <language-selector></language-selector>\n            </li>\n            <li class="divider leftNav--user__divider"></li>\n        </ul>\n\n        <ul class="list-unstyled leftNav--level1" id="hamburger-menu-level1">\n            <li class="leftNav--listItem">\n                <a data-ng-click="showSites()">{{\'left.toolbar.sites\' | translate}}</a>\n            </li>\n            <li class="leftNav--listItem" has-operation-permission="configurationCenterReadPermissionKey">\n                <a id="configurationCenter" data-ng-click="showCfgCenter($event)">{{\'left.toolbar.configuration.center\' | translate}}\n                    <span class="icon "></span>\n                </a>\n            </li>\n        </ul>\n        <ul class="list-unstyled leftNav--level2 ySELeftHideLevel2" id="hamburger-menu-level2">\n            <li class="leftNav--listItem">\n                <a data-ng-click="goBack()">\n                    <span class=" icon-back ">{{\'left.toolbar.back\' | translate}}</span>\n                </a>\n            </li>\n            <li class="leftNav--listItem">\n                <general-configuration/>\n            </li>\n        </ul>\n    </nav>\n\n    <div class="navbar-header pull-left leftNavBtn">\n        <button type="button" class="navbar-toggle collapsed " data-toggle="collapse " data-target="#bs-example-navbar-collapse-1 " id="nav-expander" data-ng-click="showToolbar($event) ">\n            <span class="sr-only ">{{\'left.toolbar.toggle.navigation\' | translate}}</span>\n            <span class="icon-bar "></span>\n            <span class="icon-bar "></span>\n            <span class="icon-bar "></span>\n        </button>\n    </div>\n\n</div>'),a.put("web/smarteditcontainer/core/services/topToolbars/leftToolbarWrapperTemplate.html",'<left-toolbar data-image-root="imageRoot"></left-toolbar>'),a.put("web/smarteditcontainer/core/services/topToolbars/logoTemplate.html",'<img data-ng-src="{{imageRoot}}static-resources/images/logo_smartEdit.png " class="ySmartEditAppLogo " alt="Smart Edit " />'),a.put("web/smarteditcontainer/core/services/topToolbars/perspectiveSelectorWrapperTemplate.html","<perspective-selector></perspective-selector>"),a.put("web/smarteditcontainer/core/services/topToolbars/toolbarActionTemplate.html",'<div>\n    <div data-ng-if="item.type == \'ACTION\'" class="btn-group ">\n        <button type="button" dropdown-toggle="true" data-toggle="button" class="btn" aria-pressed="false" data-ng-click="triggerAction(item, $event)">\n            <span>{{item.name | translate}}</span>\n            <img id="{{toolbarName}}_option_{{item.key}}" data-ng-src="{{::imageRoot}}{{item.icons.default}} " class="file" title="{{item.name | translate}}" alt="{{item.name | translate}}" />\n        </button>\n    </div>\n    <div data-ng-if="item.type == \'HYBRID_ACTION\'" class="btn-group ySEHybridAction" dropdown is-open="status.isopen ">\n        <button data-ng-show="item.icons.default" type="button" class="btn btn-default yHybridAction yDddlbResolution" dropdown-toggle ng-disabled="disabled " aria-pressed="false " data-ng-click="triggerAction(item, $event)">\n            <span>{{item.name | translate}}</span>\n            <img id="{{toolbarName}}_option_{{item.key}}" data-ng-src="{{::imageRoot}}{{item.icons.default}}" class="file" title="{{item.name | translate}}" alt="{{item.name | translate}}" />\n        </button>\n\n        <div data-ng-include="item.include" data-ng-if="item.include"></div>\n\n    </div>\n</div>'),a.put("web/smarteditcontainer/core/toolbar/toolbarTemplate.html",'<div class=\'{{cssClass}} yToolbar\'>\n\n    <div class="yToolbar__Left">\n        <div data-ng-repeat="item in actions | filter:{section:\'left\'}" class="yTemplateToolbar {{::item.className}}" data-ng-include="item.include && item.type ==\'TEMPLATE\' ? item.include : \'web/smarteditcontainer/core/services/topToolbars/toolbarActionTemplate.html\'"></div>\n    </div>\n    <div class="yToolbar__Middle">\n        <div data-ng-repeat="item in actions | filter:{section:\'middle\'}" class="yTemplateToolbar {{::item.className}}" data-ng-include="item.include && item.type ==\'TEMPLATE\' ? item.include : \'web/smarteditcontainer/core/services/topToolbars/toolbarActionTemplate.html\'"></div>\n    </div>\n    <div class="yToolbar__Right">\n        <div data-ng-repeat="item in actions | filter:{section:\'right\'}" class="yTemplateToolbar {{::item.className}}" data-ng-include="item.include && item.type ==\'TEMPLATE\' ? item.include : \'web/smarteditcontainer/core/services/topToolbars/toolbarActionTemplate.html\'"></div>\n    </div>\n</div>'),a.put("web/smarteditcontainer/fragments/landingPage.html",'<div class="ySmartEditToolbars" style="position:absolute">\n    <div>\n        <toolbar data-css-class="ySmartEditTitleToolbar" data-image-root="imageRoot" data-toolbar-name="smartEditTitleToolbar"></toolbar>\n    </div>\n</div>\n<div class="landingPageWrapper">\n    <div class="ySELandingTitle">\n        <h1 class="landing-page-title" data-translate=\'landingpage.title\'></h1>\n        <h4 class="landing-page-label" data-translate=\'landingpage.label\'></h4>\n    </div>\n    <div class="container-fluid ySELandingPage">\n        <div class="row">\n            <div class="ySECatalogEntry" data-ng-repeat="catalog in landingCtl.catalogs | startFrom:(landingCtl.currentPage-1)*landingCtl.CATALOGS_PER_PAGE | limitTo:landingCtl.CATALOGS_PER_PAGE">\n                <catalog-details catalog="catalog"></catalog-details>\n            </div>\n        </div>\n        <div class="pagination-container">\n            <pagination boundary-links="true" total-items="landingCtl.totalItems" items-per-page="landingCtl.CATALOGS_PER_PAGE" ng-model="landingCtl.currentPage" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>\n        </div>\n    </div>\n</div>'),a.put("web/smarteditcontainer/fragments/mainview.html",'<div class="ySmartEditToolbars" style="position:absolute">\n    <div>\n        <toolbar data-css-class="ySmartEditTitleToolbar" data-image-root="imageRoot" data-toolbar-name="smartEditTitleToolbar"></toolbar>\n    </div>\n    <div>\n        <toolbar data-css-class="ySmartEditExperienceSelectorToolbar" data-image-root="imageRoot" data-toolbar-name="experienceSelectorToolbar"></toolbar>\n    </div>\n</div>\n<div ng-class="{\'alert-overlay\': true, \'ySEEmptyMessage\': (!alerts || alerts.length == 0 ) }">\n    <alerts-box alerts="alerts" />\n</div>\n<div id="js_iFrameWrapper" class="iframeWrapper">\n    <iframe src="" hy-dropabpe-iframe></iframe>\n</div>'),a.put("web/smarteditcontainer/modules/administrationModule/editConfigurationsTemplate.html",'<div id="editConfigurationsBody" class="ySEConfigBody">\n    <form name="form.configurationForm" novalidate data-ng-submit="editor.submit(form.configurationForm)">\n        <div class="row ySECfgTableHeader">\n            <div class="col-xs-3">\n                <label data-translate="configurationform.header.key.name"></label>\n            </div>\n            <div class="col-xs-9">\n                <label data-translate="configurationform.header.value.name"></label>\n            </div>\n        </div>\n        <div class="row ySECfgAddEntity">\n            <button class="y-add-btn" type="button" data-ng-click="editor.addEntry(); ">\n                <span class="hyicon hyicon-add "></span>\n                {{\'general.configuration.add.button\' | translate}}\n            </button>\n        </div>\n        <div class="row ySECfgEntity " data-ng-repeat="entry in editor.filterConfiguration() " data-ng-mouseenter="mouseenter() " data-ng-mouseout="mouseout() ">\n            <div class="col-xs-3 ">\n                <input type="text " class="ng-class:{ \'col-xs-12\':true, \'has-error\':entry.errors.keys.length>0}" name="{{entry.key}}_key" data-ng-model="entry.key" data-ng-required="true" data-ng-disabled="!entry.isNew" />\n                <span id="{{entry.key}}_error_{{$index}}" data-ng-if="entry.errors.keys" data-ng-repeat="error in entry.errors.keys" class="error-input help-block">\n                    {{error.message|translate}}\n                </span>\n            </div>\n            <div class="col-xs-8">\n                <textarea class="ng-class:{\'col-xs-12\':true, \'has-error\':entry.errors.values.length>0}" name="{{entry.key}}_value" data-ng-model="entry.value" data-ng-required="true" data-ng-change="editor._validateUserInput(entry)"></textarea>\n                <div data-ng-if="entry.requiresUserCheck">\n                    <input id="{{entry.key}}_absoluteUrl_check_{{$index}}" type="checkbox" data-ng-model="entry.isCheckedByUser" />\n                    <span id="{{entry.key}}_absoluteUrl_msg_{{$index}}" class="ng-class:{\'warning-check-msg\':true, \'not-checked\':entry.hasErrors && !entry.isCheckedByUser}">{{\'configurationform.absoluteurl.check\' | translate}}</span>\n                </div>\n\n                <span id="{{entry.key}}_error_{{$index}}" data-ng-if="entry.errors.values" data-ng-repeat="error in entry.errors.values" class="error-input help-block">\n                    {{error.message|translate}}\n                </span>\n            </div>\n            <div class="col-xs-1">\n                <button type="button" id="{{entry.key}}_removeButton_{{$index}}" class="btn btn-subordinate" data-ng-click="editor.removeEntry(entry, form.configurationForm);">\n                    <span class="hyicon hyicon-remove" aria-hidden="true"></span>\n                </button>\n            </div>\n        </div>\n    </form>\n</div>'),a.put("web/smarteditcontainer/modules/administrationModule/generalConfigurationTemplate.html",'<a id="generalConfiguration" data-ng-click="editConfiguration()">{{\'general.configuration.title\' | translate}}</a>'),a.put("web/smarteditcontainer/services/widgets/catalogDetails/catalogDetailsTemplate.html",'<div class="col-xs-12 col-sm-6 ySECatalog">\n    <div class="catalog-container">\n        <div class="catalog-body">\n            <div class="catalog-header row">\n                <h4>{{catalog.name | l10n}}</h4>\n            </div>\n\n            <div class="row">\n                <div data-ng-repeat="catalogVersion in catalog.catalogVersions" class="col-xs-6 catalog-version-item">\n                    <div class="catalog-version-container" data-ng-click="onCatalogSelect(catalogVersion)">\n                        <div class="catalog-thumbnail-default-img">\n                            <div class="catalog-thumbnail" style="background-image: url(\'{{catalogVersion.thumbnailUrl}}\');"></div>\n                        </div>\n                        <div class="catalog-version-info">{{catalogVersion.catalogVersion}}</div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="catalog-footer row">\n                <div data-ng-repeat="template in templates" ng-include="template.include" />\n            </div>\n        </div>\n    </div>\n</div>'),a.put("web/smarteditcontainer/services/widgets/clientPagedList/clientPagedList.html",'<div class="fluid-container ySEPageListResult">\n\n    <p class="paged-list-count" ng-if="displayCount">\n        <span>({{ filteredItems.length }} {{\'pagelist.countsearchresult\' | translate}})</span>\n    </p>\n\n    <table class="paged-list-table table table-striped table-hover techne-table">\n        <thead>\n            <tr>\n                <th data-ng-repeat="key in keys" data-ng-click="orderByColumn(key.property)" data-ng-style="{ \'width\': columnWidth + \'%\' }" class="paged-list-header" data-ng-class="\'paged-list-header-\'+key.property">\n                    {{ key.i18n | translate }}\n                    <span class="header-icon" ng-show="visibleSortingHeader === key.property" ng-class="{ \'down\': headersSortingState[key.property] == true, \'up\': headersSortingState[key.property] == false }"></span>\n                </th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr data-ng-repeat=" item in filteredItems | startFrom:(currentPage-1)*itemsPerPage | limitTo:itemsPerPage " class="techne-table-xs-right techne-table-xs-left paged-list-item ">\n                <td ng-repeat="key in keys" ng-class="\'paged-list-item-\'+key.property">\n                    <div data-ng-if="renderers[key.property]" compile-html="renderers[key.property](item, key)"></div>\n                    <span data-ng-if="!renderers[key.property]">{{ item[key.property] }}</span>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n\n    <div class="pagination-container ">\n        <pagination boundary-links="true" total-items="totalItems" items-per-page="itemsPerPage" ng-model="currentPage" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>\n    </div>\n\n</div>'),a.put("web/smartedit/core/decoratorFilter/managePerspectivesTemplate.html",'<div class="modal-header">\n    <h3 class="modal-title">{{ \'modal.perpectives.title\' | translate }}</h3>\n</div>\n<div class="modal-body">\n    <table>\n        <tr>\n            <td rowspan="2">\n                {{\'modal.perpectives.header.perspectives.name\' | translate}}\n                <div>\n                    <select size="12" data-ng-change="perspectiveChanged()" class="form-control" data-ng-options="p.name | translate for p in perspectives" data-ng-model="perspective"></select>\n                </div>\n                <button type="button" class="btn btn-default btn-xs" data-ng-click="createPerspective()">\n                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>\n                </button>\n                <button type="button" class="btn btn-danger btn-xs" data-ng-if="perspective.system !== true" data-ng-click="deletePerspective()">\n                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>\n                </button>\n            </td>\n            <td width="15px">\n            </td>\n            <td valign="top">\n                {{\'modal.perpectives.header.name.name\' | translate}}:\n                <span data-ng-if="perspective.system===true">\n                    <span style="padding-left: 5px">{{ perspective.name | translate }}</span>\n                    <span class=\'pull-right\' style="color: #feffc1; padding-left: 10px">{{ warningForSystem | translate }}</span>\n                </span>\n                <input style=\'padding-left: 5px; color: black\' data-ng-if="perspective.system!==true" type="text" data-ng-required="true" data-ng-trim="true" data-ng-change="nameChanged()" data-ng-disabled="perspective.system === true" data-ng-model="perspective.name">\n                <span style="color: #ff0e18">{{ renameError | translate }}</span>\n            </td>\n        </tr>\n        <tr>\n            <td width="25px">\n            </td>\n            <td>\n                {{\'modal.perpectives.header.decorators.name\' | translate}}\n                <div data-ng-repeat="ps in decoratorSet">\n                    <input type="checkbox" data-ng-model="ps.checked" data-ng-change="save()" data-ng-disabled="perspective.system === true"> {{ ps.name }}\n                </div>\n            </td>\n        </tr>\n    </table>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-default" data-ng-click="close()" data-translate="perspectives.actions.close"></button>\n</div>'),a.put("web/smartedit/core/decoratorFilter/perspectiveTemplate.html",'<div>\n    <span class="floating-perspective" data-ng-mouseleave="mouseOff()" data-ng-mouseenter="mouseOn()">\n        <div>\n            <span class="xposed-perspectives">\n                <span class="glyphicon glyphicon-th" aria-hidden="true"></span>\n            </span>\n        </div>\n        <div class="floating-bg" data-ng-show="!showButtonOnly()">\n            <div>\n                <span data-translate="modal.perpectives.header.perspectives.name"></span>\n            </div>\n            <div class="form-group form-inline">\n                <select data-ng-change="perspectiveSelected(perspective)" class="form-control" data-ng-options="p.name | translate for p in perspectives" ng-model="perspective" />\n                <button type="button" data-ng-click="manage()" class="btn btn-default" aria-hidden="true">\n                    <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>\n                </button>\n            </div>\n        </div>\n    </span>\n</div>\n<div data-ng-transclude></div>'),a.put("web/smartedit/modules/systemModule/features/contextualMenu/contextualMenuDecoratorTemplate.html",'<div class="cmsx-ctx-wrapper1">\n    <div class="cmsx-ctx-wrapper2">\n        <div class="decorative-top-border decorative-border" data-ng-if="ctrl.active"></div>\n        <div class="decorative-right-border decorative-border" data-ng-if="ctrl.active"></div>\n        <div class="decorative-bottom-border decorative-border" data-ng-if="ctrl.active"></div>\n        <div class="decorative-left-border decorative-border" data-ng-if="ctrl.active"></div>\n        <div class="contextualMenuOverlay" data-ng-show="ctrl.showOverlay() || ctrl.status.isopen">\n            <div data-ng-repeat="item in ctrl.getItems().leftMenuItems" class="btn btn-primary cmsx-ctx-btns" data-ng-init="itemsrc = item.iconIdle" data-ng-mouseout="itemsrc = item.iconIdle" data-ng-mouseover="itemsrc = item.iconNonIdle">\n                <span id="{{item.i18nKey | translate}}-{{ctrl.smarteditComponentId}}-{{ctrl.smarteditComponentType}}-{{$index}}" data-ng-if="item.iconIdle && ctrl.isHybrisIcon(item.displayClass)" data-ng-click="ctrl.triggerItemCallback(item, $event)" data-contextual-menu-item="" data-item="item" data-component-id="{{ctrl.smarteditComponentId}}" data-component-type="{{ctrl.smarteditComponentType}}" data-container-id="{{ctrl.smarteditContainerId}}" data-container-type="{{ctrl.smarteditContainerType}}" class="ng-class:{clickable:true}">\n                    <img data-ng-src="{{itemsrc}}" id="{{item.i18nKey | translate}}-{{ctrl.smarteditComponentId}}-{{ctrl.smarteditComponentType}}-{{$index}}" title="{{item.i18nKey | translate}}" />\n                </span>\n                <img id="{{item.i18nKey | translate}}-{{ctrl.smarteditComponentId}}-{{ctrl.smarteditComponentType}}-{{$index}}" title="{{item.i18nKey | translate}}" data-ng-if="item.iconIdle && !ctrl.isHybrisIcon(item.displayClass)" class="{{item.displayClass}}" data-ng-class="{clickable:true}" data-ng-click="ctrl.triggerItemCallback(item, $event)" data-ng-src="{{itemsrc}}" data-contextual-menu-item="" data-item="item" data-component-id="{{ctrl.smarteditComponentId}}" data-component-type="{{ctrl.smarteditComponentType}}" data-container-id="{{ctrl.smarteditContainerId}}" data-container-type="{{ctrl.smarteditContainerType}}" />\n            </div>\n            <div data-ng-if="ctrl.getItems().moreMenuItems.length > 0" class="cmsx-ctx-more">\n\n                <div class="btn-group yCmsCtxMenu" dropdown is-open="ctrl.status.isopen" dropdown-append-to-body data-ng-init="itemsrc = ctrl.moreButton.iconIdle" data-ng-mouseout="itemsrc = ctrl.moreButton.iconIdle" data-ng-mouseover="itemsrc = ctrl.moreButton.iconNonIdle">\n\n                    <button type="button" class="cmsx-ctx-more-btn pull-right" dropdown-toggle data-ng-click="ctrl.toggleDropdown($event)">\n                        <img title="{{ctrl.moreButton.i18nKey | translate}}" data-ng-src="{{ctrl.status.isopen? ctrl.moreButton.iconNonIdle : itemsrc}}" data-ng-class="{noboxshadow:ctrl.status.isopen}" />\n                    </button>\n                    <ul class="dropdown-menu" id="{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}-more-menu" role="menu">\n                        <li data-ng-repeat="item in ctrl.getItems().moreMenuItems">\n                            <a data-ng-click="ctrl.triggerItemCallback(item, $event)" data-item="item" data-smartedit-id="{{ctrl.smarteditComponentId}}" data-smartedit-type="{{ctrl.smarteditComponentType}}">\n                                <span data-ng-if="item.iconIdle && ctrl.isHybrisIcon(item.displayClass)" data-ng-click="ctrl.triggerItemCallback(item, $event)" data-contextual-menu-item="" data-item="item" data-component-id="{{ctrl.smarteditComponentId}}" data-component-type="{{ctrl.smarteditComponentType}}" data-container-id="{{ctrl.smarteditContainerId}}" data-container-type="{{ctrl.smarteditContainerType}}" class="ng-class:{clickable:true}">\n                                    <img class="cmsx-ctx-menu-more-icon" data-ng-src="{{itemsrc}}" id="{{item.i18nKey | translate}}-{{ctrl.smarteditComponentId}}-{{ctrl.smarteditComponentType}}-{{$index}}" title="{{item.i18nKey | translate}}" />\n\n                                </span>\n                                <!--<span class="icontext {{item.displayClass}}" data-ng-if="item.iconIdle && !ctrl.isHybrisIcon(item.displayClass)" />-->\n                                <img id="{{item.i18nKey | translate}}-{{ctrl.smarteditComponentId}}-{{ctrl.smarteditComponentType}}-{{$index}}" title="{{item.i18nKey | translate}}" class="cmsx-ctx-menu-more-icon" data-ng-if="item.smallIcon && !ctrl.isHybrisIcon(item.smallIcon)" data-ng-src="{{item.smallIcon}}" />\n                                <span class="labeltext">{{item.i18nKey | translate}}</span>\n                            </a>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div class="contextualmenuBackground"></div>\n        </div>\n        <div class="yWrapperData">\n            <div data-ng-transclude></div>\n        </div>\n    </div>\n</div>'),a.put("web/smartedit/modules/systemModule/features/slotContextualMenu/basicSlotContextualMenuDecoratorTemplate.html",'<div class="cmsx-ctx-wrapper1 se-slot-contextual-menu-level1" data-ng-if="ctrl.isSlotNotEmpty">\n    <div class="cmsx-ctx-wrapper2 se-slot-contextual-menu-level2">\n        <div class="decorative-panel-basic-slot-contextual-menu" data-ng-if="ctrl.showOverlay() || ctrl.status.isopen">\n            <div data-ng-repeat="item in ctrl.getItems().leftMenuItems" class="btn btn-primary cmsx-ctx-btns pull-right" data-ng-init="itemsrc = item.iconIdle" data-ng-mouseout="itemsrc = item.iconIdle" data-ng-mouseover="itemsrc = item.iconNonIdle">\n                <div data-ng-if="!item.templateUrl">\n                    <span id="{{::item.i18nKey | translate}}-{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}-hyicon" data-ng-if="item.iconIdle && ctrl.isHybrisIcon(item.displayClass)" data-ng-click="ctrl.triggerItemCallback(item, $event)" class="ng-class:{clickable:true}">\n                        <img data-ng-src="{{itemsrc}}" id="{{::item.i18nKey | translate}}-{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}-hyicon-img" title="{{::item.i18nKey | translate}}" />\n                    </span>\n                    <img id="{{::item.i18nKey | translate}}-{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}" title="{{::item.i18nKey | translate}}" data-ng-if="item.iconIdle && !ctrl.isHybrisIcon(item.displayClass)" class="{{item.displayClass}}" data-ng-class="{clickable:true}" data-ng-click="ctrl.triggerItemCallback(item, $event)" data-ng-src="{{itemsrc}}" alt="{{item.i18nKey}}" />\n                </div>\n                <div data-ng-if="item.templateUrl">\n                    <div data-ng-include="item.templateUrl"></div>\n                </div>\n            </div>\n\n            <div data-ng-if="ctrl.getItems().moreMenuItems.length > 0" dropdown dropdown-append-to-body is-open="ctrl.status.isopen" class="btn btn-primary pull-right cmsx-ctx-btns dropdown" data-ng-init="itemsrc = ctrl.moreButton.iconIdle" data-ng-mouseout="itemsrc = ctrl.moreButton.iconIdle" data-ng-mouseover="itemsrc = ctrl.moreButton.iconNonIdle">\n                <img id="{{ctrl.moreButton.i18nKey | translate}}-{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}" title="{{ctrl.moreButton.i18nKey | translate}}" data-ng-if="ctrl.moreButton.iconIdle && !ctrl.isHybrisIcon(ctrl.moreButton.displayClass)" class="{{ctrl.moreButton.displayClass}}" data-ng-class="{clickable:true}" data-ng-click="ctrl.triggerItemCallback(ctrl.moreButton, $event)" data-ng-src="{{itemsrc}}" />\n                <ul class="dropdown-menu" role="menu">\n                    <li role="menu" data-ng-repeat="item in ctrl.getItems().moreMenuItems" id="{{::item.i18nKey | translate}}-{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}-more">\n                        <div data-ng-if="!item.templateUrl">\n                            <a data-ng-click="ctrl.triggerItemCallback(item, $event)">\n                                <span data-ng-if="item.displayClass" class="icontext {{item.displayClass}}"></span>\n                                <img title="{{::item.i18nKey | translate}}" class="cmsx-ctx-menu-more-icon" data-ng-if="item.smallIcon && !ctrl.isHybrisIcon(item.smallIcon)" data-ng-src="{{item.smallIcon}}" alt="{{item.i18nKey}}" />\n                                <span class="labeltext">{{::item.i18nKey | translate}}</span>\n                            </a>\n                        </div>\n                        <div data-ng-if="item.templateUrl">\n                            <div data-ng-include="item.templateUrl"></div>\n                        </div>\n                    </li>\n                </ul>\n            </div>\n        </div>\n        <div class="decorator-padding-container">\n            <div class="decorator-basic-slot-border" data-ng-if="ctrl.active"></div>\n            <div data-ng-transclude class="yWrapperData"></div>\n        </div>\n    </div>\n</div>'),a.put("web/smartedit/modules/systemModule/features/slotContextualMenu/slotContextualMenuDecoratorTemplate.html",'<div>\n    <div class="cmsx-ctx-wrapper1 se-slot-contextual-menu-level1">\n        <div class="cmsx-ctx-wrapper2 se-slot-contextual-menu-level2">\n            <div class="decorative-panel-area" data-ng-if="ctrl.showOverlay() || ctrl.status.isopen">\n                <p class="decorative-panel-text">{{::ctrl.smarteditComponentId}}</p>\n                <div class="decorator-panel-padding-center"></div>\n                <div class="decorative-panel-slot-contextual-menu" data-ng-if="ctrl.showOverlay() || ctrl.status.isopen">\n                    <div data-ng-repeat="item in ctrl.getItems().leftMenuItems" class="btn btn-primary cmsx-ctx-btns pull-right" data-ng-init="itemsrc = item.iconIdle" data-ng-mouseout="itemsrc = item.iconIdle" data-ng-mouseover="itemsrc = item.iconNonIdle">\n                        <div data-ng-if="!item.templateUrl">\n                            <span id="{{::item.i18nKey | translate}}-{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}-hyicon" data-ng-if="item.iconIdle && ctrl.isHybrisIcon(item.displayClass)" data-ng-click="ctrl.triggerItemCallback(item, $event)" class="ng-class:{clickable:true}">\n                                <img data-ng-src="{{itemsrc}}" id="{{::item.i18nKey | translate}}-{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}-hyicon-img" title="{{::item.i18nKey | translate}}" />\n                            </span>\n                            <img id="{{::item.i18nKey | translate}}-{{::ctrl.smarteditComponentId}}-{{::ctrl.smarteditComponentType}}" title="{{::item.i18nKey | translate}}" data-ng-if="item.iconIdle && !ctrl.isHybrisIcon(item.displayClass)" class="{{item.displayClass}}" data-ng-class="{clickable:true}" data-ng-click="ctrl.triggerItemCallback(item, $event)" data-ng-src="{{itemsrc}}" alt="{{item.i18nKey}}" />\n                        </div>\n                        <div data-ng-if="item.templateUrl">\n                            <div data-ng-include="item.templateUrl"></div>\n                        </div>\n                        <div class="slot-context-menu-divider"></div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="decorator-padding-container">\n                <div class="decorator-padding-left" data-ng-class="{active: ctrl.active}"></div>\n                <div class="decorator-slot-border" data-ng-class="{active: ctrl.active}"></div>\n                <div class="yWrapperData" data-ng-transclude data-ng-class="{active: ctrl.active}"></div>\n                <div class="decorator-padding-right" data-ng-class="{active: ctrl.active}"></div>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("iFrameManagerModule",["functionsModule","translationServiceModule","ngResource","loadConfigModule","restServiceFactoryModule","sharedDataServiceModule","resourceLocationsModule","modalServiceModule","heartBeatServiceModule"]).factory("deviceSupports",function(){return[{icon:"static-resources/images/icon_res_phone.png",selectedIcon:"static-resources/images/icon_res_phone_s.png",type:"phone",width:480},{icon:"static-resources/images/icon_res_wphone.png",selectedIcon:"static-resources/images/icon_res_wphone_s.png",type:"wide-phone",width:600},{icon:"static-resources/images/icon_res_tablet.png",selectedIcon:"static-resources/images/icon_res_tablet_s.png",type:"tablet",width:700},{icon:"static-resources/images/icon_res_wtablet.png",selectedIcon:"static-resources/images/icon_res_wtablet_s.png",type:"wide-tablet",
width:1024},{icon:"static-resources/images/icon_res_desktop.png",selectedIcon:"static-resources/images/icon_res_desktop_s.png",type:"desktop",width:1200},{type:"wide-desktop",icon:"static-resources/images/icon_res_wdesktop.png",selectedIcon:"static-resources/images/icon_res_wdesktop_s.png",width:"100%"}]}).factory("deviceOrientations",["$translate","hitch",function(a,b){var c=[{orientation:"vertical",key:"deviceorientation.vertical.label"},{orientation:"horizontal",key:"deviceorientation.horizontal.label"}];return c.forEach(function(c){a(c.key).then(b(c,function(a){this.label=a}))}),c}]).factory("iFrameManager",["deviceSupports","deviceOrientations","getURI","isBlank","$q","$log","$http","loadConfigManagerService","restServiceFactory","hitch","sharedDataService","heartBeatService","LANDING_PAGE_PATH","PREVIEW_RESOURCE_URI","$location","modalService","parseQuery",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(a){return g({method:"GET",url:a})}var s,t="100%",u="100%",v=[];return{setCurrentLocation:function(a){s=a},_getIframe:function(){return $("iframe")},hideWaitModal:function(){this._closeWait()},showWaitModal:function(){this._openWait()},getDeviceSupports:function(){return a},getDeviceOrientations:function(){return b},_mustLoadAsSuch:function(a){return!s||c(a)===c(s)||"cmsTicketId"in q(s)},load:function(a,b,c){b?r(a).then(j(this,function(){this._getIframe().attr("src",a),l.resetTimer(!0)}),j(this,function(a){404==a.status&&(this._getIframe().attr("src",c),l.resetTimer(!0))})):(f.debug("loading storefront ",a),this._getIframe().attr("src",a),l.resetTimer(!0))},_appendURISuffix:function(a){var b=a.split("?");return b[0].replace(/(.+)([^\/])$/g,"$1$2/previewServlet").replace(/(.+)\/$/g,"$1/previewServlet")+(2==b.length?"?"+b[1]:"")},loadPreview:function(a,b){previewURL=a,/.+\.html/.test(previewURL)||(previewURL=this._appendURISuffix(previewURL)),f.debug("loading storefront iframe with preview ticket:",b);var c=previewURL+(-1==previewURL.indexOf("?")?"?":"&")+"cmsTicketId="+b;this._mustLoadAsSuch(a)?this.load(c):i.get(c).get().then(j(this,function(a){var b=!0;this.load(s,b,c)}))},initializeCatalogPreview:function(){k.get("experience").then(j(this,function(a){return a?void h.loadAsObject().then(j(this,function(b){var c=b.domain+a.siteDescriptor.previewUrl,d=i.get(b.previewTicketURI||n);d.save({catalog:a.catalogDescriptor.catalogId,catalogVersion:a.catalogDescriptor.catalogVersion,language:a.languageDescriptor.isocode,resourcePath:c,pageId:a.pageId}).then(j(this,function(a){window.smartEditBootstrapped={},this.loadPreview(a.resourcePath,a.ticketId);var b={previewTicketId:a.ticketId,resourcePath:a.resourcePath};k.set("preview",b)}))})):void o.url(m)}))},apply:function(a,b){var c,e,f=!0;d(b)||(f="vertical"===b.orientation),d(a)||(c=f?a.width:a.height,e=f?a.height:a.width),c||(c=t),e||(e=u),a?this._getIframe().removeClass().addClass("device-"+(f?"vertical":"horizontal")+" device-default"):this._getIframe().removeClass(),this._getIframe().css({width:c,height:e,display:"block",margin:"auto"})},applyDefault:function(){this.apply(this.getDeviceSupports[0],this.getDeviceOrientations()[0])},_openWait:function(){return 0===v.length?p.open({templateUrl:"web/common/core/services/waitDialog.html",cssClasses:"ySEWaitDialog",controller:["modalManager","hitch","$timeout",function(a,b,c){v.push(a)}]}):void 0},_closeWait:function(){v.forEach(function(a){a.close()}),v.length=0}}}]),angular.module("authenticationModule",["authenticationInterfaceModule","gatewayProxyModule","functionsModule","languageSelectorModule","resourceLocationsModule","storageServiceModule","sharedDataServiceModule","alertServiceModule","modalServiceModule","ui.bootstrap","eventServiceModule"]).factory("authenticationService",["$rootScope","$q","$injector","$log","AuthenticationServiceInterface","LANDING_PAGE_PATH","MODAL_BUTTON_ACTIONS","DEFAULT_AUTHENTICATION_ENTRY_POINT","DEFAULT_AUTH_MAP","DEFAULT_CREDENTIALS_MAP","gatewayProxy","sharedDataService","storageService","alertService","systemEventService","EVENTS","getQueryString","convertToArray","hitch","copy","merge","isBlank","extend",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=function(){this.reauthInProgress={},this.gatewayId="authenticationService",k.initForService(this)};return x=w(e,x),e.prototype._launchAuth=function(a){return c.get("languageService").isInitialized().then(function(e){return m.isInitialized().then(function(e){return c.get("modalService").open({cssClasses:e?"ySELoginInit":"ySELoginNotInit",templateUrl:"web/common/core/services/loginDialog.html",controller:["modalManager",function(f){f.setShowHeaderDismiss(!1),this.initialized=e,this.auth={username:"",password:""},this.authURI=a.authURI,m.removeAuthToken(this.authURI),this.authURIKey=btoa(this.authURI).replace(/=/g,""),this.submit=function(e){var g=b.defer();if(e.posted=!0,e.errorMessage="",e.failed=!1,e.$valid){var h=t(a.clientCredentials||{});h.username=this.auth.username,h.password=this.auth.password,h.grant_type="password",c.get("$http")({method:"POST",url:this.authURI,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:q(h).replace("?","")}).success(s(this,function(a,b,c,e){m.storeAuthToken(this.authURI,a),m.storePrincipalIdentifier(h.username),d.debug(["API Authentication Success: ",this.authURI," status: ",b].join(" ")),f.close(),g.resolve()})).error(s(this,function(a,b,c,f){m.removePrincipalIdentifier(),d.debug(["API Authentication Failure: ",this.authURI," status: ",b].join(" ")),e.errorMessage=a&&a.error_description||"logindialogform.oauth.error.default",e.failed=!0,g.reject()}))}else e.errorMessage="logindialogform.username.and.password.required",g.reject();return g.promise}}]})})})},e.prototype.filterEntryPoints=function(a){return l.get("authenticationMap").then(function(b){return b=u(b||{},i),r(b).filter(function(b){return new RegExp(b.key,"g").test(a)}).map(function(a){return a.value})})},e.prototype.isAuthEntryPoint=function(a){return l.get("authenticationMap").then(function(b){var c=r(b).map(function(a){return a.value});return c.indexOf(a)>-1||a===h})},e.prototype._findAuthURIAndClientCredentials=function(a){return this.filterEntryPoints(a).then(function(a){return l.get("credentialsMap").then(function(b){b=angular.extend(b||{},j);var c=a[0];return{authURI:c,clientCredentials:b[c]}})})},e.prototype.authenticate=function(a){return this._findAuthURIAndClientCredentials(a).then(function(a){return this._launchAuth(a).then(function(b){o.sendEvent(p.AUTHORIZATION_SUCCESS),this.reauthInProgress[a.authURI]=!1}.bind(this))}.bind(this))},e.prototype.logout=function(){return o.sendAsynchEvent(p.LOGOUT,{})["finally"](s(this,function(a){a.removeAllAuthTokens();var b=c.get("$location"),d=b.url();v(d)||d===f?c.get("$route").reload():b.url(f)},m))},e.prototype.isReAuthInProgress=function(a){return b.when(this.reauthInProgress[a]===!0)},e.prototype.setReAuthInProgress=function(a){return this.reauthInProgress[a]=!0,b.when()},e.prototype.isAuthenticated=function(a){return this.filterEntryPoints(a).then(function(a){var b=a&&a[0];return m.getAuthToken(b).then(function(a){return!!a})})},new x}]),angular.module("bootstrapServiceModule",["functionsModule","configurationExtractorServiceModule","sharedDataServiceModule","gatewayFactoryModule"]).factory("bootstrapService",["configurationExtractorService","sharedDataService","injectJS","$log","$http","$q","hitch","customTimeout","WHITE_LISTED_STOREFRONTS_CONFIGURATION_KEY",function(a,b,c,d,e,f,g,h,i){return{_getIframe:function(){return document.getElementsByTagName("iframe")[0].contentWindow},bootstrapSmartEditContainer:function(){angular.bootstrap(document,["smarteditcontainer"])},addDependencyToSmartEditContainer:function(a){try{angular.module(a),d.debug('Adding app: "'+a+'" to smarteditcontainer'),angular.module("smarteditcontainer").requires.push(a)}catch(b){d.error("Failed to load module "+a+"; SmartEdit functionality may be compromised.")}},bootstrapContainerModules:function(e){var f=a.extractSEContainerModules(e);d.debug("outerAppLocations are:",f.appLocations),b.set("authenticationMap",f.authenticationMap),b.set("credentialsMap",e["authentication.credentials"]),angular.module("smarteditcontainer").constant("domain",e.domain).constant("smarteditroot",e.smarteditroot).constant(i,e[i]),c.execute({srcs:f.appLocations,callback:g(this,function(){f.applications.forEach(g(this,function(a){this.addDependencyToSmartEditContainer(a)})),this.bootstrapSmartEditContainer()})})},bootstrapSEApp:function(c){var h=a.extractSEModules(c);b.set("authenticationMap",h.authenticationMap),b.set("credentialsMap",c["authentication.credentials"]);var j={properties:{domain:c.domain,smarteditroot:c.smarteditroot,applications:h.applications},js:[c.smarteditroot+"/static-resources/dist/smartedit/js/presmartedit.js"],css:[c.smarteditroot+"/static-resources/dist/smartedit/css/inner-styling.css"]};j.properties[i]=c.whiteListedStorefronts;var k=[],l=[];f.all(h.appLocations.map(function(a,b){var c=f.defer();return e.get(a).then(function(){l.push(h.applications[b]),k.push(a),c.resolve()},function(){d.error("Failed to load module "+h.applications[b]+"; SmartEdit functionality may be compromised."),c.resolve()}),c.promise})).then(g(this,function(){j.js=j.js.concat(k),j.js.push(c.smarteditroot+"/static-resources/dist/smartedit/js/postsmartedit.js"),j.properties.applications=l,this._getIframe().postMessage({eventName:"smarteditBootstrap",resources:j},"*")}))}}}]),angular.module("configurationExtractorServiceModule",["functionsModule"]).factory("configurationExtractorService",["convertToArray",function(a){function b(b,e){var f;switch(e){case c:f="smartEditContainerLocation";break;case d:f="smartEditLocation"}var g=a(b).reduce(function(a,c,d,e){if(0===c.key.indexOf("applications")&&"string"!=typeof c.value&&"number"!=typeof c.value&&!(c.value instanceof Array)){if(f in c.value){a.applications.push(c.key.split(".")[1]);var g=c.value[f];a.appLocations.push(/^https?\:\/\//.test(g)?g:b.domain+g)}for(var h in c.value.authenticationMap)a.authenticationMap[h]=c.value.authenticationMap[h]}if("authenticationMap"===c.key)for(var i in c.value)a.authenticationMap[i]=c.value[i];return a},{applications:[],appLocations:[],authenticationMap:{}});return e===c?(g.applications.push("administration"),g.appLocations.push([b.smarteditroot,"/static-resources/smarteditcontainer/modules/administrationModule.js"].join(""))):e===d&&(g.applications.push("systemModule"),g.appLocations.push([b.smarteditroot,"/static-resources/smartedit/modules/systemModule.js"].join(""))),g}var c="smartEditContainer",d="smartEdit";return{extractSEContainerModules:function(a){return b(a,c)},extractSEModules:function(a){return b(a,d)}}}]),angular.module("experienceSelectorModule",["eventServiceModule","genericEditorModule","sharedDataServiceModule","loadConfigModule","iframeClickDetectionServiceModule","restServiceFactoryModule","iFrameManagerModule","languageServiceModule","siteServiceModule","catalogServiceModule","genericEditorModule","resourceLocationsModule","l10nModule"]).directive("experienceSelector",["l10nFilter","systemEventService","languageService","catalogService","siteService","sharedDataService","loadConfigManagerService","iframeClickDetectionService","restServiceFactory","iFrameManager","GenericEditor","PREVIEW_RESOURCE_URI","copy","hitch","$log","$q","$filter","$document","EVENTS",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return{templateUrl:"web/common/services/genericEditor/genericEditorTemplate.html",restrict:"E",transclude:!0,scope:{experience:"=",dropdownStatus:"=",resetExperienceSelector:"="},link:function(g){function i(b){v.catalog={label:a(b.catalogDescriptor.name)+" - "+b.catalogDescriptor.catalogVersion,siteDescriptor:b.siteDescriptor,catalogDescriptor:b.catalogDescriptor},v.time=b.time,v.language={label:b.languageDescriptor.nativeName,languageDescriptor:b.languageDescriptor},v.pageId=b.pageId}function m(){t.length=0,e.getSites().then(function(b){b.forEach(function(b){d.getCatalogsForSite(b.uid).then(function(c){c.forEach(function(c){var d={label:a(c.name)+" - "+c.catalogVersion,catalogDescriptor:c,siteDescriptor:b},e=!1;t.forEach(function(a){a.label===d.label&&(e=!0)}),e||t.push(d)}),t=t.sort(function(a,b){return a.label.localeCompare(b.label)})})})})}function o(){u.length=0,f.get("experience").then(function(a){c.getLanguagesForSite(a.siteDescriptor.uid).then(function(a){a.forEach(function(a){u.push({label:a.nativeName,languageDescriptor:a})})})})}function p(){f.get("experience").then(function(a){i(a)})}var t=[],u=[],v={};g.resetExperienceSelector=function(){m(),o(),p(),g.editor.init()},f.get("configuration").then(function(a){g.editor=new k({smarteditComponentType:"DummyPreviewType",smarteditComponentId:null,structureApi:null,structure:[{cmsStructureType:"Dropdown",qualifier:"catalog",i18nKey:"experience.selector.catalog",options:t},{cmsStructureType:"Date",qualifier:"time",i18nKey:"experience.selector.date.and.time"},{cmsStructureType:"Dropdown",qualifier:"language",i18nKey:"experience.selector.language",options:u}],contentApi:a&&a.previewTicketURI||l,updateCallback:null,content:v}),g.editor.alwaysShowReset=!0,g.editor.alwaysShowSubmit=!0,g.editor.onSubmit=function(){return f.get("configuration").then(n(this,function(a){return f.get("experience").then(n(this,function(b){var c={catalog:this.component.catalog.catalogDescriptor.catalogId,catalogVersion:this.component.catalog.catalogDescriptor.catalogVersion,resourcePath:a.domain+this.component.catalog.siteDescriptor.previewUrl,language:this.component.language.languageDescriptor.isocode,pageId:b.pageId};return this.component.time&&(c.time=q("date")(new Date(this.component.time),"yyyy-MM-ddTHH:mm:ssZ")),this.editorCRUDService.save(c).then(n(this,function(a){return{payload:this.component,response:a}}))}))}))},g.editor.updateCallback=function(a,c){g.dropdownStatus.isopen=!1,f.get("configuration").then(function(d){b.sendAsynchEvent(s.CLEAR_PERSPECTIVE_FEATURES);var e={siteDescriptor:a.catalog.siteDescriptor,catalogDescriptor:a.catalog.catalogDescriptor,languageDescriptor:a.language.languageDescriptor,time:q("date")(a.time,g.editor.format),pageId:a.pageId};f.set("experience",e).then(function(){b.sendAsynchEvent("experienceUpdate");var e=d.domain+a.catalog.siteDescriptor.previewUrl;j.loadPreview(e,c.ticketId);var g={previewTicketId:c.ticketId,resourcePath:e};f.set("preview",g)})})}}),g.submitButtonText="componentform.actions.apply",g.cancelButtonText="componentform.actions.cancel",g.modalHeaderTitle="experience.selector.header",g.reset=function(){g.editor.reset(g.componentForm),g.dropdownStatus.isopen=!1},g.submit=function(){return g.editor.submit(g.componentForm)},g.$watch(function(){return g.editor&&g.editor.getComponent()},function(a,b){a&&b&&a.catalog&&b.catalog&&a.catalog.siteDescriptor.uid!==b.catalog.siteDescriptor.uid&&(u.length=0,c.getLanguagesForSite(a.catalog.siteDescriptor.uid).then(function(a){var b=a.map(function(a){return a.isocode});b.indexOf(g.editor.component.language.languageDescriptor.isocode)<0&&(g.editor.component.language={label:a[0].nativeName,languageDescriptor:a[0]}),a.forEach(function(a){u.push({label:a.nativeName,languageDescriptor:a})})}))},!0),r.on("click",function(a){if($(a.target).parents(".ySEPreviewSelector").length<=0){if($(a.target).parents(".ui-select-choices-row").length>0)return;g.dropdownStatus&&g.dropdownStatus.isopen&&(g.editor.reset(g.componentForm),g.dropdownStatus.isopen=!1,g.$apply())}}),h.registerCallback("closeExperienceSelector",function(){g.dropdownStatus&&g.dropdownStatus.isopen&&(g.editor.reset(g.componentForm),g.dropdownStatus.isopen=!1)})}}}]),angular.module("experienceSelectorButtonModule",["eventServiceModule","sharedDataServiceModule","sharedDataServiceModule","l10nModule"]).directive("experienceSelectorButton",["systemEventService","sharedDataService","l10nFilter","$interval",function(a,b,c,d){return{templateUrl:"web/smarteditcontainer/core/services/experienceSelectorWidget/experienceSelectorWidgetTemplate.html",restrict:"E",transclude:!0,$scope:{},link:function(d,e,f){a.registerEventHandler("experienceUpdate",function(){return b.get("experience").then(function(a){d.experience=a})}),d.buildExperienceText=function(){return d.experience?c(d.experience.catalogDescriptor.name)+" - "+d.experience.catalogDescriptor.catalogVersion+"  |  "+d.experience.languageDescriptor.nativeName+(d.experience.time?"  |  "+d.experience.time:""):""}}}}]),angular.module("inflectionPointSelectorModule",["sharedDataServiceModule","sharedDataServiceModule","iFrameManagerModule","resourceLocationsModule","iframeClickDetectionServiceModule"]).directive("inflectionPointSelector",["sharedDataService","iFrameManager","iframeClickDetectionService","$document",function(a,b,c,d){return{templateUrl:"web/smarteditcontainer/core/services/inflectionPointSelectorWidget/inflectionPointSelectorWidgetTemplate.html",restrict:"E",transclude:!0,$scope:{},link:function(a,e,f,g,h){a.selectPoint=function(c){a.currentPointSelected=c,a.status.isopen=!a.status.isopen,void 0!==c&&b.apply(c,a.deviceOrientation)};var i=[];i=b.getDeviceSupports(),a.currentPointSelected=i[5],a.points=i,a.status={isopen:!1},a.toggleDropdown=function(b){b.preventDefault(),b.stopPropagation(),a.status.isopen=!a.status.isopen},c.registerCallback("inflectionPointClose",function(){a.status.isopen=!1}),d.on("click",function(b){$(b.target).parents("inflection-point-selector").length<=0&&a.status.isopen&&(a.status.isopen=!1,a.$apply())})}}}]),angular.module("clonePageModule",["alertServiceModule"]).directive("clonePage",["$log","alertService",function(a,b){return{templateUrl:"web/smarteditcontainer/core/services/pageToolMenu/clonePage/clonePageTemplate.html",restrict:"E",transclude:!0,scope:{selectedItemCallbacks:"="},link:function(b,c,d){b.selectedItemCallbacks.onClose=function(){a.debug("Clone Page close callback triggered")}}}}]),angular.module("pageInformationModule",["alertServiceModule"]).directive("pageInformation",["$log","alertService",function(a,b){return{templateUrl:"web/smarteditcontainer/core/services/pageToolMenu/pageInformation/pageInformationTemplate.html",restrict:"E",transclude:!0,scope:{selectedItemCallbacks:"="},link:function(b,c,d){b.selectedItemCallbacks.onClose=function(){a.debug("Page Information close callback triggered")}}}}]),angular.module("pageToolMenuModule",["toolbarModule","iframeClickDetectionServiceModule","pageInformationModule","clonePageModule","syncStatusModule"]).directive("pageToolMenu",["toolbarServiceFactory","iframeClickDetectionService","hitch","$document",function(a,b,c,d){return{templateUrl:"web/smarteditcontainer/core/services/pageToolMenu/pageToolMenuTemplate.html",restrict:"E",transclude:!1,replace:!0,scope:{toolbarName:"@",imageRoot:"=imageRoot"},link:function(c,e,f){function g(a){return $(a.target).hasClass("pageToolMenu")||$(a.target).parents(".pageToolMenu").length>0}function h(a){return $(a.target).hasClass("yHybridAction")||$(a.target).parents(".btn.btn-default.yHybridAction").length>0}var i=a.getToolbarService(c.toolbarName);i.setOnAliasesChange(function(a){c.actions=a,c.actionsClasses=i.actionsClasses}),c.backButtonI18nKey="page.tool.menu.back.button",c.imageRoot=c.imageRoot||"",c.actions=i.getAliases(),c.actionsClasses=i.actionsClasses,c.triggerAction=function(a,b){b.preventDefault(),a.include&&(c.showPageToolMenuSelectedItem(),c.selected={include:a.include}),i.triggerAction(a)},c.selected={},c.selectedItemCallbacks={onClose:function(){}},c.clearSelectedItem=function(){c.selectedItemCallbacks.onClose(),c.selected={},c.selectedItemCallbacks={onClose:function(){}}},c.showPageToolMenuHome=function(a){a&&a.preventDefault(),$("#page-tool-menu-home").removeClass("hideLevel1").addClass("showLevel1"),$("#page-tool-menu-selected-item").removeClass("showLevel2").addClass("hideLevel2"),c.clearSelectedItem()},c.showPageToolMenuSelectedItem=function(a){a&&a.preventDefault(),$("#page-tool-menu-home").addClass("hideLevel1").removeClass("showLevel1"),$("#page-tool-menu-selected-item").removeClass("hideLevel2").addClass("showLevel2")},c.closePageToolMenu=function(a){a&&a.preventDefault();var b=$("body");b.removeClass("nav-expanded-right"),b.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){$("#page-tool-menu-home").removeClass("hideLevel1").addClass("showLevel1"),$("#page-tool-menu-selected-item").addClass("hideLevel2").removeClass("showLevel2")}),c.clearSelectedItem()},d.on("click",function(a){g(a)||h(a)||c.closePageToolMenu()}),b.registerCallback("pageToolMenuClose",function(){c.closePageToolMenu()})}}}]),angular.module("syncStatusModule",[]).directive("syncStatus",function(){return{templateUrl:"web/smarteditcontainer/core/services/pageToolMenu/syncStatus/syncStatusTemplate.html",restrict:"E",transclude:!1,link:function(a,b,c){a.syncDate=Date.now(),a.syncStatus="sync.status.synced.published"}}}),angular.module("perspectiveSelectorModule",["iframeClickDetectionServiceModule","perspectiveServiceModule"]).constant("perspectiveTest",!1).directive("perspectiveSelector",["$document","$log","perspectiveService","iframeClickDetectionService","hitch","ALL_PERSPECTIVE","perspectiveTest",function(a,b,c,d,e,f,g){return{templateUrl:"web/smarteditcontainer/core/services/perspectiveSelectorWidget/perspectiveSelectorWidgetTemplate.html",restrict:"E",transclude:!0,$scope:{},link:function(e){e.status={isopen:!1},e.getPerspectives=function(){return c.getPerspectives().filter(function(a){return!(c.data.activePerspective&&a.key==c.data.activePerspective.key||a.key==f&&!g)})},e.perspectiveData=c.data,e.selectPerspective=function(a){try{c.switchTo(a),e.status.isopen=!1}catch(d){b.error("selectPerspective() - Cannot select perspective.",d)}},e.toggleDropdown=function(a){a.preventDefault(),a.stopPropagation(),e.status.isopen=!e.status.isopen},d.registerCallback("perspectiveSelectorClose",function(){e.status.isopen=!1}),a.on("click",function(a){$(a.target).parents(".ySEPerspectiveSelector").length<=0&&e.status.isopen&&(e.status.isopen=!1,e.$apply())})}}}]),angular.module("leftToolbarModule",["authenticationModule","iframeClickDetectionServiceModule","resourceLocationsModule","iFrameManagerModule","sharedDataServiceModule","languageSelectorModule","storageServiceModule"]).directive("leftToolbar",["$location","$timeout","authenticationService","iframeClickDetectionService","iFrameManager","sharedDataService","storageService","LANDING_PAGE_PATH",function(a,b,c,d,e,f,g,h){return{templateUrl:"web/smarteditcontainer/core/services/topToolbars/leftToolbarTemplate.html",restrict:"E",transclude:!1,replace:!0,scope:{imageRoot:"=imageRoot"},link:function(i,j,k){function l(){f.get("preview").then(function(a){a&&a.resourcePath&&e.setCurrentLocation(a.resourcePath)})}g.getPrincipalIdentifier().then(function(a){i.username=a}),i.configurationCenterReadPermissionKey="smartedit.configurationcenter.read",i.showToolbar=function(a){a.preventDefault(),$("body").toggleClass("nav-expanded-left")},i.showSites=function(){i.closeLeftToolbar(),l(),b(function(){a.url(h)},400)},i.showCfgCenter=function(a){a.preventDefault(),$("#hamburger-menu-level1").addClass("ySELeftHideLevel1").removeClass("ySELeftShowLevel1"),$("#hamburger-menu-level2").removeClass("ySELeftHideLevel2").addClass("ySELeftShowLevel2")},i.goBack=function(){$("#hamburger-menu-level1").removeClass("ySELeftHideLevel1").addClass("ySELeftShowLevel1"),$("#hamburger-menu-level2").removeClass("ySELeftShowLevel2").addClass("ySELeftHideLevel2")},i.signOut=function(a){c.logout(),l()},$(document).bind("click",function(a){$(a.target).parents(".leftNav").length>0||$(a.target).parents(".navbar-header.pull-left.leftNavBtn").length>0||i.closeLeftToolbar()}),i.closeLeftToolbar=function(a){a&&a.preventDefault(),$("body").removeClass("nav-expanded-left"),i.goBack()},d.registerCallback("leftToolbarClose",function(){i.closeLeftToolbar()})}}}]),window.smartEditBootstrapped={},angular.module("smarteditcontainer",["ngRoute","ngResource","ui.bootstrap","coretemplates","loadConfigModule","iFrameManagerModule","alertsBoxModule","httpAuthInterceptorModule","httpErrorInterceptorModule","experienceInterceptorModule","bootstrapServiceModule","toolbarModule","leftToolbarModule","pageToolMenuModule","modalServiceModule","dragAndDropServiceModule","previewTicketInterceptorModule","previewDataGenericEditorResponseHandlerModule","catalogServiceModule","catalogDetailsModule","experienceSelectorButtonModule","experienceSelectorModule","sharedDataServiceModule","inflectionPointSelectorModule","paginationFilterModule","resourceLocationsModule","fetchMediaDataHandlerModule","experienceServiceModule","eventServiceModule","dragAndDropScrollingModule","urlServiceModule","perspectiveServiceModule","perspectiveSelectorModule","authorizationModule","hasOperationPermissionModule","l10nModule","yInfiniteScrollingModule"]).config(["LANDING_PAGE_PATH","STOREFRONT_PATH","STOREFRONT_PATH_WITH_PAGE_ID","$routeProvider","$logProvider","permissionKeysFactoryProvider",function(a,b,c,d,e,f){d.when(a,{templateUrl:"web/smarteditcontainer/fragments/landingPage.html",controller:"landingPageController",controllerAs:"landingCtl"}).when(b,{templateUrl:"web/smarteditcontainer/fragments/mainview.html",controller:"defaultController"}).when(c,{templateUrl:"web/smarteditcontainer/fragments/mainview.html",controller:"defaultController"}).otherwise({redirectTo:a}),f.addKeysToCheck(["smartedit.configurationcenter.read"]),e.debugEnabled(!1)}]).run(["$rootScope","$log","$q","toolbarServiceFactory","perspectiveService","gatewayFactory","loadConfigManagerService","bootstrapService","iFrameManager","dragAndDropService","restServiceFactory","sharedDataService","urlService","dragAndDropScrollingService","featureService","storageService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){$("#js_iFrameWrapper").css("padding-top",$(".ySmartEditToolbars").height()+"px")}f.initListener(),g.loadAsObject().then(function(a){l.set("defaultToolingLanguage",a.defaultToolingLanguage)});var r=d.getToolbarService("smartEditTitleToolbar");r.addItems([{key:"topToolbar.leftToolbarTemplate",type:"TEMPLATE",include:"web/smarteditcontainer/core/services/topToolbars/leftToolbarWrapperTemplate.html",priority:1,section:"left"},{key:"topToolbar.logoTemplate",type:"TEMPLATE",include:"web/smarteditcontainer/core/services/topToolbars/logoTemplate.html",priority:2,section:"left"},{key:"topToolbar.deviceSupportTemplate",type:"HYBRID_ACTION",include:"web/smarteditcontainer/core/services/topToolbars/deviceSupportTemplate.html",priority:1,section:"right"},{type:"TEMPLATE",key:"topToolbar.experienceSelectorTemplate",className:"ySEPreviewSelector",include:"web/smarteditcontainer/core/services/topToolbars/experienceSelectorWrapperTemplate.html",priority:1,section:"middle"}]);var s=d.getToolbarService("experienceSelectorToolbar");s.addItems([{key:"bottomToolbar.perspectiveSelectorTemplate",type:"TEMPLATE",section:"right",priority:1,include:"web/smarteditcontainer/core/services/topToolbars/perspectiveSelectorWrapperTemplate.html"}]);var t=f.createGateway("smartEditBootstrap");t.subscribe("reloadFormerPreviewContext",function(a,b){q();var d=c.defer();return i.initializeCatalogPreview(),d.resolve(),d.promise}),t.subscribe("loading",function(a,b){var d=c.defer();return i.setCurrentLocation(b.location),i.showWaitModal(),delete window.smartEditBootstrapped[b.location],e.clearActivePerspective(),d.promise}),t.subscribe("bootstrapSmartEdit",function(a,b){q();var d=c.defer();return window.smartEditBootstrapped[b.location]?d.resolve():(window.smartEditBootstrapped[b.location]=!0,g.loadAsObject().then(function(a){h.bootstrapSEApp(a),d.resolve()})),d.promise}),t.subscribe("smartEditReady",function(a,b){var d=c.defer();return d.resolve(),n.initialize(),j.apply(),i.hideWaitModal(),d.promise}),f.createGateway("accessTokens").subscribe("get",function(a,b){return c.when(p.getAuthTokens())})}]).controller("landingPageController",["loadConfigManagerService","catalogService","restServiceFactory",function(a,b,c){var d=this;d.CATALOGS_PER_PAGE=4,a.loadAsObject().then(function(a){return c.setDomain(a.domain),b.getAllCatalogsGroupedById()}).then(function(a){d.catalogs=a,d.totalItems=a.length,d.currentPage=1});var e=angular.element(document.querySelector("body"));e.hasClass("is-storefront")&&e.removeClass("is-storefront")}]).controller("defaultController",["$log","$routeParams","$location","LANDING_PAGE_PATH","systemEventService","iFrameManager","experienceService","sharedDataService",function(a,b,c,d,e,f,g,h){g.buildDefaultExperience(b).then(function(a){h.set("experience",a).then(function(a){e.sendAsynchEvent("experienceUpdate"),f.applyDefault(),f.initializeCatalogPreview(a)})},function(b){a.error("the provided path could not be parsed: "+c.url()),a.error(b),c.url(d)});var i=angular.element(document.querySelector("body"));i.addClass("is-storefront")}]),angular.module("toolbarModule",["gatewayProxyModule","resourceLocationsModule","toolbarInterfaceModule","translationServiceModule","ngRoute"]).factory("toolbarServiceFactory",["$q","$log","gatewayProxy","hitch","extend","ToolbarServiceInterface",function(a,b,c,d,e,f){var g=function(a){this.actions={},this.aliases=[],this.onAliasesChange=null,this.gatewayId=a,c.initForService(this,["addAliases","removeItemByKey","removeAliasByKey","_removeItemOnInner","triggerActionOnInner"])};g=e(f,g),g.prototype.addAliases=function(a){this.aliases=this.aliases.concat(a);var c=!1,d="In "+this.gatewayId+" the items ",e="";this.aliases.sort(function(a,b){return a.priority===b.priority&&a.section===b.section?(e=a.section,d+=a.key+" and "+b.key+" ",c=!0,a.key>b.key):a.priority-b.priority}),c&&b.warn("WARNING: "+d+"have the same priority withing section:"+e),this.onAliasesChange&&this.onAliasesChange(this.aliases)},g.prototype.removeItemByKey=function(a){a in this.actions?delete this.actions[a]:this._removeItemOnInner(a),this.removeAliasByKey(a)},g.prototype.removeAliasByKey=function(a){for(var b=0;b<this.aliases.length&&this.aliases[b].key!==a;b++);b<this.aliases.length&&this.aliases.splice(b,1)},g.prototype.setOnAliasesChange=function(a){this.onAliasesChange=a},g.prototype.triggerAction=function(a){return a&&this.actions[a.key]?void d(a,this.actions[a.key])():void this.triggerActionOnInner(a)},g.prototype.addItemsStyling=function(a){this.actionsClasses=a};var h={},i=function(a){return h[a]||(h[a]=new g(a)),h[a]};return{getToolbarService:i}}]).directive("toolbar",["toolbarServiceFactory","$route","STORE_FRONT_CONTEXT",function(a,b,c){return{templateUrl:"web/smarteditcontainer/core/toolbar/toolbarTemplate.html",restrict:"E",transclude:!1,replace:!0,scope:{cssClass:"@",toolbarName:"@",imageRoot:"=imageRoot"},link:function(d,e,f){d.imageRoot||(d.imageRoot=""),d.btnStates||(d.btnStates={lang:!1,add:!1,edit:!1,pageInfo:!1});var g=a.getToolbarService(d.toolbarName);g.setOnAliasesChange(function(a){d.actions=a,d.actionsClasses=g.actionsClasses}),d.actions=g.getAliases(),d.actionsClasses=g.actionsClasses,d.triggerAction=function(a,b){b.preventDefault(),g.triggerAction(a)},d.isOnStorefront=function(){return b.current.$$route.originalPath.indexOf(c)>=0}}}}]),angular.module("containerComponentHandlerServiceModule",[]).factory("containerComponentHandlerService",function(){return{getFromSelector:function(a){return $(a)}}}),angular.module("alertServiceModule",["gatewayProxyModule","functionsModule"]).factory("alertService",["gatewayProxy","$rootScope","hitch",function(a,b,c){var d=function(b){this.gatewayId=b,a.initForService(this),this.field="alerts"};return d.prototype.pushAlerts=function(a){b.$$phase?b[this.field]=a:b.$apply(c(this,function(){b[this.field]=a})),(1!==a.length||a[0].closeable!==!1)&&setTimeout(c(this,function(){delete b[this.field],b.$digest()}),3e3)},d.prototype.removeAlertById=function(a){b[this.field]=(b[this.field]||[]).filter(function(b){return!b.id||b.id!==a})},new d("alertService")}]),angular.module("catalogServiceModule",["restServiceFactoryModule","siteServiceModule","resourceLocationsModule"]).factory("catalogService",["restServiceFactory","siteService","CATALOG_VERSION_DETAILS_RESOURCE_URI","$q",function(a,b,c,d){
var e={},f=a.get(c);return{getCatalogsForSite:function(a){return e[a]?d.when(e[a]):f.get({siteUID:a}).then(function(b){return e[a]=b.catalogVersionDetails.reduce(function(a,b){return b.name&&b.catalogId&&b.version&&a.push({name:b.name,catalogId:b.catalogId,catalogVersion:b.version,thumbnailUrl:b.thumbnailUrl}),a},[]),e[a]})},getAllCatalogsGroupedById:function(){var a=[],c=d.defer(),e=this;return b.getSites().then(function(b){var f=[];b.forEach(function(a,b){f.push(e.getCatalogsForSite(a.uid).then(function(b){return b.map(function(b){return b.siteDescriptor=a,b})}))}),d.all(f).then(function(b){b=b.reduce(function(a,b){return a=a.concat(b)},[]),b.forEach(function(b){var c=null;a.forEach(function(a){a.catalogId==b.catalogId&&(c=a)}),c||(c={name:b.name,catalogId:b.catalogId,catalogVersions:[]},a.push(c)),c.catalogVersions.push(b)}),c.resolve(a)},function(){c.reject()})},function(){c.reject()}),c.promise}}}]),angular.module("confirmationModalServiceModule",["modalServiceModule"]).service("confirmationModalService",["modalService","MODAL_BUTTON_STYLES","MODAL_BUTTON_ACTIONS",function(a,b,c){this.confirm=function(d){if(!d.description)throw new Error("confirmation.modal.missing.description");var e,f;return d.descriptionPlaceholders?(e='<div id="confirmationModalDescription">{{ "'+d.description+'" | translate: modalController.descriptionPlaceholders }}</div>',f=[function(){this.descriptionPlaceholders=d.descriptionPlaceholders}]):e='<div id="confirmationModalDescription">{{ "'+d.description+'" | translate }}</div>',a.open({size:"md",title:d.title||"confirmation.modal.title",templateInline:e,controller:f,buttons:[{id:"confirmCancel",label:"confirmation.modal.cancel",style:b.SECONDARY,action:c.DISMISS},{id:"confirmOk",label:"confirmation.modal.ok",action:c.CLOSE}]})}}]),function(){angular.module("dragAndDropScrollingModule",[]).factory("dragAndDropScrollingService",["$filter","hitch",function(a,b){function c(a){return $(a)}function d(){g=this._getSelector("iframe"),h=g.contents().find("body"),f=g.contents().find(e.targetSelector)}var e,f,g,h,i=$.ui.smartedit,j={},k={UP:1,DOWN:2},l={VISIBLE:"visible",FF_FIX_APPLIED:"firefox-fix-applied",UI_HINT:"UIhintDragAndDrop"},m=i._getBrowser()===i._BROWSERS.IE?60:5,n=i._getBrowser()===i._BROWSERS.IE?100:10,o=10,p=450,q=20,r=65,s=!1,t=!1,u=a("translate"),v=function(){var a=this._getSelector("body");j.TOP=this._createAndAppendUIHint(a,"draganddrop.uihint.top","top"),j.BOTTOM=this._createAndAppendUIHint(a,"draganddrop.uihint.bottom","bottom"),j.IFRAME_TOP=this._createAndAppendUIHint(h,null,"top-firefox-fix"),j.IFRAME_BOTTOM=this._createAndAppendUIHint(h,"draganddrop.uihint.bottom","bottom-firefox-fix")},w=function(a,b,c){var d=this._getSelector("<div class='UIhintDragAndDrop' style='display: none;'></div>");return b&&d.append("<span>"+u(b)+"</span>"),c&&d.addClass(c),a.append(d),d},x=function(){return $("."+l.UI_HINT).length>0},y=function(){var a=!1,c={},d=!1,e=!1;return{setMousePosition:function(a,b){c={x:a,y:b}},getMousePosition:function(){return c},checkScrollingStatus:function(b,c){if(c===k.UP){var d=i._getIframeScrollTop()<o;a=b&&!d}else if(c===k.DOWN){var e=h.height()-i._getIframeScrollTop()<p;a=b&&!e}return a},scrollIFrame:function(d){var e;if(d===k.UP)e="-="+m;else{if(d!==k.DOWN)return;e="+="+m}var f=g.contents().find("html, body");if(!f.is(":animated")){var h=g.contents().find("._sm_helper");h.length>0&&(t?($.ui.smartedit._getBrowser()!==$.ui.smartedit._BROWSERS.FIREFOX&&(h.detach().appendTo("body .ySmartEditToolbars"),$("._sm_helper").detach().appendTo("body .ySmartEditToolbars")),h[0].style.top=c.y-i._getIframeScrollTop()+"px"):h[0].style.top=c.y+i._getIframeScrollTop()+"px"),f.animate({scrollTop:e},n,null,b(this,function(){this.checkScrollingStatus(a,d)&&this.scrollIFrame(d)}))}},calculateIFrameHintMouseStatus:function(a,b){q>b?(j.TOP.trigger("mouseenter"),d=!0):b>q&&d&&(j.TOP.trigger("mouseleave"),d=!1),b+r>g.height()?(j.BOTTOM.trigger("mouseenter"),e=!0):b+r<g.height()&&e&&(j.BOTTOM.trigger("mouseleave"),e=!1)}}}(),z=function(){j.TOP.bind("mouseenter",function(){y.checkScrollingStatus(!0,k.UP)&&y.scrollIFrame(k.UP)}),j.TOP.bind("mouseleave",function(){y.checkScrollingStatus(!1,k.UP),f.sortable("refreshPositions")}),j.BOTTOM.bind("mouseenter",function(){y.checkScrollingStatus(!0,k.DOWN)&&y.scrollIFrame(k.DOWN)}),j.BOTTOM.bind("mouseleave",function(){y.checkScrollingStatus(!1,k.DOWN),f.sortable("refreshPositions")}),h.bind("mousemove",function(a){a.preventDefault&&a.preventDefault(),y.setMousePosition(a.clientX,a.clientY),s&&!t&&y.calculateIFrameHintMouseStatus(a.clientX,a.clientY)})},A=function(a){this._refreshElementReferences(),j.TOP.toggleClass(l.VISIBLE,!0),j.BOTTOM.toggleClass(l.VISIBLE,!0),a||(j.BOTTOM.toggleClass(l.FF_FIX_APPLIED,!0),j.IFRAME_TOP.toggleClass(l.VISIBLE,!0),j.IFRAME_BOTTOM.toggleClass(l.VISIBLE,!0)),s=!0},B=function(a){j.TOP.removeClass(l.VISIBLE),j.BOTTOM.removeClass(l.VISIBLE),a||(j.BOTTOM.removeClass(l.FF_FIX_APPLIED),j.IFRAME_TOP.removeClass(l.VISIBLE),j.IFRAME_BOTTOM.removeClass(l.VISIBLE)),s=!1};return{initialize:function(){e&&(this._refreshElementReferences(),this._areUIHintsInjected()||(this._addUIHints(),this._registerScrollingInPage()))},enableScrolling:function(a,b){e&&(t=a,(a&&b||!a)&&this._showUIHints(b))},disableScrolling:function(a,b){e&&((a&&b||!a)&&this._hideUIHints(b),t=!1)},connectWithDragAndDrop:function(a){e=a},_addUIHints:v,_areUIHintsInjected:x,_showUIHints:A,_hideUIHints:B,_getSelector:c,_createAndAppendUIHint:w,_refreshElementReferences:d,_registerScrollingInPage:z}}])}(),angular.module("dragAndDropServiceModule",["dragAndDropServiceInterfaceModule","gatewayProxyModule","dragAndDropScrollingModule"]).factory("dragAndDropService",["$log","$rootScope","$timeout","DragAndDropServiceInterface","gatewayProxy","extend","hitch","dragAndDropScrollingService",function(a,b,c,d,e,f,g,h){var i=$.ui.smartedit,j="_sm_helper",k=function(d){this.gatewayId=d,e.initForService(this,["register"]),this.configurations={},this._clearVariables=function(){this._sharedDragHelper=null,this._originalDraggedItem=null,this._isDragStartedInDraggable=!1,this._isHelperRepositioned=!1,this._isSlotsPositionCachingUpdated=!1},this._clearVariables(),this.getSelector=function(a){return $(a)},this.getSelectorInIframe=function(a){return this.getSelector("iframe").contents().find(a)},this.cancel=function(a,b,c,d){this.fromFrame?d.sender?d.sender.sortable("cancel"):b.sortable("cancel"):$(c.target).find(a+":nth-child("+(d.item.index()+1)+")").remove()},this.cloneElement=function(a){return $(a).clone()},this._getReference=function(a){return a},this._removeDynamicStyles=function(a){this._removeHelpers(),this.getSelectorInIframe(a.targetSelector).removeClass("eligible-slot")},this._removeHelpers=function(){var a="."+j;this.getSelectorInIframe(a).remove(),this.getSelector(a).remove()},this._bindWatcher=function(d){d._unbindWatcher=b.$watch(g(this,function(){var a=$(d.sourceSelector);return a.filter($(":not(.ui-draggable.ui-draggable-handle)")).length>0}),g(this,function(){c(g(this,function(){a.debug("Updating draggable components."),this.apply()},0,!1))}))}};return k=f(d,k),k.prototype.draggableStart=function(a,b,c,d){this.getSelectorInIframe("body").addClass("is-dragging"),this._isDragStartedInDraggable=!0,this._isHelperRepositioned=!1,this.updateSlotsPositionCaching(a),$("._sm_helper").detach().appendTo("body .ySmartEditToolbars"),h.enableScrolling(!0,!0),a.startCallback&&a.startCallback(c,d)},k.prototype.draggableDrag=function(a,b,c,d){if(this.fromFrame=!1,this._sharedDragHelper=d.helper[0],!this._isHelperRepositioned){this._isHelperRepositioned=!0;var e=d.helper;e.detach().appendTo("body .ySmartEditToolbars"),d.helper[0].style.top=c.clientX,d.helper[0].style.left=c.clientY}},k.prototype.draggableStop=function(a,b,c,d){this.getSelectorInIframe("body").removeClass("is-dragging is-sorting"),this._removeDynamicStyles(a),this._isDragStartedInDraggable=!1,a.stopCallback&&a.stopCallback(c,d),this._sharedDragHelper=null,this._isHelperRepositioned=!1},k.prototype.sortableStart=function(a,b,c,d){this.getSelectorInIframe("body").addClass("is-sorting"),this.updateSlotsPositionCaching(a),this._isDragStartedInDraggable||h.enableScrolling(this._isDragStartedInDraggable,!1),this.fromFrame=!0,this.getSelectorInIframe(a.targetSelector).addClass("eligible-slot"),this._isDragStartedInDraggable&&d.item.replaceWith(this._sharedDragHelper);var e=this.getSelector(b);e.sortable("refresh"),a.startCallback&&a.startCallback(c,d)},k.prototype.sortableStop=function(a,b,c,d){this.getSelectorInIframe("body").removeClass("is-sorting"),this._removeDynamicStyles(a),this._isHelperRepositioned=!1,a.stopCallback&&a.stopCallback(c,d)},k.prototype.sortableOver=function(a,b,c,d){a.overCallback&&a.overCallback(c,d)},k.prototype.sortableOut=function(a,b,c,d){a.outCallback&&a.outCallback(c,d)},k.prototype.sortableUpdate=function(a,b,c,d){var e=d.item.closest(a.targetSelector),f=c.target;if(f===e[0]){var h=d.item;this._isDragStartedInDraggable&&(this._isDragStartedInDraggable=!1,h=this._originalDraggedItem,d.item.replaceWith(h),d.item=h),a.dropCallback&&a.dropCallback(c,d,g(this,this.cancel,a.sourceSelector,e,c,d))}},k.prototype.draggableHelper=function(a,b,c,d){var e=null;if(this._originalDraggedItem=this.cloneElement(b).removeAttr("id"),this._originalDraggedItem.removeClass("ui-draggable ui-draggable-handle"),this._originalDraggedItem.addClass("ui-sortable-handle"),a.helper){var f=this.getSelector(a.helper(c,b));this._copyElementProperties(this._originalDraggedItem,f),e=f.prop("outerHTML")}else e=this._originalDraggedItem.html();var g=$("<div>"+e+"</div>");return g.attr("id",j),g.addClass(j),g},k.prototype.sortableHelper=function(a,b,c,d){var e=d.html();if(a.helper){var f=this.getSelector(a.helper(c,d));this._copyElementProperties(d,f),e=f.prop("outerHTML")}var g=$("<div>"+e+"</div>");return g.attr("id",j),g.addClass(j),g},k.prototype._copyElementProperties=function(a,b){for(var c=a[0].attributes,d=0;d<c.length;d++){var e=c[d];"class"!==e.nodeName&&"id"!==e.nodeName&&b.attr(e.nodeName,e.nodeValue)}},k.prototype.registerSortable=function(a){var b=this,c=$("#js_iFrameWrapper iframe"),d=450;c.contents().find("body").css("padding-bottom",d/2.5),this.getSelectorInIframe(a.targetSelector).sortable({connectWith:a.targetSelector,items:a.sourceSelector,iframeFix:!0,cursorAt:{top:0,left:0},scroll:!1,intersect:"pointer",placeholder:"ySEDnDPlaceHolder",start:function(c,d){b.sortableStart(a,b._getReference(this),c,d)},stop:function(c,d){b._isDragStartedInDraggable||h.disableScrolling(b._isDragStartedInDraggable,!1),b.sortableStop(a,b._getReference(this),c,d)},over:function(c,d){b.sortableOver(a,b._getReference(this),c,d)},out:function(c,d){$.ui.smartedit._getBrowser()!==$.ui.smartedit._BROWSERS.FIREFOX&&(b._isDragStartedInDraggable?($("._sm_helper").detach().appendTo("body .ySmartEditToolbars"),$("iframe").contents().find("._sm_helper").detach().appendTo("body .ySmartEditToolbars")):$("._sm_helper").detach().appendTo("body .ySmartEditToolbars")),b.sortableOut(a,b._getReference(this),c,d)},update:function(c,d){b.sortableUpdate(a,b._getReference(this),c,d)},helper:function(c,d){return b.sortableHelper(a,b._getReference(this),c,d)},sort:function(a,b){}}),this.getSelectorInIframe(a.targetSelector).disableSelection()},k.prototype.registerDrag=function(a){var b=this;this.getSelector(a.sourceSelector).draggable({revert:!1,iframeFix:!0,scroll:!1,cursorAt:{left:0,top:0},connectToSortable:this.getSelectorInIframe(a.targetSelector),helper:function(c){return b.draggableHelper(a,b._getReference(this),c,null)},start:function(c,d){b.draggableStart(a,b._getReference(this),c,d)},drag:function(c,d){b.draggableDrag(a,b._getReference(this),c,d)},stop:function(c,d){h.disableScrolling(!0,!0),b.draggableStop(a,b._getReference(this),c,d)}})},k.prototype.register=function(a){if(!a.id)throw new Error("register() - Drag and drop configuration needs an id.");this.configurations[a.id]=a,this._bindWatcher(a)},k.prototype.unregister=function(a){var b={};Object.keys(this.configurations).forEach(g(this,function(c){var d=this.configurations[c];a.indexOf(d.id)>=0?(d._unbindWatcher(),this.getSelector(d.sourceSelector).draggable("destroy"),this.getSelectorInIframe(d.targetSelector).sortable("destroy")):b[d.id]=d})),this.configurations=b,i._numConnectedDraggables=0,i._sections={},i._currentBrowser=null,this._clearVariables()},k.prototype.updateSlotsPositionCaching=function(a){var b=this.getSelectorInIframe(a.targetSelector);b.sortable("refreshPositions")},k.prototype.apply=function(){i._clearCache(),Object.keys(this.configurations).forEach(g(this,function(b){var c=this.configurations[b];a.debug("applying dragAndDrop with configuration",c),this.registerSortable(c),this.registerDrag(c),h.connectWithDragAndDrop(c)}))},new k("dragAndDrop")}]),angular.module("experienceServiceModule",["siteServiceModule","catalogServiceModule","languageServiceModule"]).factory("experienceService",["$q","siteService","catalogService","languageService",function(a,b,c,d){return{buildDefaultExperience:function(e){var f=e.siteId,g=e.catalogId,h=e.catalogVersion;return b.getSiteById(f).then(function(b){return c.getCatalogsForSite(f).then(function(c){var i=c.filter(function(a){return a.catalogId==g&&a.catalogVersion==h});return 1!==i.length?a.reject("no catalogVersionDescriptor found for _catalogId_ catalogId and _catalogVersion_ catalogVersion".replace("_catalogId_",g).replace("_catalogVersion_",h)):d.getLanguagesForSite(f).then(function(a){var c={siteDescriptor:b,catalogDescriptor:i[0],languageDescriptor:a[0],time:null};return e.pageId&&(c.pageId=e.pageId),c})})})}}}]),angular.module("l10nModule",["languageServiceModule","eventServiceModule"]).filter("l10n",["languageService","systemEventService","SWITCH_LANGUAGE_EVENT",function(a,b,c){function d(){e=function(a){return a+" filtered initially"},e.$stateful=!1,a.getResolveLocale().then(function(a){e=function(b){return b[a]?b[a]:b[Object.keys(b)[0]]},e.$stateful=!1})}var e;return d(),b.registerEventHandler(c,d),function(a){return e(a)}}]),function(){angular.module("heartBeatServiceModule",["alertServiceModule","gatewayFactoryModule","translationServiceModule"]).constant("HEART_BEAT_PERIOD",1e4).factory("heartBeatService",["$rootScope","$timeout","$translate","gatewayFactory","alertService","HEART_BEAT_PERIOD",function(a,b,c,d,e,f){var g="heartBeatFailure",h="heartBeatGateway",i="heartBeat",j=function(){this._heartBeatFailed=!1,this._attachListeners()};return j.prototype._attachListeners=function(){this._heartBeatGateway=d.createGateway(h),this._heartBeatGateway.subscribe(i,function(a,b){this._heartBeatTimer&&this.resetTimer(!0)}.bind(this)),a.$on("$routeChangeStart",function(a,b,c){this.resetTimer(!1)}.bind(this))},j.prototype._failureCallback=function(){if(!this._heartBeatFailed){this._heartBeatFailed=!0;var a=c.instant("se.heartbeat.failure");e.pushAlerts([{id:g,successful:!1,message:a,closeable:!1}])}},j.prototype.resetTimer=function(a){this._heartBeatFailed&&(e.removeAlertById(g),this._heartBeatFailed=!1),this._heartBeatTimer&&(b.cancel(this._heartBeatTimer),this._heartBeatTimer=null),a&&(this._heartBeatTimer=b(this._failureCallback.bind(this),f))},new j}])}(),angular.module("iframeClickDetectionServiceModule",["gatewayProxyModule"]).factory("iframeClickDetectionService",["gatewayProxy",function(a){function b(){this.gatewayId="iframeClick",this.callbacks={},a.initForService(this,["onIframeClick"])}return b.prototype.registerCallback=function(a,b){this.callbacks[a]=b},b.prototype.removeCallback=function(a){this.callbacks[a]&&delete this.callbacks[a]},b.prototype.onIframeClick=function(){for(var a in this.callbacks)this.callbacks[a]()},new b}]),angular.module("featureServiceModule",["functionsModule","featureInterfaceModule","gatewayProxyModule","toolbarModule"]).factory("featureService",["extend","copy","hitch","FeatureServiceInterface","gatewayProxy","toolbarServiceFactory","$log",function(a,b,c,d,e,f,g){var h=function(){this.features=[],this.gatewayId="featureService",e.initForService(this,["_registerAliases","addToolbarItem","register","enable","disable","_remoteEnablingFromInner","_remoteDisablingFromInner","addDecorator","addContextualMenuButton"])};return h=a(d,h),h.prototype._registerAliases=function(a){var b=this.features.filter(function(b){return b.key===a.key})[0];b||this.features.push({id:btoa(a.key),key:a.key,nameI18nKey:a.nameI18nKey,descriptionI18nKey:a.descriptionI18nKey})},h.prototype.getFeatureKeys=function(a){return this.features.map(function(a){return a.key})},h.prototype.addToolbarItem=function(a){var d=b(a),e=f.getToolbarService(d.toolbarId);delete a.nameI18nKey,delete a.descriptionI18nKey;var g={key:d.key,nameI18nKey:d.nameI18nKey,descriptionI18nKey:d.descriptionI18nKey,enablingCallback:c(e,function(){this.addItems([a])}),disablingCallback:c(e,function(){this.removeItemByKey(d.key)})};this.register(g)},new h}]),angular.module("perspectiveServiceModule",["featureServiceModule","functionsModule","perspectiveServiceInterfaceModule","gatewayProxyModule","iFrameManagerModule","storageServiceModule","eventServiceModule"]).factory("renderGateway",["gatewayFactory",function(a){return a.createGateway("render")}]).factory("perspectiveService",["$log","$rootScope","$q","extend","isBlank","uniqueArray","hitch","systemEventService","Perspective","PerspectiveServiceInterface","featureService","gatewayProxy","renderGateway","iFrameManager","storageService","NONE_PERSPECTIVE","ALL_PERSPECTIVE","EVENTS",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s="smartedit-perspectives",t=function(){this.perspectives=[],this.data={activePerspective:void 0,previousPerspective:void 0},this.gatewayId="perspectiveService",l.initForService(this,["register","switchTo","hasActivePerspective","isEmptyPerspectiveActive","selectDefault"]),this._addDefaultPerspectives(),this._registerEventHandlers()};return t=d(j,t),t.prototype._addDefaultPerspectives=function(){this.register({key:p,nameI18nKey:"perspective.none.name",descriptionI18nKey:"perspective.none.description"}),this.register({key:q,nameI18nKey:"perspective.all.name",descriptionI18nKey:"perspective.all.description"})},t.prototype._validate=function(a){if(e(a.key))throw new Error("perspectiveService.configuration.key.error.required");if(e(a.nameI18nKey))throw new Error("perspectiveService.configuration.nameI18nKey.error.required");if(-1===[p,q].indexOf(a.key)&&(e(a.features)||0===a.features.length))throw new Error("perspectiveService.configuration.features.error.required")},t.prototype._findByKey=function(a){var b=this.perspectives.filter(function(b){return b.key===a})[0];return b},t.prototype._fetchAllFeatures=function(b,c){c||(c=[]),b.key===q?f(c,k.getFeatureKeys()||[]):(f(c,b.features||[]),(b.perspectives||[]).forEach(g(this,function(b){var d=this._findByKey(b);d?this._fetchAllFeatures(d,c):a.debug("nested perspective "+b+" was not found in the registry")})))},t.prototype.register=function(a){this._validate(a);var b=this._findByKey(a.key);b||(b=new i(a.nameI18nKey,[],!0),b.key=a.key,b.descriptionI18nKey=a.descriptionI18nKey,this.perspectives.push(b),h.sendAsynchEvent("perspectives:update")),b.features=f(b.features||[],a.features||[]),b.perspectives=f(b.perspectives||[],a.perspectives||[])},t.prototype.getPerspectives=function(){return this.perspectives},t.prototype.hasActivePerspective=function(){return Boolean(this.data.activePerspective)},t.prototype.isEmptyPerspectiveActive=function(){return this.data.activePerspective&&this.data.activePerspective.key===p},t.prototype.switchTo=function(a){if(this._changeActivePerspective(a)){n.showWaitModal();var b=[];this.data.previousPerspective&&this._fetchAllFeatures(this.data.previousPerspective,b);var c=[];this._fetchAllFeatures(this.data.activePerspective,c),b.filter(function(a){return!c.some(function(b){return a==b})}).forEach(function(a){k.disable(a)}),c.filter(function(a){return!b.some(function(b){return a==b})}).forEach(function(a){k.enable(a)}),m.publish("rerender",this.data.activePerspective.key!=p),this.data.activePerspective.key==p&&n.hideWaitModal()}},t.prototype._retrievePerspective=function(a){if(this.data.activePerspective&&this.data.activePerspective.key===a)return null;var b=this._findByKey(a);if(!b)throw new Error("switchTo() - Couldn't find perspective with key "+a);return b},t.prototype._changeActivePerspective=function(a){var b=this._retrievePerspective(a);return b&&(this.data.previousPerspective=this.data.activePerspective,this.data.activePerspective=b,o.putValueInCookie(s,b.key,!0)),b},t.prototype.selectDefault=function(){return o.getValueFromCookie(s,!0).then(g(this,function(a){var b=a&&this._findByKey(a)?a:p,c=this.data.previousPerspective?this.data.previousPerspective.key:b;this.switchTo(c)}))},t.prototype.clearActivePerspective=function(){this.data.previousPerspective=this.data.activePerspective,delete this.data.activePerspective},t.prototype._registerEventHandlers=function(){h.registerEventHandler(r.CLEAR_PERSPECTIVE_FEATURES,g(this,this._clearPerspectiveFeatures)),h.registerEventHandler(r.LOGOUT,g(this,this._onLogoutPerspectiveCleanup))},t.prototype._clearPerspectiveFeatures=function(){var a=[];return this.data&&this.data.activePerspective&&this._fetchAllFeatures(this.data.activePerspective,a),a.forEach(function(a){k.disable(a)}),c.when()},t.prototype._onLogoutPerspectiveCleanup=function(){return this._clearPerspectiveFeatures().then(g(this,function(){return this.clearActivePerspective(),c.when()}))},new t}]),function(){angular.module("renderServiceModule",["gatewayProxyModule","renderServiceInterfaceModule"]).factory("renderService",["extend","gatewayProxy","RenderServiceInterface",function(a,b,c){var d="Renderer",e=function(a){this.gatewayId=a,b.initForService(this,["renderSlots","renderComponent","renderRemoval","toggleOverlay","refreshOverlayDimensions","renderPage"])};return new(e=a(c,e))(d)}])}(),angular.module("sharedDataServiceModule",["gatewayProxyModule","sharedDataServiceInterfaceModule"]).factory("sharedDataService",["gatewayProxy","SharedDataServiceInterface","extend",function(a,b,c){var d={},e=function(b){this.gatewayId=b,a.initForService(this)};return e=c(b,e),e.prototype.get=function(a){return d[a]},e.prototype.set=function(a,b){d[a]=b},new e("sharedData")}]),angular.module("siteServiceModule",["restServiceFactoryModule","resourceLocationsModule"]).factory("siteService",["restServiceFactory","SITES_RESOURCE_URI","$q",function(a,b,c){var d=null,e=a.get(b);return{getSites:function(){return d?c.when(d):e.get().then(function(a){return d=a.sites})},getSiteById:function(a){return this.getSites().then(function(b){return b.filter(function(b){return b.uid==a})[0]})}}}]),angular.module("storageServiceModule",["gatewayProxyModule","ngCookies"]).factory("storageService",["$rootScope","$cookies","$window","gatewayProxy",function(a,b,c,d){var e="smartedit-sessions",f="principal-uid",g=function(a){this.gatewayId=a,d.initForService(this,["isInitialized","storeAuthToken","getAuthToken","removeAuthToken","removeAllAuthTokens","storePrincipalIdentifier","getPrincipalIdentifier","removePrincipalIdentifier","getValueFromCookie"])};return g.prototype.isInitialized=function(){return void 0!==b.get(e)},g.prototype.storePrincipalIdentifier=function(a){var b=this.getAuthTokens();b[f]=a,this._setToAuthCookie(b)},g.prototype.removePrincipalIdentifier=function(){var a=this.getAuthTokens();delete a[f],this._setToAuthCookie(a)},g.prototype.getPrincipalIdentifier=function(){var a=this.getAuthTokens();return a[f]},g.prototype.storeAuthToken=function(a,b){var c=this.getAuthTokens();c[a]=b,this._setToAuthCookie(c)},g.prototype.getAuthTokens=function(){return this._getValueFromCookie(e,!0)||{}},g.prototype.getAuthToken=function(a){var b=this.getAuthTokens();return b[a]},g.prototype.removeAuthToken=function(a){var b=this.getAuthTokens();delete b[a],this._setToAuthCookie(b)},g.prototype._removeAllAuthTokens=function(){b.remove(e)},g.prototype._putValueInCookie=function(a,d,e){var f=JSON.stringify(d);f=e?btoa(f):f,c.location.protocol.indexOf("https")>=0?b.put(a,f,{secure:!0}):b.put(a,f)},g.prototype._getValueFromCookie=function(a,c){var d=b.get(a),e=null;if(d)try{e=JSON.parse(c?atob(d):d)}catch(f){}return e},g.prototype.removeAllAuthTokens=function(){this._removeAllAuthTokens()},g.prototype.putValueInCookie=function(a,b,c){this._putValueInCookie(a,b,c)},g.prototype.getValueFromCookie=function(a,b){return this._getValueFromCookie(a,b)},g.prototype._setToAuthCookie=function(a){Object.keys(a).length>0?this._putValueInCookie(e,a,!0):this._removeAllAuthTokens()},new g("storage")}]),angular.module("urlServiceModule",["gatewayProxyModule","urlServiceInterfaceModule"]).factory("urlService",["$location","gatewayProxy","UrlServiceInterface","extend",function(a,b,c,d){var e=function(a){this.gatewayId=a,b.initForService(this)};return e=d(c,e),e.prototype.openUrlInPopup=function(a){var b=window.open(a,"_blank","toolbar=no, scrollbars=yes, resizable=yes");b.focus()},e.prototype.path=function(b){a.path(b)},new e("urlService")}]),function(){angular.module("catalogDetailsModule",["resourceLocationsModule"]).factory("catalogDetailsService",function(){var a=[],b=function(b){a=a.concat(b)},c=function(){return a};return{addItems:b,getItems:c}}).directive("catalogDetails",["$location","STOREFRONT_PATH","catalogDetailsService",function(a,b,c){return{templateUrl:"web/smarteditcontainer/services/widgets/catalogDetails/catalogDetailsTemplate.html",restrict:"E",transclude:!1,scope:{catalog:"="},link:function(d){d.onCatalogSelect=function(c){var d=b.replace(":siteId",c.siteDescriptor.uid).replace(":catalogId",c.catalogId).replace(":catalogVersion",c.catalogVersion);a.path(d)},d.templates=c.getItems()}}}])}(),function(){angular.module("clientPagedListModule",["pascalprecht.translate","ui.bootstrap","ngSanitize","paginationFilterModule","iFrameManagerModule","compileHtmlModule"]).directive("clientPagedList",["$filter",function(a){return{templateUrl:"web/smarteditcontainer/services/widgets/clientPagedList/clientPagedList.html",restrict:"E",transclude:!1,scope:{items:"=",itemsPerPage:"=",totalItems:"=",keys:"=",renderers:"=",injectedContext:"=",identifier:"=",sortBy:"=",reversed:"=",query:"=",displayCount:"="},link:function(b,c,d){function e(){b.totalItems=b.filteredItems.length}b.totalItems=0,b.currentPage=1,b.filteredItems=[],b.columnWidth=100/b.keys.length,b.columnToggleReversed=b.reversed,b.headersSortingState={},b.headersSortingState[b.sortBy]=b.reversed,b.visibleSortingHeader=b.sortBy,b.$watch("items",function(){b.totalItems=b.items.length,b.filteredItems=a("orderBy")(b.items,b.sortBy,b.reversed)}),b.$watch("query",function(){""===b.query&&b.items.length>0?(b.filteredItems=a("orderBy")(b.items,b.sortBy,b.reversed),e()):b.items.length>0&&(b.filteredItems=a("filter")(a("orderBy")(b.items,b.sortBy,b.columnToggleReversed),b.query),e())}),b.orderByColumn=function(c){b.columnToggleReversed=!b.columnToggleReversed,b.headersSortingState[c]=b.columnToggleReversed,b.visibleSortingHeader=c,b.filteredItems=a("orderBy")(b.filteredItems,c,b.columnToggleReversed)}}}}])}(),angular.module("paginationFilterModule",[]).filter("startFrom",function(){return function(a,b){return a?(b=+b,a.slice(b)):[]}});